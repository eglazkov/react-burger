(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{117:function(e,t,n){e.exports={mainContainer:"app_mainContainer__cfS9Y"}},119:function(e,t,n){e.exports={container:"order-modal_container__uEZZB"}},120:function(e,t,n){e.exports={container:"navigation-item_container__1CB_z"}},122:function(e,t,n){e.exports={spinner:"app-spinner_spinner__ZceSo"}},123:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__3oO02"}},124:function(e,t,n){e.exports={loader:"spinner_loader__2AI07",load3:"spinner_load3__wUlCF"}},135:function(e,t,n){},18:function(e,t,n){e.exports={content:"ingredient-details_content__1dsLl",energy:"ingredient-details_energy__2qW6b",energyItem:"ingredient-details_energyItem__2GwGm"}},214:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(44),s=n.n(c),i=(n(135),n(3)),o=n(49),d=n(117),l=n.n(d),u=n(87),j=n.n(u),b=n(6),p=n(2),O=n(5),m=n(17),_=n.n(m),f=n(35),g="FETCH_INGREDIENTS_PENDING",x="FETCH_INGREDIENTS_SUCCESS",h="FETCH_INGREDIENTS_FAIL",v="CHANGE_INGREDIENTS",y="INCREASE_INGREDIENT_COUNT",N="DECREASE_INGREDIENT_COUNT",E="OPEN_INGREDIENT_DETAILS",S="CLOSE_INGREDIENT_DETAILS",I="https://norma.nomoreparties.space/api",C=function(e){return{type:h,payload:{errorMessage:e}}},T=function(){return function(){var e=Object(f.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:g}),fetch("".concat(I,"/ingredients")).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){var n;t((n=e.data,{type:x,payload:{ingredients:n}}))})).catch((function(e){t(C(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return{type:v,payload:{ingredients:e}}},k=function(e){return{type:y,payload:{id:e}}},R=function(e){return{type:N,payload:{id:e}}},D=function(e){return{type:E,payload:{details:e}}},A=function(){return{type:S}},L=function(){return[Object(O.e)((function(e){var t=e.ingredientsReducer;return{ingredients:t.ingredients,isIngredientsLoading:t.isIngredientsLoading,errorMessage:t.errorMessage,showIngredientDetails:t.showIngredientDetails,ingredientDetails:t.ingredientDetails}})),{fetchIngredientsAction:T,changeIngredientsAction:w,increaseCountAction:k,decreaseCountAction:R,closeDetailsAction:A,openDetailsAction:D}]},U="INCREASE_TOTALCOST",P="DECREASE_TOTALCOST",F="RESET_TOTALCOST",M="FETCH_DATA_ORDER_PENDING",G="FETCH_DATA_ORDER_SUCCESS",B="FETCH_DATA_ORDER_FAIL",W="SHOW_ORDER_DETAILS",H="CLOSE_ORDER_DETAILS",J="GET_ORDER_BY_ID_PENDING",V="GET_ORDER_BY_ID_SUCCESS",Y="GET_ORDER_BY_ID_FAIL",Z=function(e){return{type:U,payload:{amount:e}}},z=function(e){return{type:P,payload:{amount:e}}},q=function(){return{type:F}},K=function(){return{type:W}},X=function(){return{type:H}},Q=function(e){return function(t){t({type:M}),fetch("".concat(I,"/orders"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({ingredients:e})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){var n;t((n=e.order.number,{type:G,payload:{orderId:n}})),t({type:W})})).catch((function(e){t(function(e){return{type:B,payload:{errorMessage:e}}}(e))}))}},$=function(e){return function(t){t({type:J}),fetch("".concat(I,"/orders/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){var n;t((n=e.orders&&e.orders.length>0?e.orders[0]:null,{type:V,payload:n}))})).catch((function(e){t(function(e){return{type:Y,payload:{errorMessage:e}}}(e))}))}},ee=function(){return[Object(O.e)((function(e){var t=e.orderReducer;return{totalCost:t.totalCost,isSendingDataOrder:t.isSendingDataOrder,orderId:t.orderId,isShowOrderDetails:t.isShowOrderDetails,errorMessage:t.errorMessage,order:t.order,isOrderLoading:t.isOrderLoading}})),{increaseTotalCostAction:Z,decreaseTotalCostAction:z,resetTotalCostAction:q,fetchDataOrderAction:Q,showOrderDetailsAction:K,closeOrderDetailsAction:X,getOrderByIdAction:$}]},te=n(223),ne="ADD_TO_CONSTRUCTOR",ae="REMOVE_FROM_CONSTRUCTOR",re="DROP_CONSTRUCTOR_ITEM",ce="RESET_CONSTRUCTOR",se="SHOW_DROP_LOCATION",ie="HIDE_DROP_LOCATION",oe=function(e,t){var n=Object(te.a)();return{type:ne,payload:{index:e,item:Object(p.a)({constructorId:n},t)}}},de=function(e){return{type:ae,payload:{index:e}}},le=function(e){var t=e.dragIndex,n=e.replaceToIndex;return{type:re,payload:{dragIndex:t,replaceToIndex:n}}},ue=function(){return{type:ce}},je=function(e){return e?{type:se}:{type:ie}},be=function(){return[Object(O.e)((function(e){var t=e.constructorReducer;return{constructorIngredients:t.constructorIngredients,showDropLocation:t.showDropLocation}})),{addToConstructorAction:oe,removeFromConstructorAction:de,dropConstructorItemAction:le,resetConstructorAction:ue,toggleDropLoactionAction:je}]},pe="REGISTER_FORM_SET_VALUE",Oe=function(e,t){return{type:pe,field:e,value:t}},me="LOGIN_FORM_SET_VALUE",_e=function(e,t){return{type:me,field:e,value:t}},fe="FORGOT_PASSWORD_FORM_SET_VALUE",ge=function(e,t){return{type:fe,field:e,value:t}},xe="RESET_PASSWORD_FORM_SET_VALUE",he=function(e,t){return{type:xe,field:e,value:t}},ve="USER_LOGIN_PENDING",ye="USER_LOGIN_SUCCESS",Ne="USER_LOGIN_FAIL",Ee="USER_REGISTER_PENDING",Se="USER_REGISTER_SUCCESS",Ie="USER_REGISTER_FAIL",Ce="USER_LOGOUT_SUCCESS",Te="USER_UPDATE_PENDING",we="USER_UPDATE_SUCCESS",ke="USER_UPDATE_FAIL",Re="USER_REFRESH_TOKEN_SUCCESS",De="USER_REFRESH_TOKEN_FAIL",Ae="GET_USER_SUCCESS",Le="GET_USER_FAIL",Ue=function(e){return{type:Ne,payload:{errorMessage:e}}},Pe=function(e){var t=e.email,n=e.password;return function(){var e=Object(f.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:ve}),fetch("".concat(I,"/auth/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){var t;a((t=Object(p.a)(Object(p.a)({},e),{},{token:e.accessToken?e.accessToken.split("Bearer ")[1]:null}),{type:ye,payload:t})),e.accessToken&&(localStorage.setItem("token",e.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",e.refreshToken))})).catch((function(e){a(Ue(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Fe=function(e){var t=e.email,n=e.password,a=e.name;return function(){var e=Object(f.a)(_.a.mark((function e(r){var c,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:Ee}),e.prev=1,e.next=4,fetch("".concat(I,"/auth/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:a})});case 4:if((c=e.sent).ok){e.next=9;break}throw new Error(String(c.status));case 9:return s=c.json(),r((o=Object(p.a)(Object(p.a)({},s),{},{token:s.accessToken?s.accessToken.split("Bearer ")[1]:null}),{type:Se,payload:o})),e.abrupt("return",s);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(1),r((i=e.t0,{type:Ie,payload:{errorMessage:i}})),e.abrupt("return",{success:!1,errorMessage:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!"});case 18:case"end":return e.stop()}var i,o}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},Me=function(e){var t=e.email,n=e.password,a=e.name;return function(e){e({type:Te}),fetch("".concat(I,"/auth/user"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({email:t,password:n,name:a})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){e({type:we,payload:t.data})})).catch((function(t){e({type:ke,payload:{errorMessage:t}})}))}},Ge=function e(){return function(t){t({type:"GET_USER_PENDING"}),fetch("".concat(I,"/auth/user "),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(){var n=Object(f.a)(_.a.mark((function n(a){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.ok||401===a.status){n.next=5;break}return t(Be()).then((function(){t(e())})),n.abrupt("return",Promise.reject(a.status));case 5:return n.abrupt("return",a.json());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).then((function(e){t({type:Ae,payload:Object(p.a)(Object(p.a)({},e),{},{token:localStorage.getItem("token")})})})).catch((function(e){t({type:Le,payload:{errorMessage:e}})}))}},Be=function(){return function(e){return e({type:"USER_REFRESH_TOKEN_PENDING"}),fetch("".concat(I,"/auth/token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(t){e({type:Re,payload:Object(p.a)(Object(p.a)({},t),{},{token:t.accessToken?t.accessToken.split("Bearer ")[1]:null})}),localStorage.setItem("token",t.accessToken.split("Bearer ")[1]),localStorage.setItem("refreshToken",t.refreshToken)})).catch((function(t){e({type:De,payload:{errorMessage:t}})}))}},We=function(){return function(){var e=Object(f.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"USER_LOGOUT_PENDING"}),fetch("".concat(I,"/auth/logout"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:"".concat(localStorage.getItem("refreshToken"))})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).then((function(e){t({type:Ce,payload:e.data}),localStorage.setItem("token",""),localStorage.setItem("refreshToken","")})).catch((function(e){t({type:"USER_LOGOUT_FAIL",payload:{errorMessage:e}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},He=function(e){var t=e.email;return function(){var e=Object(f.a)(_.a.mark((function e(n){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"USER_RESET_PASSWOD_REQUEST_PENDING"}),e.prev=1,e.next=4,fetch("".concat(I,"/password-reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t})});case 4:if((a=e.sent).ok){e.next=9;break}throw new Error(String(a.status));case 9:return r=a.json(),n({type:"USER_RESET_PASSWOD_REQUEST_SUCCESS",payload:r.data}),e.abrupt("return",r);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n({type:"USER_RESET_PASSWOD_REQUEST_FAIL",payload:{errorMessage:e.t0}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},Je=function(e){var t=e.password,n=e.token;return function(){var e=Object(f.a)(_.a.mark((function e(a){var r,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"USER_RESET_PASSWOD_PENDING"}),e.prev=1,e.next=4,fetch("".concat(I,"/password-reset/reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,token:n})});case 4:if((r=e.sent).ok){e.next=9;break}throw new Error(String(r.status));case 9:return c=r.json(),a({type:"USER_RESET_PASSWOD_SUCCESS",payload:c.data}),e.abrupt("return",c);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),a({type:"USER_RESET_PASSWOD_FAIL",payload:{errorMessage:e.t0}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()},Ve=function(){return[Object(O.e)((function(e){var t=e.userReducer;return{user:t.user,userActionPending:t.userActionPending,accessToken:t.accessToken,refreshToken:t.refreshToken,isUserLoaded:t.isUserLoaded,isUserUpdates:t.isUserUpdates}})),{fetchUserLoginAction:Pe,fetchUserRegisterAction:Fe,fetchGetUserAction:Ge,fetchUserLogoutAction:We,fetchUserUpdateAction:Me,fetchUserResetPasswordRequestAction:He,fetchUserResetPasswordAction:Je}]},Ye=function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()},Ze=function(e){return e.reduce((function(e,t){return e+(function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}(new Date(t.createdAt))?1:0)}),0)},ze=function(){return[Object(O.e)((function(e){var t,n,a,r,c=e.wsReducer;return{feedData:Object(p.a)(Object(p.a)({},c.feedData),{},{orders:(null===(t=c.feedData)||void 0===t?void 0:t.orders.sort(Ye))||[],totalToday:Ze(null===(n=c.feedData)||void 0===n?void 0:n.orders)}),historyData:Object(p.a)(Object(p.a)({},c.historyData),{},{orders:(null===(a=c.historyData)||void 0===a?void 0:a.orders.sort(Ye))||[],totalToday:Ze(null===(r=c.historyData)||void 0===r?void 0:r.orders)}),wsConnected:c.wsConnected}}))]},qe=n(20),Ke=Object(qe.a)({basename:"/react-burger"}),Xe=n(11),Qe=n(218),$e=n(128),et=n(0),tt=function(){var e=Object(O.d)(),t=L(),n=Object(i.a)(t,2),r=n[0].errorMessage,c=n[1],s=c.fetchIngredientsAction,o=c.increaseCountAction,d=c.decreaseCountAction,l=ee(),u=Object(i.a)(l,2)[1],j=u.increaseTotalCostAction,b=u.decreaseTotalCostAction,p=be(),m=Object(i.a)(p,2),_=m[0].constructorIngredients,f=m[1],g=f.addToConstructorAction,x=f.removeFromConstructorAction,h=function(t){e(j(t))},v=function(t){e(o(t))},y=function(t,n){e(g(t,n))};Object(a.useEffect)((function(){e(s()),r&&alert("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(r))}),[r,s,e]);var N=function(e){var t=_.length,n=1===t?t:t-1;if(0===t||"bun"===e.type){if("bun"!==e.type)return void alert('\u0414\u0430\u043d\u043d\u044b\u0439 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043b\u0435\u0436\u0430\u0442\u044c \u0432 \u043e\u0441\u043d\u043e\u0432\u0435 \u0431\u0443\u0440\u0433\u0435\u0440\u0430.\n\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u043d\u0442 \u0438\u0437 \u0440\u0430\u0437\u0434\u0435\u043b\u0430 "\u0411\u0443\u043b\u043a\u0438".');2===t?(E(t-2),E(0)):t>2&&(E(t-1),E(0)),y(0,e),y(t,e),v(e._id),v(e._id),h(2*e.price)}else y(n,e),v(e._id),h(e.price)},E=function(t){var n,a,r=_[t];n=r._id,e(d(n)),a=r.price,e(b(a)),function(t){e(x(t))}(t)};return Object(et.jsxs)(Qe.a,{backend:$e.a,children:[Object(et.jsx)(Wn,{addIngredient:N}),Object(et.jsx)(An,{addIngredient:N,removeIngredient:E})]})},nt=n(63),at=n.n(nt),rt=function(){var e=Object(O.d)(),t=[Object(O.e)((function(e){var t=e.loginFormReducer;return{email:t.email,password:t.password}})),{setLoginFormValue:_e}],n=Object(i.a)(t,2),a=n[0],r=a.email,c=a.password,s=n[1].setLoginFormValue,o=Ve(),d=function(t){var n=t.target;e(s(n.name,n.value))};return Object(i.a)(o,1)[0].userActionPending?Object(et.jsx)(_n,{isLoading:!0}):Object(et.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(Pe({email:r,password:c}))},className:at.a.container,children:[Object(et.jsx)("span",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.EmailInput,{name:"email",value:r,onChange:d})}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.PasswordInput,{name:"password",value:c,onChange:d})}),Object(et.jsx)("div",{className:"mt-3 mb-5",children:Object(et.jsx)(b.Button,{children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(et.jsxs)("div",{className:"mt-5 text text_type_main-default",children:[Object(et.jsx)("span",{className:at.a.label,children:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? "}),Object(et.jsx)(cn,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(et.jsxs)("div",{className:"mt-1 text text_type_main-default",children:[Object(et.jsx)("span",{className:at.a.label,children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? "}),Object(et.jsx)(cn,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},ct=n(90),st=n.n(ct),it=function(){var e=Object(O.d)(),t=[Object(O.e)((function(e){var t=e.registerFormReducer;return{name:t.name,email:t.email,password:t.password}})),{setRegisterFormValue:Oe}],n=Object(i.a)(t,2),a=n[0],r=a.name,c=a.email,s=a.password,o=n[1].setRegisterFormValue,d=Ve(),l=Object(i.a)(d,2),u=l[0].userActionPending,j=l[1].fetchUserRegisterAction,p=function(t){var n=t.target;e(o(n.name,n.value))};return u?Object(et.jsx)(fn,{}):Object(et.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(j({email:c,password:s,name:r})).then((function(e){var t=e.success,n=e.errorMessage;t?Ke.replace({pathname:"/login"}):n&&alert("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(n))}))},className:st.a.container,children:[Object(et.jsx)("span",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.Input,{placeholder:"\u0418\u043c\u044f",name:"name",value:r,onChange:p})}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.EmailInput,{name:"email",value:c,onChange:p})}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.PasswordInput,{name:"password",value:s,onChange:p})}),Object(et.jsx)("div",{className:"mt-3 mb-5",children:Object(et.jsx)(b.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(et.jsxs)("div",{className:"mt-5 text text_type_main-default",children:[Object(et.jsx)("span",{className:st.a.label,children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? "}),Object(et.jsx)(cn,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},ot=n(33),dt=n.n(ot),lt="WS_CONNECTION_START",ut="WS_CONNECTION_USER_START",jt="WS_CONNECTION_END",bt="WS_CONNECTION_USER_END",pt="WS_CONNECTION_SUCCESS",Ot="WS_CONNECTION_ERROR",mt="WS_CONNECTION_CLOSED",_t="WS_GET_FEED_ORDERS",ft="WS_GET_HISTORY_ORDERS",gt="WS_SEND_PONG_MESSAGE",xt=n(86),ht=function(){var e=Object(O.d)(),t=new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0}).format,n=Object(Xe.g)(),r=L(),c=Object(i.a)(r,2),s=c[0].ingredients,o=c[1].fetchIngredientsAction,d=ze(),l=Object(i.a)(d,1)[0],u=l.feedData,j=l.wsConnected,b=void 0!==j&&j,m=u.orders,_=u.total,f=u.totalToday,g=Object(a.useMemo)((function(){return xt.keyBy(s,"_id")}),[s]),x=Object(a.useMemo)((function(){return m.filter((function(e){return"done"===e.status}))}),[m]),h=Object(a.useMemo)((function(){return m.filter((function(e){return"pending"===e.status}))}),[m]);return Object(a.useEffect)((function(){e({type:lt}),0===s.length&&e(o());var t=setInterval((function(){e({type:gt})}),1e4);return function(){clearInterval(t),e({type:jt})}}),[]),b?Object(et.jsxs)("div",{className:dt.a.container,children:[Object(et.jsxs)("div",{className:dt.a.feedContainer,children:[Object(et.jsx)("div",{className:"mb-4 text text_type_main-large",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(et.jsx)("div",{className:"".concat(dt.a.feedList),children:m.map((function(e){return g&&Object(et.jsx)(zn,Object(p.a)({changeLocation:function(e){var t=e.number;Ke.push({pathname:"/feed/".concat(t),state:{background:n}})},ingredientsMap:g},e),Object(te.a)())}))})]}),Object(et.jsxs)("div",{className:"".concat(dt.a.stats," ml-5"),children:[Object(et.jsxs)("div",{className:"".concat(dt.a.table),children:[Object(et.jsxs)("div",{className:"pr-5",children:[Object(et.jsx)("div",{className:"text text_type_main-medium mt-3",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(et.jsx)("ul",{className:"".concat(dt.a.readyOrders),children:x.map((function(e){var t=e.number;return Object(et.jsx)("li",{className:"text text_type_digits-default mb-2",children:t},Object(te.a)())}))})]}),Object(et.jsxs)("div",{children:[Object(et.jsx)("div",{className:"text text_type_main-medium mt-3",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(et.jsx)("ul",{className:"".concat(dt.a.currentOrders),children:h.map((function(e){var t=e.number;return Object(et.jsx)("li",{className:"text text_type_digits-default mb-2",children:t},Object(te.a)())}))})]})]}),Object(et.jsxs)("div",{className:"".concat(dt.a.tableNum),children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(et.jsx)("div",{className:"text text_type_digits-large",children:t(_)})]}),Object(et.jsxs)("div",{className:"".concat(dt.a.tableNum),children:[Object(et.jsx)("div",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(et.jsx)("div",{className:"text text_type_digits-large",children:t(f)})]})]})]}):Object(et.jsx)(fn,{})},vt=n(93),yt=n.n(vt),Nt=function(){var e=Object(O.d)(),t=Object(Xe.g)().pathname,n=[Object(O.e)((function(e){return{email:e.forgotPasswordFormReducer.email}})),{setForgotPasswordFormValue:ge}],a=Object(i.a)(n,2),r=a[0].email,c=a[1].setForgotPasswordFormValue,s=Ve(),o=Object(i.a)(s,2)[1].fetchUserResetPasswordRequestAction;return Object(et.jsxs)("form",{onSubmit:function(n){return function(n){n.preventDefault(),e(o({email:r})).then((function(e){return e.success&&Ke.replace({pathname:"/reset-password",state:{from:t}})}))}(n)},className:yt.a.container,children:[Object(et.jsx)("span",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.EmailInput,{value:r,name:"email",onChange:function(t){var n=t.target;e(c(n.name,n.value))}})}),Object(et.jsx)("div",{className:"mt-3 mb-5",children:Object(et.jsx)(b.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(et.jsxs)("div",{className:"mt-5 text text_type_main-default",children:[Object(et.jsx)("span",{className:yt.a.label,children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? "}),Object(et.jsx)(cn,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Et=n(94),St=n.n(Et),It=function(){var e=Object(O.d)(),t=Object(Xe.g)(),n=[Object(O.e)((function(e){var t=e.resetPasswordFormReducer;return{password:t.password,token:t.token}})),{setResetPasswordFormValue:he}],a=Object(i.a)(n,2),r=a[0],c=r.password,s=r.token,o=a[1].setResetPasswordFormValue,d=Ve(),l=Object(i.a)(d,2)[1].fetchUserResetPasswordAction,u=function(t){var n=t.target;e(o(n.name,n.value))};return t.state&&"/forgot-password"===t.state.from?Object(et.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(l({password:c,token:s})).then((function(e){return e.success&&Ke.replace({pathname:"/login"})}))},className:St.a.container,children:[Object(et.jsx)("span",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.PasswordInput,{name:"password",value:c,onChange:u})}),Object(et.jsx)("div",{className:"mt-3",children:Object(et.jsx)(b.Input,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:s,name:"token",onChange:u})}),Object(et.jsx)("div",{className:"mt-3 mb-5",children:Object(et.jsx)(b.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(et.jsxs)("div",{className:"mt-5 text text_type_main-default",children:[Object(et.jsx)("span",{className:St.a.label,children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? "}),Object(et.jsx)(cn,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(et.jsx)(Xe.a,{to:"/forgot-password"})},Ct=n(18),Tt=n.n(Ct),wt=function(){var e=Object(O.d)(),t=Object(Xe.h)().id,n=L(),r=Object(i.a)(n,2),c=r[0],s=c.ingredients,o=c.isIngredientsLoading,d=r[1].fetchIngredientsAction,l=Object(a.useState)({}),u=Object(i.a)(l,2),j=u[0],b=u[1];return Object(a.useEffect)((function(){!Ke.location.state&&e(d())}),[t]),Object(a.useEffect)((function(){b(s.find((function(e){return e._id===t}))||{})}),[s]),Object(et.jsx)(et.Fragment,{children:o?Object(et.jsx)(_n,{isLoading:!0}):Object(et.jsxs)("div",{className:Tt.a.content,children:[Object(et.jsx)("img",{className:"mb-2",src:j.image_large,alt:j.name}),Object(et.jsx)("span",{className:"text text_type_main-medium mb-4",children:j.name}),Object(et.jsx)("span",{className:"text text_type_main-default mb-5",children:j.description}),Object(et.jsxs)("div",{className:"mt-5 mb-5 ".concat(Tt.a.energy),children:[Object(et.jsxs)("div",{className:Tt.a.energyItem,children:[Object(et.jsx)("span",{className:"text text_type_main-default\n            ".concat(Tt.a.energyItem__caption),children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(et.jsx)("span",{className:"text text_type_digits-default mt-1\n            ".concat(Tt.a.energyItem__value),children:j.calories})]}),Object(et.jsxs)("div",{className:Tt.a.energyItem,children:[Object(et.jsx)("span",{className:"text text_type_main-default\n            ".concat(Tt.a.energyItem__caption),children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(et.jsx)("span",{className:"text text_type_digits-default mt-1\n            ".concat(Tt.a.energyItem__value),children:j.proteins})]}),Object(et.jsxs)("div",{className:Tt.a.energyItem,children:[Object(et.jsx)("span",{className:"text text_type_main-default\n            ".concat(Tt.a.energyItem__caption),children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(et.jsx)("span",{className:"text text_type_digits-default mt-1\n            ".concat(Tt.a.energyItem__value),children:j.fat})]}),Object(et.jsxs)("div",{className:Tt.a.energyItem,children:[Object(et.jsx)("span",{className:"text text_type_main-default\n            ".concat(Tt.a.energyItem__caption),children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(et.jsx)("span",{className:"text text_type_digits-default mt-1\n            ".concat(Tt.a.energyItem__value),children:j.carbohydrates})]})]})]})})},kt=function(e){var t=e.caption,n=e.onClose;return Object(et.jsx)(In,{caption:t,onClose:n,children:Object(et.jsx)(wt,{})})},Rt=n(220),Dt=n(61),At=n(34),Lt=n.n(At),Ut=n(86),Pt=function(){var e=Object(O.d)(),t=Object(Xe.h)().id,n=ee(),r=Object(i.a)(n,2),c=r[0],s=c.isOrderLoading,o=c.order,d=r[1].getOrderByIdAction,l=L(),u=Object(i.a)(l,2),j=u[0].ingredients,p=u[1].fetchIngredientsAction,m=Object(a.useMemo)((function(){return Ut.keyBy(j,"_id")}),[j]),_=Object(a.useMemo)((function(){return o&&o.ingredients.reduce((function(e,t){return e+(m[t]?Number(m[t].price):0)}),0)}),[o]);return Object(a.useEffect)((function(){e(p()).then((function(){e(d(t))}))}),[]),s||Ut.isEmpty(m,!0)||!o?Object(et.jsx)(_n,{isLoading:!0}):Object(et.jsxs)("div",{className:Lt.a.container,children:[Object(et.jsxs)("span",{className:"".concat(Lt.a.orderId," text text_type_digits-default"),children:["#",o.number]}),Object(et.jsx)("div",{className:"text text_type_main-medium",children:o.name}),o.status&&Object(et.jsx)("span",{className:"mt-2 mb-3 text text_type_main-default\n          ".concat("done"===o.status?Lt.a.done:null),children:zt(o.status)}),Object(et.jsx)("span",{className:"".concat(Lt.a.orderStatus," text text_type_main-default"),children:o.orderStatus}),Object(et.jsx)("span",{className:"text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(et.jsx)("div",{className:"".concat(Lt.a.contains),children:Object(et.jsx)("ul",{children:o.ingredients.map((function(e){return m[e]&&Object(et.jsxs)("li",{className:"pr-3 pt-1 pb-1",children:[Object(et.jsxs)("div",{className:"".concat(Lt.a.ingredientTitle),children:[Object(et.jsx)(Vn,{src:m[e].image_mobile,alt:m[e].name}),Object(et.jsx)("span",{className:"text text_type_main-default ml-2",children:m[e].name})]}),Object(et.jsxs)("span",{className:"ml-3 text text_type_digits-default ".concat(Lt.a.cost),children:[m[e].price,Object(et.jsx)(b.CurrencyIcon,{type:"primary"})]})]},Object(te.a)())}))})}),Object(et.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(et.jsx)("div",{className:"text text_type_main-default ".concat(Lt.a.inactive),children:Object(Rt.a)(new Date(o.createdAt),new Date,{locale:Dt.a})}),Object(et.jsxs)("span",{className:"ml-3 text text_type_digits-default ".concat(Lt.a.cost),children:[_,Object(et.jsx)(b.CurrencyIcon,{type:"primary"})]})]})]})},Ft=n(119),Mt=n.n(Ft),Gt=function(e){var t=e.onClose;return Object(et.jsx)(In,{onClose:t,children:Object(et.jsx)("div",{className:Mt.a.container,children:Object(et.jsx)(Pt,{})})})},Bt=n(40),Wt=n.n(Bt),Ht=n(86),Jt=function(e){var t,n=e.user,r=void 0===n?{email:"",name:""}:n,c=e.fetchUserLogoutAction,s=Object(O.d)(),o=Ve(),d=Object(i.a)(o,2),l=d[0].isUserUpdates,u=d[1].fetchUserUpdateAction,j=ze(),m=Object(i.a)(j,1)[0],_=m.historyData,f=m.wsConnected,g=_.orders,x=L(),h=Object(i.a)(x,2),v=h[0].ingredients,y=h[1].fetchIngredientsAction,N=Object(a.useMemo)((function(){return Ht.keyBy(v,"_id")}),[v]),E=Object(a.useState)(r.name),S=Object(i.a)(E,2),I=S[0],C=S[1],T=Object(a.useState)(r.email),w=Object(i.a)(T,2),k=w[0],R=w[1],D=Object(a.useState)(""),A=Object(i.a)(D,2),U=A[0],P=A[1],F=Object(Xe.g)(),M=F.pathname,G=function(e){e.preventDefault(),s(u({name:I,email:k,password:U})),P("")},B=Object(Xe.i)().path;return Object(a.useEffect)((function(){s({type:ut}),0===v.length&&s(y());var e=setInterval((function(){s({type:gt})}),1e4);return function(){clearInterval(e),s({type:bt})}}),[]),l?Object(et.jsx)(fn,{}):Object(et.jsxs)("div",{className:"".concat(Wt.a.container," ").concat(M.indexOf("".concat(B,"/orders/"))>=0?Wt.a.noMargin:null),children:[Object(et.jsxs)("nav",{className:"".concat(Wt.a.navigation," ").concat(M.indexOf("".concat(B,"/orders/"))>=0?Wt.a.hide:null),children:[Object(et.jsxs)("ul",{children:[Object(et.jsx)("li",{className:"text text_type_main-medium",children:Object(et.jsx)(cn,{isNavLink:!0,to:"/profile",active:"/profile"===M,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(et.jsx)("li",{className:"text text_type_main-medium",children:Object(et.jsx)(cn,{isNavLink:!0,to:"/profile/orders",active:"/profile/orders"===M,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(et.jsx)("li",{className:"text text_type_main-medium",children:Object(et.jsx)(cn,{isNavLink:!0,to:"/",onClick:function(){c&&s(c())},children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(et.jsx)("div",{className:"".concat(Wt.a.description," text text_type_main-default"),children:(t=M,{"/profile":"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435","/profile/orders":"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}[t]||"")})]}),Object(et.jsx)(Xe.b,{exact:!0,path:B,render:function(){return Object(et.jsxs)("form",{onSubmit:G,children:[Object(et.jsx)("div",{className:"mb-3",children:Object(et.jsx)(b.Input,{placeholder:"\u0418\u043c\u044f",value:I,onChange:function(e){return C(e.target.value)}})}),Object(et.jsx)("div",{className:"mb-3",children:Object(et.jsx)(b.EmailInput,{name:"email",value:k,onChange:function(e){return R(e.target.value)}})}),Object(et.jsx)("div",{className:"mb-3",children:Object(et.jsx)(b.PasswordInput,{name:"password",value:U,onChange:function(e){return P(e.target.value)}})}),Object(et.jsx)("div",{className:"mb-5",children:Object(et.jsx)(b.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})}}),Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(B,"/orders"),children:Object(et.jsx)("div",{className:"".concat(Wt.a.orderList," pr-1"),children:f&&g&&g.map((function(e){return N&&Object(et.jsx)(zn,Object(p.a)({changeLocation:function(e){var t=e.number;Ke.push({pathname:"".concat(B,"/orders/").concat(t),state:{background:F}})},showStatus:!0,ingredientsMap:N},e),Object(te.a)())}))})}),Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(B,"/orders/:id"),children:Object(et.jsx)(Pt,{})})]})},Vt=function(){return Object(et.jsx)("div",{className:"text text_type_main-large",children:"\u041e\u0448\u0438\u0431\u043a\u0430 404! \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430!"})},Yt="/react-burger";function Zt(){var e=Object(Xe.g)(),t=e.state&&e.state.background;return Object(a.useEffect)((function(){Ke.replace(Object(p.a)(Object(p.a)({},Ke.location),{},{state:null}))}),[]),Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)(Xe.d,{location:t||e,children:[Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(Yt,"/"),render:function(){return Object(et.jsx)(tt,{})}}),Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(Yt,"/ingredients/:id"),render:function(){return Object(et.jsx)(wt,{})}}),Object(et.jsx)(Qn,{exact:!0,path:"".concat(Yt,"/login"),children:Object(et.jsx)(rt,{})}),Object(et.jsx)(Qn,{exact:!0,path:"".concat(Yt,"/register"),children:Object(et.jsx)(it,{})}),Object(et.jsx)(Qn,{exact:!0,path:"".concat(Yt,"/forgot-password"),children:Object(et.jsx)(Nt,{})}),Object(et.jsx)(Qn,{exact:!0,path:"".concat(Yt,"/reset-password"),children:Object(et.jsx)(It,{})}),Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(Yt,"/feed"),render:function(){return Object(et.jsx)(ht,{})}}),Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(Yt,"/feed/:id"),render:function(){return Object(et.jsx)(Pt,{})}}),Object(et.jsx)(Kn,{path:"".concat(Yt,"/profile"),children:Object(et.jsx)(Jt,{})}),Object(et.jsx)(Xe.b,{path:"".concat(Yt,"/"),render:function(){return Object(et.jsx)(Vt,{})}})]}),t&&Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(Yt,"/feed/:id"),render:function(){return Object(et.jsx)(Gt,{onClose:Ke.goBack})}}),t&&Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(Yt,"/profile/orders/:id"),children:Object(et.jsx)(Gt,{onClose:Ke.goBack})}),t&&Object(et.jsx)(Xe.b,{exact:!0,path:"".concat(Yt,"/ingredients/:id"),children:Object(et.jsx)(kt,{caption:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:Ke.goBack})})]})}var zt=function(e){return{done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",created:"\u0421\u043e\u0437\u0434\u0430\u043d"}[e]||e},qt=function(){var e=ee(),t=Object(i.a)(e,1)[0].totalCost;return Object(et.jsx)("footer",{children:Object(et.jsxs)("div",{className:"text text_type_main-default mb-2 mt-2 ".concat(j.a.container),children:[Object(et.jsxs)("div",{className:"".concat(j.a.footer),"data-testid":"price",children:[t,Object(et.jsx)(b.CurrencyIcon,{type:"primary"})]}),Object(et.jsx)(b.Button,{size:"small",children:Object(et.jsx)("div",{className:"text text_type_main-default",children:"\u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})})},Kt=n(38),Xt=n.n(Kt),Qt=n(120),$t=n.n(Qt),en=function(e){var t=e.icon,n=e.caption,a=e.className;return Object(et.jsxs)("div",{className:"ml-3 mt-2 mr-3 mb-2 ".concat($t.a.container," ").concat(a),children:[t,Object(et.jsx)("span",{className:"text text_type_main-default ml-1",children:n})]})},tn=n(13),nn=n(121),an=n(64),rn=n.n(an),cn=function(e){var t=e.isHashLink,n=e.to,a=e.children,r=e.active,c=void 0!==r&&r,s=e.isNavLink,i=void 0!==s&&s,o=e.onClick,d=c?rn.a.active:i?rn.a.navLink:rn.a.link;return Object(et.jsx)("div",{onClick:o,children:t?Object(et.jsx)(nn.a,{to:n,className:d,children:a}):Object(et.jsx)(tn.a,{to:n,className:d,children:a})})},sn=function(){var e=Object(Xe.g)().pathname;return Object(et.jsxs)("header",{className:"".concat(Xt.a.container),children:[Object(et.jsx)("nav",{children:Object(et.jsxs)("ul",{className:Xt.a.navigation,children:[Object(et.jsx)("li",{children:Object(et.jsx)(cn,{isNavLink:!0,to:"/",active:"/"===e||e.indexOf("/ingredients/")>=0,children:Object(et.jsx)(en,{icon:Object(et.jsx)(b.BurgerIcon,{type:"/"===e||e.indexOf("/ingredients/")>=0?"primary":"secondary"}),caption:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})})}),Object(et.jsx)("li",{children:Object(et.jsx)(cn,{isNavLink:!0,to:"/feed",active:e.indexOf("/feed")>=0,children:Object(et.jsx)(en,{icon:Object(et.jsx)(b.ListIcon,{type:e.indexOf("/feed")>=0?"primary":"secondary"}),caption:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})})]})}),Object(et.jsx)("span",{className:Xt.a.logo,children:Object(et.jsx)(b.Logo,{})}),Object(et.jsx)(cn,{isNavLink:!0,to:"/profile",active:e.indexOf("/profile")>=0,children:Object(et.jsx)(en,{className:Xt.a.account,icon:Object(et.jsx)(b.ProfileIcon,{type:e.indexOf("/profile")>=0?"primary":"secondary"}),caption:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})}),Object(et.jsx)("div",{className:Xt.a.menuIcon,onClick:function(e){var t=e.target,n=t.childNodes[0];n.style&&(t.style.position="relative",n.style.display="flex")},children:Object(et.jsx)("div",{className:"pt-2 pb-2 pl-1 pr-1 ".concat(Xt.a.menu),children:Object(et.jsxs)("div",{className:"text text_type_main-medium ".concat(Xt.a.menuHeader),children:["\u041c\u0435\u043d\u044e",Object(et.jsx)(b.CloseIcon,{type:"primary"})]})})})]})},on=n(122),dn=n.n(on),ln=n(123),un=n.n(ln),jn=function(e){var t=e.onClick;return Object(et.jsx)("div",{className:un.a.overlay,onClick:function(e){e.stopPropagation(),t&&t()}})},bn=n(30),pn=n(124),On=n.n(pn),mn=["isLoading","className"],_n=function(e){var t=e.isLoading,n=void 0!==t&&t,a=e.className,r=Object(bn.a)(e,mn);return n?Object(et.jsx)("div",Object(p.a)({className:"".concat(a||""," ").concat(On.a.loader)},r)):null},fn=function(){return Object(et.jsxs)("div",{className:dn.a.spinner,children:[Object(et.jsx)(_n,{isLoading:!0}),Object(et.jsx)(jn,{onClick:function(){}})]})},gn=n(222),xn=n(65),hn=n.n(xn),vn=n(66),yn=n.n(vn),Nn=n(45),En=n.n(Nn),Sn=document.getElementById("modals"),In=function(e){var t=e.caption,n=e.children,r=e.onClose;return Object(a.useEffect)((function(){var e=function(e){"Escape"===e.key&&r()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[r]),s.a.createPortal(Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("div",{onClick:function(e){e.stopPropagation()},className:En.a.container,children:Object(et.jsxs)("div",{className:"pl-10 pt-10 pr-10 pb-10 ".concat(En.a.modal),children:[Object(et.jsxs)("div",{className:En.a.modalHeader,children:[Object(et.jsx)("span",{className:"text text_type_main-large",children:t}),Object(et.jsx)("button",{className:En.a.closeButton,onClick:function(e){e.stopPropagation(),r&&r()},children:Object(et.jsx)(b.CloseIcon,{type:"primary"})})]}),Object(et.jsx)("div",{className:En.a.modalContent,children:n})]})}),Object(et.jsx)(jn,{onClick:r})]}),Sn)},Cn=n.p+"static/media/done.05f77629.svg",Tn=function(e){var t=e.onClose,n=e.orderId;return Object(et.jsx)(In,{onClose:t,children:Object(et.jsxs)("div",{className:yn.a.content,children:[Object(et.jsx)("span",{className:"text text_type_digits-large mb-4 ".concat(yn.a.orderId),children:n}),Object(et.jsx)("span",{className:"text text_type_main-medium mb-5",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(et.jsx)("img",{className:"mt-5 mb-5",src:Cn,alt:"done"}),Object(et.jsx)("span",{className:"mt-5 mb-1 text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(et.jsx)("span",{className:"text text_type_main-default ".concat(yn.a.waiting),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},wn=n(221),kn=n(95),Rn=n.n(kn),Dn=function(e){var t=e.handleClose,n=e.price,a=e.text,r=e.thumbnail,c=e.isFirst,s=void 0!==c&&c,o=e.isLast,d=void 0!==o&&o,l=e.draggable,u=void 0!==l&&l,j=e.id,p=e.index,m=e.className,_=Object(O.d)(),f=be(),g=Object(i.a)(f,2)[1].dropConstructorItemAction,x=Object(wn.a)({type:"constructor-element",item:{dragId:j,dragIndex:p},collect:function(e){return{isDrag:e.isDragging()}}}),h=Object(i.a)(x,2),v=h[0].isDrag,y=h[1],N=Object(gn.a)({accept:"constructor-element",drop:function(e){!function(e){var t=e.dragIndex,n=e.replaceToIndex;_(g({dragIndex:t,replaceToIndex:n}))}({dragIndex:e.dragIndex,replaceToIndex:p})},collect:function(e){return{isHover:e.isOver()}}}),E=Object(i.a)(N,2),S=E[0].isHover,I=E[1];return Object(et.jsx)("div",{ref:u?I:null,"data-test-id":"constructor-element",children:Object(et.jsxs)("div",{ref:u?y:null,"data-testid":"constructor-element-".concat(j),"data-ishover":String(S),"data-isdrag":String(v),"data-isdraggable":String(u),className:"text text_type_main-default ".concat(Rn.a.ingredientWrapper," ").concat(m),children:[Object(et.jsx)("div",{"data-edge":String(!u),className:"mr-2 ".concat(Rn.a.dragHandle),children:Object(et.jsx)(b.DragIcon,{type:"primary"})}),Object(et.jsx)(b.ConstructorElement,{type:s?"top":d?"bottom":void 0,isLocked:s||d,handleClose:t,price:n,text:a,thumbnail:r})]})})},An=function(e){var t=e.removeIngredient,n=e.addIngredient,r=Object(O.d)(),c=Object(a.useRef)(null),s=ee(),o=Object(i.a)(s,2),d=o[0],l=d.totalCost,u=d.orderId,j=d.isShowOrderDetails,p=d.errorMessage,m=o[1],_=m.fetchDataOrderAction,f=m.closeOrderDetailsAction,g=m.resetTotalCostAction,x=be(),h=Object(i.a)(x,2),v=h[0],y=v.constructorIngredients,N=v.showDropLocation,E=h[1].resetConstructorAction,S=L(),I=Object(i.a)(S,2)[1].fetchIngredientsAction,C=Ve(),T=Object(i.a)(C,1)[0].user,w=Object(gn.a)({accept:"ingredient-constructor",drop:function(e){n(e.ingredient)},collect:function(e){return{isHover:e.isOver()}}}),k=Object(i.a)(w,2),R=k[0].isHover,D=k[1],A=y.find((function(e){return"bun"===e.type})),U=Object(a.useCallback)((function(){r(E()),r(g()),r(f()),r(I())}),[f,E,I,g,r]);return Object(a.useEffect)((function(){p&&alert("\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(p))}),[p]),Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)("section",{"data-testid":"constructor-drop-location","data-ishover":String(R||N),className:"pl-4 text text_type_main-medium text_color_inactive ".concat(hn.a.container),ref:D,children:[Object(et.jsxs)("div",{className:"mb-3 pr-1",children:[A&&Object(et.jsx)(Dn,{className:"mb-2",isFirst:!0,id:A._id,price:A.price,text:"".concat(A.name," (\u0432\u0435\u0440\u0445)"),thumbnail:A.image_mobile}),Object(et.jsx)("div",{className:"".concat(hn.a.tableWrapper),ref:c,children:y.filter((function(e){return"bun"!==e.type})).map((function(e,n,a){return Object(et.jsx)(Dn,{draggable:!0,index:n,id:e._id,className:a.length-1!==n?"mb-2":"",handleClose:function(){return t(n+1)},price:e.price,text:"".concat(e.name),thumbnail:e.image_mobile},"".concat(e.constructorId))}))}),A&&Object(et.jsx)(Dn,{className:"mt-2",id:A._id,isLast:!0,price:A.price,text:"".concat(A.name," (\u043d\u0438\u0437)"),thumbnail:A.image_mobile})]}),y.length>0&&Object(et.jsx)("div",{children:Object(et.jsxs)("div",{className:"mt-1 ".concat(hn.a.footer),children:[l,Object(et.jsx)(b.CurrencyIcon,{type:"primary"}),Object(et.jsx)("div",{onClick:function(){T?r(_(y.map((function(e){return e._id})))):Ke.push({pathname:"/login"})},children:Object(et.jsx)(b.Button,{children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})})]}),j&&Object(et.jsx)(Tn,{onClose:U,orderId:u})]})},Ln=n(67),Un=n.n(Ln),Pn=["_id","image","price","name","count","addToConstructor"],Fn=function(e){var t=e._id,n=e.image,r=e.price,c=e.name,s=e.count,o=void 0===s?0:s,d=e.addToConstructor,l=Object(bn.a)(e,Pn),u=Object(O.d)(),j=Object(Xe.g)(),m=be(),_=Object(i.a)(m,2)[1].toggleDropLoactionAction,f=Object(wn.a)({type:"ingredient-constructor",item:{ingredient:Object(p.a)({_id:t,image:n,price:r,name:c,count:o},l)},collect:function(e){return{isDrag:e.isDragging(),didDrop:e.didDrop()}}}),g=Object(i.a)(f,2),x=g[0],h=x.isDrag,v=x.didDrop,y=g[1];return Object(a.useEffect)((function(){(h||!v&&!h)&&u(_(h))}),[_,h,v,u]),Object(et.jsx)(et.Fragment,{children:Object(et.jsxs)("div",{"data-testid":"ingredient-".concat(t),ref:y,onClick:function(e){var n=e.target;"P"===n.tagName||n.children[0]&&"P"===n.children[0].tagName||Ke.push({pathname:"/ingredients/".concat(t),state:{background:j}})},className:"mb-4 ".concat(Un.a.ingredient),children:[o>=0&&Object(et.jsx)("span",{"data-testid":"counter",className:Un.a.counter,onClick:function(){return d&&d()},children:Object(et.jsx)(b.Counter,{count:o})}),Object(et.jsx)("img",{className:"pl-2 pr-2 mb-1",src:n,alt:n}),Object(et.jsxs)("div",{className:"mb-1 ".concat(Un.a.cost),children:[r,Object(et.jsx)(b.CurrencyIcon,{type:"primary"})]}),Object(et.jsx)("div",{className:"text text_type_main-default pb-3",children:c})]})})},Mn=n(28),Gn=n(54),Bn=n.n(Gn),Wn=function(e){var t=e.addIngredient,n=Object(a.useState)(""),c=Object(i.a)(n,2),s=c[0],o=c[1],d=Object(a.useState)([]),l=Object(i.a)(d,2),u=l[0],j=l[1],O=L(),m=Object(i.a)(O,1)[0],_=m.ingredients,f=m.isIngredientsLoading;Object(a.useEffect)((function(){var e=function(e){return Object(Mn.a)(_.filter((function(t){return t.type===e})))};j([{key:"bun",data:e("bun")},{key:"sauce",data:e("sauce")},{key:"main",data:e("main")}])}),[_]);return Object(et.jsxs)("section",{className:Bn.a.container,children:[Object(et.jsx)("div",{className:"mb-1 text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(et.jsxs)("ul",{className:"mb-3 ".concat(Bn.a.tabs),children:[Object(et.jsx)("li",{children:Object(et.jsx)(cn,{isHashLink:!0,to:"#bun",children:Object(et.jsx)(b.Tab,{value:"bun",active:"bun"===s,onClick:function(){return o("bun")},children:"\u0411\u0443\u043b\u043a\u0438"})})}),Object(et.jsx)("li",{children:Object(et.jsx)(cn,{isHashLink:!0,to:"#sauce",children:Object(et.jsx)(b.Tab,{value:"sauce",active:"sauce"===s,onClick:function(){return o("sauce")},children:"\u0421\u043e\u0443\u0441\u044b"})})}),Object(et.jsx)("li",{children:Object(et.jsx)(cn,{isHashLink:!0,to:"#main",children:Object(et.jsx)(b.Tab,{value:"main",active:"main"===s,onClick:function(){return o("main")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})})]}),Object(et.jsx)(_n,{isLoading:f}),Object(et.jsx)("div",{className:"pr-1 ".concat(Bn.a.tableWrapper),onScroll:function(e){var t=e.target.getBoundingClientRect().y;if(document.getElementById("bun")||document.getElementById("sauce")||document.getElementById("main")){var n=document.getElementById("bun").getBoundingClientRect().y-t,a=document.getElementById("sauce").getBoundingClientRect().y-t,r=document.getElementById("main").getBoundingClientRect().y-t;o(r<=24?"main":a<=24?"sauce":n<=24?"bun":"")}},children:_.length>0&&u.map((function(e,n){return Object(et.jsxs)(r.a.Fragment,{children:[Object(et.jsx)("div",{id:e.key,className:"text text_type_main-medium mb-3",children:(a=e.key,{bun:"\u0411\u0443\u043b\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}[a])}),Object(et.jsx)("div",{className:Bn.a.table,children:e.data.map((function(e){var n=e._id;return Object(et.jsx)("div",{children:Object(et.jsx)("div",{children:Object(et.jsx)(Fn,Object(p.a)(Object(p.a)({},e),{},{addToConstructor:function(){return function(e){t(e)}(e)}}))})},n)}))})]},n);var a}))})]})},Hn=n(96),Jn=n.n(Hn),Vn=function(e){var t=e.src,n=e.alt,a=e.count;return Object(et.jsx)("div",{"data-count":a,className:"text text_type_digits-default ".concat(Jn.a.ingredientIconBorder),children:Object(et.jsx)("img",{className:Jn.a.ingredientIcon,src:t,alt:n})})},Yn=n(41),Zn=n.n(Yn),zn=function(e){var t=e.createdAt,n=e.name,r=e.status,c=e.showStatus,s=void 0===c||c,i=e.ingredients,o=e.changeLocation,d=e.ingredientsMap,l=void 0===d?{}:d,u=e.number,j=Object(a.useCallback)((function(){o({number:u})}),[o,u]),p=Object(a.useMemo)((function(){return i.reduce((function(e,t){return e+(l[t]?Number(l[t].price):0)}),0)}),[l,i]);return Object(et.jsxs)("div",{className:"mb-4 p-6 ".concat(Zn.a.wrapper),onClick:j,children:[Object(et.jsxs)("div",{className:"".concat(Zn.a.orderTitle),children:[Object(et.jsx)("span",{className:"text text_type_digits-default",children:"#".concat(u)}),Object(et.jsx)("span",{className:"text text_type_main-default ".concat(Zn.a.inactive),children:Object(Rt.a)(new Date(t),new Date,{locale:Dt.a})})]}),Object(et.jsx)("span",{className:"mt-3 text text_type_main-medium",children:n}),s&&r&&Object(et.jsx)("span",{className:"mt-2 mb-3 text text_type_main-default\n          ".concat("done"===r?Zn.a.done:null),children:zt(r)}),Object(et.jsxs)("div",{className:"mt-3 ".concat(Zn.a.ingredients),children:[Object(et.jsx)("div",{children:i.map((function(e,t){return t<=5?Object(et.jsx)(Vn,{count:5===t?"+".concat(i.length-5):void 0,src:l[e]&&l[e].image_mobile,alt:e},Object(te.a)()):null}))}),Object(et.jsxs)("span",{className:"ml-3 text text_type_digits-default ".concat(Zn.a.cost),children:[p,Object(et.jsx)(b.CurrencyIcon,{type:"primary"})]})]})]})},qn=["children"],Kn=function(e){var t=e.children,n=Object(bn.a)(e,qn),c=Object(O.d)(),s=Object(Xe.g)(),o=Ve(),d=Object(i.a)(o,2),l=d[0],u=l.user,j=l.isUserLoaded,b=d[1],m=b.fetchGetUserAction,_=b.fetchUserLogoutAction;return Object(a.useEffect)((function(){c(m())}),[]),j?Object(et.jsx)(Xe.b,Object(p.a)(Object(p.a)({},n),{},{render:function(){return u?r.a.cloneElement(t,{user:u,fetchUserLogoutAction:_}):Object(et.jsx)(Xe.a,{to:{pathname:"/login",state:{from:s}}})}})):Object(et.jsx)(_n,{isLoading:!0})},Xn=["children"],Qn=function(e){var t=e.children,n=Object(bn.a)(e,Xn),r=Object(O.d)(),c=Object(Xe.g)(),s=Ve(),o=Object(i.a)(s,2),d=o[0],l=d.user,u=d.isUserLoaded,j=o[1].fetchGetUserAction;return Object(a.useEffect)((function(){r(j())}),[]),u?Object(et.jsx)(Xe.b,Object(p.a)(Object(p.a)({},n),{},{render:function(){var e,n,a,r;return l?Object(et.jsx)(Xe.a,{to:{pathname:(null===(e=c.state)||void 0===e||null===(n=e.from)||void 0===n?void 0:n.pathname)?null===(a=c.state)||void 0===a||null===(r=a.from)||void 0===r?void 0:r.pathname:"/"}}):t}})):Object(et.jsx)(_n,{isLoading:!0})},$n=function(){var e=ee(),t=Object(i.a)(e,1)[0].isSendingDataOrder;return Object(et.jsx)(et.Fragment,{children:Object(et.jsxs)(o.a,{history:Ke,children:[Object(et.jsx)(sn,{}),Object(et.jsx)("main",{className:"pb-5 ".concat(l.a.mainContainer),children:Object(et.jsx)(Zt,{})}),Object(et.jsx)(qt,{}),t&&Object(et.jsx)(fn,{})]})})},ea=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,224)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},ta=n(32),na=n(116),aa=n(97),ra={ingredients:[],isIngredientsLoading:!1,errorMessage:null,showIngredientDetails:!1,ingredientDetails:{}},ca={totalCost:0,isSendingDataOrder:!1,orderId:null,isShowOrderDetails:!1,errorMessage:null,order:null,isOrderLoading:!0},sa={constructorIngredients:[],showDropLocation:!1},ia=function(e,t,n){if(n>=e.length)for(var a=n-e.length+1;a--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},oa=n(29),da={name:"",email:"",password:""},la={email:"",password:""},ua={email:""},ja={password:"",token:""},ba={accessToken:null,refreshToken:null,user:null,userActionPending:!1,isUserLoaded:!1,isUserUpdates:!1},pa={wsConnected:!1,feedData:{orders:[],total:0,totalToday:0},historyData:{orders:[],total:0,totalToday:0}},Oa=Object(ta.combineReducers)({router:Object(o.b)(Ke),ingredientsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(p.a)(Object(p.a)({},e),{},{isIngredientsLoading:!0,ingredients:[],errorMessage:null});case x:case v:return Object(p.a)(Object(p.a)({},e),{},{ingredients:t.payload.ingredients||[],isIngredientsLoading:!1});case h:return Object(p.a)(Object(p.a)({},e),{},{isIngredientsLoading:!1,errorMessage:t.payload.errorMessage,ingredients:[]});case y:return Object(p.a)(Object(p.a)({},e),{},{ingredients:Object(Mn.a)(e.ingredients.map((function(e){return e._id===t.payload.id&&(e.count=Number(e.count||0)+1),e})))});case N:return Object(p.a)(Object(p.a)({},e),{},{ingredients:Object(Mn.a)(e.ingredients.map((function(e){return e._id===t.payload.id&&(e.count=Number(e.count||0)-1),e})))});case E:return Object(p.a)(Object(p.a)({},e),{},{showIngredientDetails:!0,ingredientDetails:t.payload.details});case S:return Object(p.a)(Object(p.a)({},e),{},{showIngredientDetails:!1,ingredientDetails:{}});default:return Object(p.a)({},e)}},orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(p.a)(Object(p.a)({},e),{},{totalCost:e.totalCost+t.payload.amount});case P:return Object(p.a)(Object(p.a)({},e),{},{totalCost:e.totalCost-t.payload.amount});case F:return Object(p.a)(Object(p.a)({},e),{},{totalCost:0});case M:return Object(p.a)(Object(p.a)({},e),{},{isSendingDataOrder:!0,errorMessage:null});case G:return Object(p.a)(Object(p.a)({},e),{},{isSendingDataOrder:!1,orderId:t.payload.orderId});case B:return Object(p.a)(Object(p.a)({},e),{},{isSendingDataOrder:!1,errorMessage:t.payload.errorMessage,orderId:null});case W:return Object(p.a)(Object(p.a)({},e),{},{isShowOrderDetails:!0});case H:return Object(p.a)(Object(p.a)({},e),{},{isShowOrderDetails:!1});case J:return Object(p.a)(Object(p.a)({},e),{},{isOrderLoading:!0});case V:return Object(p.a)(Object(p.a)({},e),{},{order:t.payload,isOrderLoading:!1});case Y:return Object(p.a)(Object(p.a)({},e),{},{order:null,isOrderLoading:!1});default:return Object(p.a)({},e)}},constructorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1?arguments[1]:void 0,n=Object(Mn.a)(e.constructorIngredients);switch(t.type){case ne:return n.splice(t.payload.index,0,t.payload.item),Object(p.a)(Object(p.a)({},e),{},{constructorIngredients:n});case ae:return n.splice(t.payload.index,1),Object(p.a)(Object(p.a)({},e),{},{constructorIngredients:n});case re:var a=t.payload,r=a.dragIndex,c=a.replaceToIndex;return r===c?Object(p.a)({},e):Object(p.a)(Object(p.a)({},e),{},{constructorIngredients:ia(Object(Mn.a)(e.constructorIngredients),r+1,c+1)});case ce:return Object(p.a)(Object(p.a)({},e),{},{constructorIngredients:sa.constructorIngredients});case se:return Object(p.a)(Object(p.a)({},e),{},{showDropLocation:!0});case ie:return Object(p.a)(Object(p.a)({},e),{},{showDropLocation:!1});default:return Object(p.a)({},e)}},registerFormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(p.a)(Object(p.a)({},e),{},Object(oa.a)({},t.field,t.value));default:return e}},loginFormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(p.a)(Object(p.a)({},e),{},Object(oa.a)({},t.field,t.value));default:return e}},forgotPasswordFormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ua,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fe:return Object(p.a)(Object(p.a)({},e),{},Object(oa.a)({},t.field,t.value));default:return e}},resetPasswordFormReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(p.a)(Object(p.a)({},e),{},Object(oa.a)({},t.field,t.value));default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:case Ee:return Object(p.a)(Object(p.a)({},e),{},{userActionPending:!0});case ye:case Se:return Object(p.a)(Object(p.a)({},e),{},{userActionPending:!1,accessToken:t.payload.accessToken,refreshToken:t.payload.refreshToken,token:t.payload.token,user:t.payload.user});case Re:return Object(p.a)(Object(p.a)({},e),{},{accessToken:t.payload.accessToken,refreshToken:t.payload.refreshToken,token:t.payload.token});case Ce:return Object(p.a)(Object(p.a)({},e),{},{accessToken:null,refreshToken:null,user:null});case Ne:case Ie:case De:return Object(p.a)(Object(p.a)({},e),{},{userActionPending:!1,errorMessage:t.payload.errorMessage});case Te:return Object(p.a)(Object(p.a)({},e),{},{isUserUpdates:!0});case ke:return Object(p.a)(Object(p.a)({},e),{},{isUserUpdates:!1});case we:return Object(p.a)(Object(p.a)({},e),{},{user:t.payload.user,isUserUpdates:!1});case Ae:return Object(p.a)(Object(p.a)({},e),{},{user:t.payload.user,token:t.payload.token,isUserLoaded:!0});case Le:return Object(p.a)(Object(p.a)({},e),{},{isUserLoaded:!0});default:return Object(p.a)({},e)}},wsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pt:return Object(p.a)(Object(p.a)({},e),{},{wsConnected:!0});case Ot:case mt:return Object(p.a)(Object(p.a)({},e),{},{wsConnected:!1});case _t:return Object(p.a)(Object(p.a)({},e),{},{feedData:t.payload});case ft:return Object(p.a)(Object(p.a)({},e),{},{historyData:t.payload});default:return e}}}),ma=["success"],_a=function(e,t,n){return function(a){var r=null;return function(c){return function(s){var i=a.dispatch,o=a.getState,d=s.type,l=s.payload,u=t.wsInit,j=t.wsInitUser,b=t.wsSendMessage,O=t.onOpen,m=t.onClose,_=t.onError,f=t.onGetFeedOrders,g=t.onGetHistoryOrders,x=t.wsEnd,h=t.wsEndUser,v=t.wsPing,y=o().userReducer.token;if(d!==u||n||(r=new WebSocket("".concat(e))),d===j&&y&&n&&(r=new WebSocket("".concat(e,"?token=").concat(y))),r){if(r.onopen=function(e){i({type:O,payload:e})},r.onerror=function(e){i({type:_,payload:e})},r.onmessage=function(e){var t=e.data,a=JSON.parse(t),r=(a.success,Object(bn.a)(a,ma));i(n?{type:g,payload:r}:{type:f,payload:r})},r.onclose=function(e){i({type:m,payload:e})},d===b&&y){var N=Object(p.a)(Object(p.a)({},l),{},{token:y});r.send(JSON.stringify(N))}d===v&&r.send("pong"),d!==x&&d!==h||(r.close(),r=null)}c(s)}}}},fa=(n(127),n(213).createLogger),ga={wsInit:lt,wsInitUser:ut,wsEnd:jt,wsEndUser:bt,wsSendMessage:"WS_SEND_MESSAGE",onOpen:pt,onClose:mt,onError:Ot,onGetFeedOrders:_t,onGetHistoryOrders:ft,wsPing:gt},xa=_a("wss://norma.nomoreparties.space/orders/all",ga),ha=_a("wss://norma.nomoreparties.space/orders",ga,!0),va=Object(na.a)(Ke),ya=(fa({collapsed:!0}),function(){return[va,aa.a,xa,ha]}),Na=Object(ta.compose)(ta.applyMiddleware.apply(void 0,Object(Mn.a)(ya()))),Ea=Object(ta.createStore)(Oa,Na);s.a.render(Object(et.jsx)(O.a,{store:Ea,children:Object(et.jsx)($n,{})}),document.getElementById("root")),ea()},33:function(e,t,n){e.exports={container:"feed_container__3aLtn",feedContainer:"feed_feedContainer__trarY",feedList:"feed_feedList__1_fBk",stats:"feed_stats__1nEi_",table:"feed_table__2jrth",readyOrders:"feed_readyOrders__2MaR-",currentOrders:"feed_currentOrders__2Mt1Q",tableNum:"feed_tableNum__2_wNc"}},34:function(e,t,n){e.exports={container:"order_container__1TkAw",orderId:"order_orderId__2T2jy",orderStatus:"order_orderStatus__3cUPn",contains:"order_contains__3jZDC",ingredientTitle:"order_ingredientTitle__1ShGc",cost:"order_cost__28uyP",inactive:"order_inactive__2hEJ2",done:"order_done__2-AA0"}},38:function(e,t,n){e.exports={container:"app-header_container__2O0Ib",navigation:"app-header_navigation__2bkYt",logo:"app-header_logo__eYd9h",menuIcon:"app-header_menuIcon__2b-Rz",menu:"app-header_menu__D5bpw",menuHeader:"app-header_menuHeader__2lHf2",account:"app-header_account__3u-Dl"}},40:function(e,t,n){e.exports={container:"profile_container__UlN7x",noMargin:"profile_noMargin__3kW2r",orderList:"profile_orderList__wADNK",label:"profile_label__2_ccL",navigation:"profile_navigation__9u9Oc",hide:"profile_hide__2ScJr",description:"profile_description__3Qjc3"}},41:function(e,t,n){e.exports={wrapper:"order-card_wrapper__12dq4",orderTitle:"order-card_orderTitle__2WjJK",inactive:"order-card_inactive__ZLpVK",ingredients:"order-card_ingredients__3qvib",cost:"order-card_cost__vDnfX",done:"order-card_done__3g8ON"}},45:function(e,t,n){e.exports={container:"modal_container__1mvwT",modal:"modal_modal__2zJQ9",modalHeader:"modal_modalHeader__-5uTM",closeButton:"modal_closeButton__2oPdr"}},54:function(e,t,n){e.exports={container:"burger-ingredients_container__5kX03",table:"burger-ingredients_table__1a0p2",tableWrapper:"burger-ingredients_tableWrapper__1lla6",tabs:"burger-ingredients_tabs__3m0Zq",ingredient:"burger-ingredients_ingredient__1SPgJ",counter:"burger-ingredients_counter__6dwXt",cost:"burger-ingredients_cost__3EigX"}},63:function(e,t,n){e.exports={container:"login_container__lZ8eo",label:"login_label__2G29w"}},64:function(e,t,n){e.exports={link:"link_link__3Rsg-",active:"link_active__2SH0e",navLink:"link_navLink__4RX6X"}},65:function(e,t,n){e.exports={container:"burger-constructor_container__1A3pt",tableWrapper:"burger-constructor_tableWrapper__jgqER",ingredientWrapper:"burger-constructor_ingredientWrapper__7QaOm",dragHandle:"burger-constructor_dragHandle__ho_58",footer:"burger-constructor_footer__J7ewR"}},66:function(e,t,n){e.exports={content:"order-details_content__fwFN_",orderId:"order-details_orderId__3HZgD",waiting:"order-details_waiting__vUWNM"}},67:function(e,t,n){e.exports={container:"burger-ingredient_container__3WAJV",table:"burger-ingredient_table__1L4hG",tableWrapper:"burger-ingredient_tableWrapper__2USyI",tabs:"burger-ingredient_tabs__1aKTu",ingredient:"burger-ingredient_ingredient__35H6G",counter:"burger-ingredient_counter__3A-U6",cost:"burger-ingredient_cost__1PuYA"}},87:function(e,t,n){e.exports={container:"app-footer_container__1217Z",footer:"app-footer_footer__sq7RA"}},90:function(e,t,n){e.exports={container:"register_container__3H2Nw",label:"register_label__2EDb-"}},93:function(e,t,n){e.exports={container:"forgot-password_container__314Fz",label:"forgot-password_label__1PA3F"}},94:function(e,t,n){e.exports={container:"reset-password_container__X5KIR",label:"reset-password_label__2Jogu"}},95:function(e,t,n){e.exports={container:"burger-constructor-element_container__2NBdA",tableWrapper:"burger-constructor-element_tableWrapper__3nkxl",ingredientWrapper:"burger-constructor-element_ingredientWrapper__ZjyzH",dragHandle:"burger-constructor-element_dragHandle__33_S7",footer:"burger-constructor-element_footer__1TLaa"}},96:function(e,t,n){e.exports={ingredientIcon:"ingredient-icon_ingredientIcon__27cXW",ingredientIconBorder:"ingredient-icon_ingredientIconBorder__1N88n"}}},[[214,1,2]]]);
//# sourceMappingURL=main.b5751181.chunk.js.map