{"version":3,"sources":["app/app.module.css","pages/order-modal/order-modal.module.css","components/navigation-item/navigation-item.module.css","components/app-spinner/app-spinner.module.css","components/modal-overlay/modal-overlay.module.css","components/spinner/spinner.module.css","pages/ingredient-details/ingredient-details.module.css","services/ingredients/action-types.ts","constants/index.ts","services/ingredients/action-creators.ts","services/ingredients/index.ts","services/order/action-types.ts","services/order/action-creators.ts","services/order/index.ts","services/constructor/action-types.ts","services/constructor/action-creators.ts","services/constructor/index.ts","services/register-form/action-types.ts","services/register-form/action-creators.ts","services/login-form/action-types.ts","services/login-form/action-creators.ts","services/forgot-password-form/action-types.ts","services/forgot-password-form/action-creators.ts","services/reset-password-form/action-types.ts","services/reset-password-form/action-creators.ts","services/user/action-types.ts","services/user/action-creators.ts","services/user/index.ts","services/websocket/index.ts","services/history.ts","pages/main/main.tsx","pages/login/login.tsx","services/login-form/index.ts","pages/register/register.tsx","services/register-form/index.ts","services/websocket/action-types.ts","pages/feed/feed.tsx","pages/forgot-password/forgot-password.tsx","services/forgot-password-form/index.ts","pages/reset-password/reset-password.tsx","services/reset-password-form/index.ts","pages/ingredient-details/ingredient-details.tsx","pages/ingredient-details-modal/ingredient-details-modal.tsx","pages/order/order.tsx","pages/order-modal/order-modal.tsx","pages/profile/profile.tsx","pages/not-found/not-found.tsx","services/routes.tsx","services/index.ts","components/app-footer/app-footer.tsx","components/navigation-item/navigation-item.tsx","components/link/link.tsx","components/app-header/app-header.tsx","components/modal-overlay/modal-overlay.tsx","components/spinner/spinner.tsx","components/app-spinner/app-spinner.tsx","components/modal/modal.tsx","images/done.svg","components/order-details/order-details.tsx","components/burger-constructor-element/burger-constructor-element.tsx","components/burger-constructor/burger-constructor.tsx","components/burger-ingredient/burger-ingredient.tsx","components/burger-ingredients/burger-ingredients.tsx","components/ingredient-icon/ingredient-icon.tsx","components/order-card/order-card.tsx","components/protected-route/protected-route.tsx","components/user-protected-route/user-protected-route.tsx","app/app.tsx","reportWebVitals.ts","services/ingredients/reducer.ts","services/order/reducer.ts","services/constructor/reducer.ts","services/register-form/reducer.ts","services/login-form/reducer.ts","services/forgot-password-form/reducer.ts","services/reset-password-form/reducer.ts","services/user/reducer.ts","services/websocket/reducer.ts","services/rootReducer.ts","services/websocket/socketMiddleWare.ts","services/store.ts","index.tsx","pages/feed/feed.module.css","pages/order/order.module.css","components/app-header/app-header.module.css","pages/profile/profile.module.css","components/order-card/order-card.module.css","components/modal/modal.module.css","components/burger-ingredients/burger-ingredients.module.css","pages/login/login.module.css","components/link/link.module.css","components/burger-constructor/burger-constructor.module.css","components/order-details/order-details.module.css","components/burger-ingredient/burger-ingredient.module.css","components/app-footer/app-footer.module.css","pages/register/register.module.css","pages/forgot-password/forgot-password.module.css","pages/reset-password/reset-password.module.css","components/burger-constructor-element/burger-constructor-element.module.css","components/ingredient-icon/ingredient-icon.module.css"],"names":["module","exports","FETCH_INGREDIENTS_PENDING","FETCH_INGREDIENTS_SUCCESS","FETCH_INGREDIENTS_FAIL","CHANGE_INGREDIENTS","INCREASE_INGREDIENT_COUNT","DECREASE_INGREDIENT_COUNT","OPEN_INGREDIENT_DETAILS","CLOSE_INGREDIENT_DETAILS","API_URL","fetchIngredientsFailAction","errorMessage","type","payload","fetchIngredientsAction","dispatch","a","fetch","then","res","ok","json","Promise","reject","status","resp","data","ingredients","catch","changeIngredientsAction","increaseCountAction","id","decreaseCountAction","openDetailsAction","details","closeDetailsAction","useIngredeints","useSelector","ingredientsReducer","isIngredientsLoading","showIngredientDetails","ingredientDetails","INCREASE_TOTALCOST","DECREASE_TOTALCOST","RESET_TOTALCOST","FETCH_DATA_ORDER_PENDING","FETCH_DATA_ORDER_SUCCESS","FETCH_DATA_ORDER_FAIL","SHOW_ORDER_DETAILS","CLOSE_ORDER_DETAILS","GET_ORDER_BY_ID_PENDING","GET_ORDER_BY_ID_SUCCESS","GET_ORDER_BY_ID_FAIL","increaseTotalCostAction","amount","decreaseTotalCostAction","resetTotalCostAction","showOrderDetailsAction","closeOrderDetailsAction","fetchDataOrderAction","orderlist","method","headers","localStorage","getItem","body","JSON","stringify","orderId","order","number","getOrderByIdAction","orders","length","getOrderByIdFailAction","useOrder","orderReducer","totalCost","isSendingDataOrder","isShowOrderDetails","isOrderLoading","ADD_TO_CONSTRUCTOR","REMOVE_FROM_CONSTRUCTOR","DROP_CONSTRUCTOR_ITEM","RESET_CONSTRUCTOR","SHOW_DROP_LOCATION","HIDE_DROP_LOCATION","addToConstructorAction","index","item","constructorId","uuidv4","removeFromConstructorAction","dropConstructorItemAction","dragIndex","replaceToIndex","resetConstructorAction","toggleDropLoactionAction","show","useConstructor","constructorReducer","constructorIngredients","showDropLocation","REGISTER_FORM_SET_VALUE","setRegisterFormValue","field","value","ActionTypes","LOGIN_FORM_SET_VALUE","setLoginFormValue","FORGOT_PASSWORD_FORM_SET_VALUE","setForgotPasswordFormValue","RESET_PASSWORD_FORM_SET_VALUE","setResetPasswordFormValue","USER_LOGIN_PENDING","USER_LOGIN_SUCCESS","USER_LOGIN_FAIL","USER_REGISTER_PENDING","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_LOGOUT_SUCCESS","USER_UPDATE_PENDING","USER_UPDATE_SUCCESS","USER_UPDATE_FAIL","USER_REFRESH_TOKEN_SUCCESS","USER_REFRESH_TOKEN_FAIL","GET_USER_SUCCESS","GET_USER_FAIL","fetchUserLoginFailAction","fetchUserLoginAction","email","password","token","accessToken","split","setItem","refreshToken","fetchUserRegisterAction","name","response","Error","String","success","fetchUserUpdateAction","fetchGetUserAction","fetchUserRefreshTokenAction","fetchUserLogoutAction","fetchUserResetPasswordRequestAction","fetchUserResetPasswordAction","useAuth","userReducer","user","userActionPending","isUserLoaded","isUserUpdates","sortByDate","b","Date","createdAt","getTime","getTotalForToday","reduce","acc","cur","date","today","getDate","getMonth","getFullYear","isToday","useWebsocket","wsReducer","feedData","sort","totalToday","historyData","wsConnected","history","createBrowserHistory","basename","process","MainPage","useDispatch","increaseTotalCost","increaseCount","addToConstructor","useEffect","alert","addIngredient","ingredient","removeIngredient","price","removedIngredient","removeFromConstructor","DndProvider","backend","HTML5Backend","Login","loginFormReducer","onFormChange","e","target","isLoading","onSubmit","preventDefault","className","loginStyles","container","onChange","label","to","Register","registerFormReducer","replace","pathname","registerStyles","placeholder","WS_CONNECTION_START","WS_CONNECTION_USER_START","WS_CONNECTION_END","WS_CONNECTION_USER_END","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_FEED_ORDERS","WS_GET_HISTORY_ORDERS","WS_SEND_PONG_MESSAGE","_","require","Feed","formatAmount","Intl","NumberFormat","minimumFractionDigits","format","location","useLocation","total","ingredientsMap","useMemo","keyBy","completedOrders","filter","inProgressOrders","pingPong","setInterval","clearInterval","feedStyles","feedContainer","feedList","map","changeLocation","push","state","background","stats","table","readyOrders","currentOrders","tableNum","ForgotPassword","forgotPasswordFormReducer","from","formSubmit","forgotPasswordStyles","ResetPassword","resetPasswordFormReducer","resetPasswordStyles","IngredientDetails","useParams","useState","setDetails","find","_id","ingredientDetailsStyles","content","src","image_large","alt","description","energy","energyItem","energyItem__caption","energyItem__value","calories","proteins","fat","carbohydrates","IngredientDetailsModal","caption","onClose","Order","Number","isEmpty","orderStyles","done","getStatusName","orderStatus","contains","ingredientTitle","image_mobile","cost","style","display","justifyContent","alignItems","inactive","formatRelative","locale","ruLocale","OrderModal","orderModalStyles","Profile","route","setName","setEmail","setPassword","path","useRouteMatch","profileStyles","indexOf","noMargin","navigation","hide","isNavLink","active","onClick","exact","render","orderList","showStatus","NotFound","MainRouter","goBack","pending","created","AppFooter","appFooterStyles","footer","data-testid","size","NavigationItem","icon","navigationItemStyles","Link","isHashLink","children","linkStyles","navLink","link","AppHeader","appHeaderStyles","logo","account","menuIcon","menu","childNodes","position","menuHeader","ModalOverlay","modalOverlayStyles","overlay","stopPropagation","Spinner","props","spinnerStyles","loader","AppSpinner","appSpinnerStyles","spinner","modalRoot","document","getElementById","Modal","close","key","window","addEventListener","removeEventListener","ReactDOM","createPortal","modalStyles","modal","modalHeader","closeButton","modalContent","OrderDetails","orderDetailsStyles","waiting","BurgerConstructorElement","handleClose","text","thumbnail","isFirst","isLast","draggable","useDrag","dragId","collect","monitor","isDrag","isDragging","dragRef","useDrop","accept","drop","onDropHandler","isHover","isOver","dropTarget","ref","data-test-id","data-ishover","data-isdrag","data-isdraggable","burgerConstructorStyles","ingredientWrapper","data-edge","dragHandle","undefined","isLocked","BurgerConstructor","myRef","useRef","bun","closeOrderDetails","useCallback","tableWrapper","addedIngredient","arr","BurgerIngredient","image","count","didDrop","tagName","burgerIngredientsStyles","counter","BurgerIngredients","currentTab","setCurrentTab","ingredientsOnTab","setIngredientsOnTab","getIngredientsByType","tabName","tabs","onScroll","targetTop","getBoundingClientRect","y","bunElTop","sauceTop","mainElTop","typedSet","i","Fragment","currentTabName","IngredientIcon","data-count","orderCardStyles","ingredientIconBorder","ingredientIcon","OrderCard","goToOrder","wrapper","orderTitle","ProtectedRoute","rest","React","cloneElement","UserProtectedRoute","App","appStyles","mainContainer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ingredientsInitialState","orderInitialState","constructorInitialState","array_move","old_index","new_index","k","splice","registerFormInitialState","loginFormInitialState","forgotPasswordFormInitialState","resetPasswordFormInitialState","userInitialState","initialState","rootReducer","combineReducers","router","connectRouter","action","socketMiddleware","wsUrl","wsActions","withAuth","store","socket","next","getState","wsInit","wsInitUser","wsSendMessage","onOpen","onError","onGetFeedOrders","onGetHistoryOrders","wsEnd","wsEndUser","wsPing","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","message","send","createLogger","socketAllOrdersMiddlware","socketHistoryOrdersMiddlware","routerMiddle","routerMiddleware","getMiddleWares","collapsed","thunk","enhancer","compose","applyMiddleware","createStore"],"mappings":"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","file":"static/js/main.b7a5dc12.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainContainer\":\"app_mainContainer__cfS9Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-modal_container__uEZZB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"navigation-item_container__1CB_z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"app-spinner_spinner__ZceSo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__3oO02\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"spinner_loader__2AI07\",\"load3\":\"spinner_load3__wUlCF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ingredient-details_content__1dsLl\",\"energy\":\"ingredient-details_energy__2qW6b\",\"energyItem\":\"ingredient-details_energyItem__2GwGm\"};","export const FETCH_INGREDIENTS_PENDING: 'FETCH_INGREDIENTS_PENDING' =\r\n  'FETCH_INGREDIENTS_PENDING';\r\nexport const FETCH_INGREDIENTS_SUCCESS: 'FETCH_INGREDIENTS_SUCCESS' =\r\n  'FETCH_INGREDIENTS_SUCCESS';\r\nexport const FETCH_INGREDIENTS_FAIL: 'FETCH_INGREDIENTS_FAIL' =\r\n  'FETCH_INGREDIENTS_FAIL';\r\nexport const CHANGE_INGREDIENTS: 'CHANGE_INGREDIENTS' =\r\n  'CHANGE_INGREDIENTS';\r\nexport const INCREASE_INGREDIENT_COUNT: 'INCREASE_INGREDIENT_COUNT' =\r\n  'INCREASE_INGREDIENT_COUNT';\r\nexport const DECREASE_INGREDIENT_COUNT: 'DECREASE_INGREDIENT_COUNT' =\r\n  'DECREASE_INGREDIENT_COUNT';\r\nexport const OPEN_INGREDIENT_DETAILS: 'OPEN_INGREDIENT_DETAILS' =\r\n  'OPEN_INGREDIENT_DETAILS';\r\nexport const CLOSE_INGREDIENT_DETAILS: 'CLOSE_INGREDIENT_DETAILS' =\r\n  'CLOSE_INGREDIENT_DETAILS';\r\n","export const API_URL = 'https://norma.nomoreparties.space/api';","\r\nimport {\r\n  FETCH_INGREDIENTS_PENDING,\r\n  FETCH_INGREDIENTS_SUCCESS,\r\n  FETCH_INGREDIENTS_FAIL,\r\n  CHANGE_INGREDIENTS,\r\n  INCREASE_INGREDIENT_COUNT,\r\n  DECREASE_INGREDIENT_COUNT,\r\n  OPEN_INGREDIENT_DETAILS,\r\n  CLOSE_INGREDIENT_DETAILS\r\n} from './action-types';\r\nimport {API_URL} from '../../constants';\r\nimport {TIngredient} from '../ingredients';\r\nimport {AppDispatch, AppThunk} from '../store';\r\nimport {\r\n  IChangeIngredientsAction,\r\n  ICloseDetailsAction,\r\n  IDecreaseCountAction,\r\n  IFetchIngredientsFailAction,\r\n  IFetchIngredientsPendingAction,\r\n  IFetchIngredientsSuccessAction,\r\n  IIncreaseCountAction,\r\n  IOpenDetailsAction\r\n} from './types';\r\n\r\nexport const fetchIngredientsPendingAction = (): IFetchIngredientsPendingAction => ({\r\n  type: FETCH_INGREDIENTS_PENDING\r\n});\r\n\r\nexport const fetchIngredientsSuccessAction = (data: TIngredient[]): IFetchIngredientsSuccessAction => ({\r\n  type: FETCH_INGREDIENTS_SUCCESS,\r\n  payload: {ingredients: data}\r\n});\r\n\r\nexport const fetchIngredientsFailAction = (errorMessage: string): IFetchIngredientsFailAction => ({\r\n  type: FETCH_INGREDIENTS_FAIL,\r\n  payload: {errorMessage}\r\n});\r\n\r\nexport const fetchIngredientsAction: AppThunk = () => async (dispatch: AppDispatch) => {\r\n  dispatch(fetchIngredientsPendingAction());\r\n  fetch(`${API_URL}/ingredients`)\r\n    .then(res => {\r\n      if (!res.ok) {\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch(fetchIngredientsSuccessAction(resp.data));\r\n    }).catch(errorMessage => {\r\n      dispatch(fetchIngredientsFailAction(errorMessage));\r\n    });\r\n};\r\n\r\nexport const changeIngredientsAction = (\r\n  ingredients: Array<TIngredient>\r\n): IChangeIngredientsAction => {\r\n return {\r\n    type: CHANGE_INGREDIENTS,\r\n    payload: {ingredients}\r\n  };  \r\n};\r\n\r\nexport const increaseCountAction = (id: string): IIncreaseCountAction => {\r\n  return {\r\n    type: INCREASE_INGREDIENT_COUNT, \r\n    payload: {id}\r\n  };  \r\n};\r\n\r\nexport const decreaseCountAction = (id: string): IDecreaseCountAction => {\r\n  return {\r\n    type: DECREASE_INGREDIENT_COUNT, \r\n    payload: {id}\r\n  };  \r\n};\r\n\r\nexport const openDetailsAction = (details: TIngredient): IOpenDetailsAction => {\r\n  return {\r\n    type: OPEN_INGREDIENT_DETAILS,\r\n    payload: {details}\r\n  };  \r\n};\r\n\r\nexport const closeDetailsAction = (): ICloseDetailsAction => {\r\n  return {type: CLOSE_INGREDIENT_DETAILS};  \r\n};\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\n\r\nimport {\r\n  fetchIngredientsAction,  \r\n  changeIngredientsAction,\r\n  increaseCountAction,\r\n  decreaseCountAction,\r\n  closeDetailsAction,\r\n  openDetailsAction\r\n} from './action-creators';\r\nimport {TIngredientsReducer} from './reducer';\r\n\r\nexport type TIngredient = {\r\n  type: \"bun\" | \"main\" | \"sauce\",\r\n  _id: string,\r\n  image_mobile: string,\r\n  image_large: string,\r\n  price: number,\r\n  name: string,\r\n  description: string,\r\n  calories: number,\r\n  proteins: number,\r\n  fat: number,\r\n  carbohydrates: number,\r\n  constructorId?: string\r\n  image?: string,\r\n  count?: number\r\n};\r\n\r\nexport type TIngredientDetails = Omit<TIngredient, 'type' | '_id' | 'price' | 'image_mobile'>;\r\n\r\nexport type TUseIngredients = [TIngredientsReducer, any];\r\n\r\nexport const useIngredeints = (): TUseIngredients => (\r\n  [\r\n    useSelector(({ingredientsReducer}: RootState) => ({\r\n      ingredients: ingredientsReducer.ingredients,\r\n      isIngredientsLoading: ingredientsReducer.isIngredientsLoading,\r\n      errorMessage: ingredientsReducer.errorMessage,\r\n      showIngredientDetails: ingredientsReducer.showIngredientDetails,\r\n      ingredientDetails: ingredientsReducer.ingredientDetails\r\n    })),\r\n    {\r\n      fetchIngredientsAction,\r\n      changeIngredientsAction,\r\n      increaseCountAction,\r\n      decreaseCountAction,\r\n      closeDetailsAction,\r\n      openDetailsAction\r\n    }\r\n  ]\r\n);","export const INCREASE_TOTALCOST: 'INCREASE_TOTALCOST' =\r\n  'INCREASE_TOTALCOST';\r\nexport const DECREASE_TOTALCOST: 'DECREASE_TOTALCOST' =\r\n  'DECREASE_TOTALCOST';\r\nexport const RESET_TOTALCOST: 'RESET_TOTALCOST' =\r\n  'RESET_TOTALCOST';\r\nexport const FETCH_DATA_ORDER_PENDING: 'FETCH_DATA_ORDER_PENDING' =\r\n  'FETCH_DATA_ORDER_PENDING';\r\nexport const FETCH_DATA_ORDER_SUCCESS: 'FETCH_DATA_ORDER_SUCCESS' =\r\n  'FETCH_DATA_ORDER_SUCCESS';\r\nexport const FETCH_DATA_ORDER_FAIL: 'FETCH_DATA_ORDER_FAIL' =\r\n  'FETCH_DATA_ORDER_FAIL';\r\nexport const SHOW_ORDER_DETAILS: 'SHOW_ORDER_DETAILS' =\r\n  'SHOW_ORDER_DETAILS';\r\nexport const CLOSE_ORDER_DETAILS: 'CLOSE_ORDER_DETAILS' =\r\n  'CLOSE_ORDER_DETAILS';\r\nexport const GET_ORDER_BY_ID_PENDING: 'GET_ORDER_BY_ID_PENDING' =\r\n  'GET_ORDER_BY_ID_PENDING';\r\nexport const GET_ORDER_BY_ID_SUCCESS: 'GET_ORDER_BY_ID_SUCCESS' =\r\n  'GET_ORDER_BY_ID_SUCCESS';\r\nexport const GET_ORDER_BY_ID_FAIL: 'GET_ORDER_BY_ID_FAIL' =\r\n  'GET_ORDER_BY_ID_FAIL';\r\n\r\n","import {\r\n  INCREASE_TOTALCOST,\r\n  DECREASE_TOTALCOST,\r\n  RESET_TOTALCOST,\r\n  FETCH_DATA_ORDER_FAIL,\r\n  FETCH_DATA_ORDER_PENDING,\r\n  FETCH_DATA_ORDER_SUCCESS,\r\n  CLOSE_ORDER_DETAILS,\r\n  SHOW_ORDER_DETAILS,\r\n  GET_ORDER_BY_ID_PENDING,\r\n  GET_ORDER_BY_ID_SUCCESS,\r\n  GET_ORDER_BY_ID_FAIL\r\n} from './action-types';\r\nimport {API_URL} from '../../constants';\r\nimport {AppDispatch, AppThunk} from '../store';\r\nimport {\r\n  ICloseOrderDetailsAction,\r\n  IDecreaseTotalCostAction,\r\n  IFetchDataOrderFailAction,\r\n  IFetchDataOrderPendingAction,\r\n  IFetchDataOrderSuccessAction,\r\n  IGetOrderByIdFailAction,\r\n  IGetOrderByIdPendingAction,\r\n  IGetOrderByIdSuccessAction,\r\n  IIncreaseTotalCostAction,\r\n  IResetTotalCostAction,\r\n  IShowOrderDetailsAction\r\n} from './types';\r\n\r\nexport const increaseTotalCostAction = (\r\n  amount: number\r\n): IIncreaseTotalCostAction => {\r\n  return {\r\n    type: INCREASE_TOTALCOST, \r\n    payload: {amount}\r\n  };\r\n};\r\n\r\nexport const decreaseTotalCostAction = (\r\n  amount: number\r\n): IDecreaseTotalCostAction => {\r\n  return {\r\n    type: DECREASE_TOTALCOST, \r\n    payload: {amount}\r\n  };\r\n};\r\n\r\nexport const resetTotalCostAction = (): IResetTotalCostAction => {\r\n  return {type: RESET_TOTALCOST};\r\n};\r\n\r\nexport const showOrderDetailsAction = (): IShowOrderDetailsAction => {\r\n  return {type: SHOW_ORDER_DETAILS};\r\n};\r\n\r\nexport const closeOrderDetailsAction = (): ICloseOrderDetailsAction => {\r\n  return {type: CLOSE_ORDER_DETAILS};\r\n};\r\n\r\nexport const fetchDataOrderPendingAction = (): IFetchDataOrderPendingAction => ({\r\n  type: FETCH_DATA_ORDER_PENDING\r\n});\r\n\r\nexport const fetchDataOrderSuccessAction = (orderId: number): IFetchDataOrderSuccessAction => ({\r\n  type: FETCH_DATA_ORDER_SUCCESS,\r\n  payload: {orderId}\r\n});\r\n\r\nexport const fetchIngredientsFailAction = (errorMessage: string): IFetchDataOrderFailAction => ({\r\n  type: FETCH_DATA_ORDER_FAIL,\r\n  payload: {errorMessage}\r\n});\r\n\r\nexport const fetchDataOrderAction: AppThunk = orderlist => (dispatch: AppDispatch) => {\r\n  dispatch(fetchDataOrderPendingAction());\r\n  fetch(`${API_URL}/orders`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n    },\r\n    body: JSON.stringify({\r\n      ingredients: orderlist\r\n    })\r\n  }).then(res => {\r\n      if (!res.ok) {\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch(fetchDataOrderSuccessAction(resp.order.number));\r\n      dispatch({type: SHOW_ORDER_DETAILS})\r\n    }).catch(errorMessage => {\r\n      dispatch(fetchIngredientsFailAction(errorMessage));\r\n    });\r\n};\r\n\r\nexport const getOrderByIdPendingAction = (): IGetOrderByIdPendingAction => ({\r\n  type: GET_ORDER_BY_ID_PENDING\r\n});\r\n\r\nexport const getOrderByIdSuccessAction = (data: any): IGetOrderByIdSuccessAction => ({\r\n  type: GET_ORDER_BY_ID_SUCCESS,\r\n  payload: data\r\n});\r\n\r\nexport const getOrderByIdFailAction = (errorMessage: string): IGetOrderByIdFailAction => ({\r\n  type: GET_ORDER_BY_ID_FAIL,\r\n  payload: {errorMessage}\r\n});\r\n\r\nexport const getOrderByIdAction: AppThunk = (id: string) => (dispatch: AppDispatch) => {\r\n  dispatch(getOrderByIdPendingAction());\r\n  fetch(`${API_URL}/orders/${id}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    }\r\n  }).then(res => {\r\n      if (!res.ok) {\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch(getOrderByIdSuccessAction(resp.orders && resp.orders.length > 0 ? resp.orders[0] : null));\r\n    }).catch(errorMessage => {\r\n      dispatch(getOrderByIdFailAction(errorMessage));\r\n    });\r\n};\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\n\r\nimport {\r\n  increaseTotalCostAction,\r\n  decreaseTotalCostAction,\r\n  resetTotalCostAction,\r\n  fetchDataOrderAction,\r\n  showOrderDetailsAction,\r\n  closeOrderDetailsAction,\r\n  getOrderByIdAction\r\n} from './action-creators';\r\nimport {TOrderReducer} from './reducer';\r\n\r\ntype TActions = {\r\n  increaseTotalCostAction: (amount: number) => void,\r\n  decreaseTotalCostAction: (amount: number) => void,\r\n  resetTotalCostAction: () => void,\r\n  fetchDataOrderAction: (orderlist: Array<string>) => void,\r\n  showOrderDetailsAction: () => void,\r\n  closeOrderDetailsAction: () => void,\r\n  getOrderByIdAction: (id: string) => void\r\n};\r\n\r\nexport type TUseOrder = [TOrderReducer, TActions];\r\n\r\nexport const useOrder = (): TUseOrder => (\r\n  [\r\n    useSelector(({orderReducer}: RootState) => ({\r\n      totalCost: orderReducer.totalCost,\r\n      isSendingDataOrder: orderReducer.isSendingDataOrder,\r\n      orderId: orderReducer.orderId,\r\n      isShowOrderDetails: orderReducer.isShowOrderDetails,\r\n      errorMessage: orderReducer.errorMessage,\r\n      order: orderReducer.order,\r\n      isOrderLoading: orderReducer.isOrderLoading      \r\n    })),\r\n    {\r\n      increaseTotalCostAction,\r\n      decreaseTotalCostAction,\r\n      resetTotalCostAction,\r\n      fetchDataOrderAction,\r\n      showOrderDetailsAction,\r\n      closeOrderDetailsAction,\r\n      getOrderByIdAction\r\n    }\r\n  ]\r\n);","export const ADD_TO_CONSTRUCTOR: 'ADD_TO_CONSTRUCTOR' = 'ADD_TO_CONSTRUCTOR';\r\nexport const REMOVE_FROM_CONSTRUCTOR: 'REMOVE_FROM_CONSTRUCTOR' = 'REMOVE_FROM_CONSTRUCTOR';\r\nexport const DROP_CONSTRUCTOR_ITEM: 'DROP_CONSTRUCTOR_ITEM' = 'DROP_CONSTRUCTOR_ITEM';\r\nexport const RESET_CONSTRUCTOR: 'RESET_CONSTRUCTOR' = 'RESET_CONSTRUCTOR';\r\nexport const SHOW_DROP_LOCATION: 'SHOW_DROP_LOCATION' = 'SHOW_DROP_LOCATION';\r\nexport const HIDE_DROP_LOCATION: 'HIDE_DROP_LOCATION' = 'HIDE_DROP_LOCATION';\r\n\r\n","import {v4 as uuidv4} from 'uuid';\r\nimport {TIngredient} from '../ingredients';\r\nimport {\r\n  ADD_TO_CONSTRUCTOR,\r\n  REMOVE_FROM_CONSTRUCTOR,\r\n  DROP_CONSTRUCTOR_ITEM,\r\n  RESET_CONSTRUCTOR,\r\n  HIDE_DROP_LOCATION,\r\n  SHOW_DROP_LOCATION\r\n} from './action-types';\r\n\r\nimport {\r\n  IAddToConstructorAction,\r\n  IDropConstructorItemAction,\r\n  IRemoveFromConstructorAction,\r\n  IResetConstructorAction,\r\n  IToggleDropLoactionAction\r\n} from './types';\r\n\r\n\r\nexport const addToConstructorAction = (\r\n  index: number,\r\n  item: TIngredient\r\n): IAddToConstructorAction => {\r\n  const constructorId = uuidv4();\r\n  return {\r\n   type: ADD_TO_CONSTRUCTOR,\r\n   payload: {index, item: {constructorId, ...item}}\r\n  };\r\n};\r\n\r\nexport const removeFromConstructorAction = (\r\n  index: number\r\n): IRemoveFromConstructorAction => {\r\n  return {\r\n    type: REMOVE_FROM_CONSTRUCTOR,\r\n    payload: {index}\r\n  };\r\n};\r\n\r\nexport const dropConstructorItemAction = (\r\n  {dragIndex, replaceToIndex}: {dragIndex: number, replaceToIndex: number}\r\n): IDropConstructorItemAction => {\r\n  return {\r\n    type: DROP_CONSTRUCTOR_ITEM,\r\n    payload: {dragIndex, replaceToIndex}\r\n  };\r\n};\r\n\r\nexport const resetConstructorAction = (): IResetConstructorAction => {\r\n  return {type: RESET_CONSTRUCTOR};\r\n};\r\n\r\nexport const toggleDropLoactionAction = (\r\n  show: boolean\r\n): IToggleDropLoactionAction=> {\r\n  return show ? {type: SHOW_DROP_LOCATION} : \r\n                {type: HIDE_DROP_LOCATION};\r\n};\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\n\r\nimport {\r\n  addToConstructorAction,\r\n  removeFromConstructorAction,\r\n  dropConstructorItemAction,\r\n  resetConstructorAction,\r\n  toggleDropLoactionAction\r\n} from './action-creators';\r\nimport {TConstructorReducer} from './reducer';\r\n\r\n\r\nexport type TUseConstructor = [TConstructorReducer, any];\r\n\r\nexport const useConstructor = (): TUseConstructor => (\r\n  [\r\n    useSelector(({constructorReducer}: RootState) => ({\r\n      constructorIngredients: constructorReducer.constructorIngredients,\r\n      showDropLocation: constructorReducer.showDropLocation\r\n    })),\r\n    {\r\n      addToConstructorAction,\r\n      removeFromConstructorAction,\r\n      dropConstructorItemAction,\r\n      resetConstructorAction,\r\n      toggleDropLoactionAction\r\n    }\r\n  ]\r\n);","export const REGISTER_FORM_SET_VALUE: 'REGISTER_FORM_SET_VALUE' =\r\n  'REGISTER_FORM_SET_VALUE';\r\n","import * as ActionTypes from './action-types';\r\nimport {ISetRegisterFormValue} from './types';\r\n\r\nexport const setRegisterFormValue = (\r\n  field: string,\r\n  value: string\r\n): ISetRegisterFormValue => ({\r\n  type: ActionTypes.REGISTER_FORM_SET_VALUE,\r\n  field,\r\n  value\r\n}) \r\n","export const LOGIN_FORM_SET_VALUE: 'LOGIN_FORM_SET_VALUE' =\r\n  'LOGIN_FORM_SET_VALUE';\r\n","import * as ActionTypes from './action-types';\r\n\r\nexport const setLoginFormValue = (field: string, value: string) => ({\r\n  type: ActionTypes.LOGIN_FORM_SET_VALUE,\r\n  field,\r\n  value\r\n}) \r\n","export const FORGOT_PASSWORD_FORM_SET_VALUE: 'FORGOT_PASSWORD_FORM_SET_VALUE'\r\n  = 'FORGOT_PASSWORD_FORM_SET_VALUE';\r\n","import * as ActionTypes from './action-types';\r\nimport {ISetForgotPasswordFormValue} from './types';\r\n\r\nexport const setForgotPasswordFormValue = (\r\n  field: string,\r\n  value: string\r\n): ISetForgotPasswordFormValue => ({\r\n  type: ActionTypes.FORGOT_PASSWORD_FORM_SET_VALUE,\r\n  field,\r\n  value\r\n}) \r\n","export const RESET_PASSWORD_FORM_SET_VALUE: 'RESET_PASSWORD_FORM_SET_VALUE' =\r\n  'RESET_PASSWORD_FORM_SET_VALUE';\r\n","import * as ActionTypes from './action-types';\r\nimport {ISetResetPasswordFormValue} from './types';\r\n\r\nexport const setResetPasswordFormValue = (\r\n  field: string, \r\n  value: string\r\n): ISetResetPasswordFormValue => ({\r\n  type: ActionTypes.RESET_PASSWORD_FORM_SET_VALUE,\r\n  field,\r\n  value\r\n}) \r\n","export const USER_LOGIN_PENDING: 'USER_LOGIN_PENDING' =\r\n  'USER_LOGIN_PENDING';\r\nexport const USER_LOGIN_SUCCESS: 'USER_LOGIN_SUCCESS' =\r\n  'USER_LOGIN_SUCCESS';\r\nexport const USER_LOGIN_FAIL: 'USER_LOGIN_FAIL' =\r\n  'USER_LOGIN_FAIL';\r\n\r\nexport const USER_REGISTER_PENDING: 'USER_REGISTER_PENDING' =\r\n  'USER_REGISTER_PENDING';\r\nexport const USER_REGISTER_SUCCESS: 'USER_REGISTER_SUCCESS' =\r\n  'USER_REGISTER_SUCCESS';\r\nexport const USER_REGISTER_FAIL: 'USER_REGISTER_FAIL' =\r\n  'USER_REGISTER_FAIL';\r\n\r\nexport const USER_LOGOUT_PENDING: 'USER_LOGOUT_PENDING' =\r\n  'USER_LOGOUT_PENDING';\r\nexport const USER_LOGOUT_SUCCESS: 'USER_LOGOUT_SUCCESS' =\r\n  'USER_LOGOUT_SUCCESS';\r\nexport const USER_LOGOUT_FAIL: 'USER_LOGOUT_FAIL' =\r\n  'USER_LOGOUT_FAIL';\r\n\r\nexport const USER_UPDATE_PENDING: 'USER_UPDATE_PENDING' =\r\n  'USER_UPDATE_PENDING';\r\nexport const USER_UPDATE_SUCCESS: 'USER_UPDATE_SUCCESS' =\r\n'USER_UPDATE_SUCCESS';\r\nexport const USER_UPDATE_FAIL: 'USER_UPDATE_FAIL' =\r\n  'USER_UPDATE_FAIL';\r\n\r\nexport const USER_REFRESH_TOKEN_PENDING: 'USER_REFRESH_TOKEN_PENDING' =\r\n  'USER_REFRESH_TOKEN_PENDING';\r\nexport const USER_REFRESH_TOKEN_SUCCESS: 'USER_REFRESH_TOKEN_SUCCESS' =\r\n  'USER_REFRESH_TOKEN_SUCCESS';\r\nexport const USER_REFRESH_TOKEN_FAIL: 'USER_REFRESH_TOKEN_FAIL' =\r\n  'USER_REFRESH_TOKEN_FAIL';\r\n\r\nexport const GET_USER_PENDING: 'GET_USER_PENDING' =\r\n  'GET_USER_PENDING';\r\nexport const GET_USER_SUCCESS: 'GET_USER_SUCCESS' =\r\n  'GET_USER_SUCCESS';\r\nexport const GET_USER_FAIL: 'GET_USER_FAIL' =\r\n  'GET_USER_FAIL';\r\n\r\nexport const USER_RESET_PASSWOD_REQUEST_PENDING: 'USER_RESET_PASSWOD_REQUEST_PENDING' =\r\n  'USER_RESET_PASSWOD_REQUEST_PENDING';\r\nexport const USER_RESET_PASSWOD_REQUEST_SUCCESS: 'USER_RESET_PASSWOD_REQUEST_SUCCESS' =\r\n  'USER_RESET_PASSWOD_REQUEST_SUCCESS';\r\nexport const USER_RESET_PASSWOD_REQUEST_FAIL: 'USER_RESET_PASSWOD_REQUEST_FAIL' =\r\n  'USER_RESET_PASSWOD_REQUEST_FAIL';\r\n\r\nexport const USER_RESET_PASSWOD_PENDING: 'USER_RESET_PASSWOD_PENDING' =\r\n  'USER_RESET_PASSWOD_PENDING';\r\nexport const USER_RESET_PASSWOD_SUCCESS: 'USER_RESET_PASSWOD_SUCCESS' =\r\n  'USER_RESET_PASSWOD_SUCCESS';\r\nexport const USER_RESET_PASSWOD_FAIL: 'USER_RESET_PASSWOD_FAIL' =\r\n  'USER_RESET_PASSWOD_FAIL';\r\n","import * as ActionTypes from './action-types';\r\nimport {API_URL} from '../../constants';\r\n// eslint-disable-next-line no-unused-vars\r\n// import {setCookie, getCookie} from '../index';\r\nimport {AppDispatch, AppThunk} from '../store';\r\nimport {\r\n  IFetchUserLoginFailAction,\r\n  IFetchUserLoginPendingAction,\r\n  IFetchUserLoginSuccessAction,\r\n  IFetchUserRegisterFailAction,\r\n  IFetchUserRegisterPendingAction,\r\n  IFetchUserRegisterSuccessAction\r\n} from './types';\r\n\r\nexport const fetchUserLoginPendingAction = (): IFetchUserLoginPendingAction => ({\r\n  type: ActionTypes.USER_LOGIN_PENDING\r\n});\r\n\r\nexport const fetchUserLoginSuccessAction = (data: {\r\n  [name: string]: any;\r\n  token: string;\r\n}): IFetchUserLoginSuccessAction => ({\r\n  type: ActionTypes.USER_LOGIN_SUCCESS,\r\n  payload: data\r\n});\r\n\r\nexport const fetchUserLoginFailAction = (errorMessage: string): IFetchUserLoginFailAction => ({\r\n  type: ActionTypes.USER_LOGIN_FAIL,\r\n  payload: {errorMessage}\r\n});\r\n\r\nexport const fetchUserLoginAction: AppThunk = ({\r\n  email,\r\n  password\r\n}: {\r\n  email: string;\r\n  password: string;\r\n}) => async (dispatch: AppDispatch) => {\r\n  dispatch(fetchUserLoginPendingAction());\r\n  fetch(`${API_URL}/auth/login`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password\r\n    })\r\n  })\r\n    .then(res => {\r\n      if (!res.ok) {\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch(fetchUserLoginSuccessAction({\r\n        ...resp,\r\n        token: resp.accessToken ? resp.accessToken.split('Bearer ')[1] : null\r\n      }));\r\n      if (resp.accessToken) {\r\n        // TODO: почему то в куках происходит дубликация данных, поэтому localStorage\r\n        // setCookie('token', resp.accessToken.split('Bearer ')[1]);\r\n        // setCookie('refreshToken', resp.refreshToken);\r\n        localStorage.setItem('token', resp.accessToken.split('Bearer ')[1]);        \r\n        localStorage.setItem('refreshToken', resp.refreshToken);\r\n      }\r\n    }).catch(errorMessage => {\r\n      dispatch(fetchUserLoginFailAction(errorMessage));\r\n    });\r\n};\r\n\r\nexport const fetchUserRegisterPendingAction = (): IFetchUserRegisterPendingAction => ({\r\n  type: ActionTypes.USER_REGISTER_PENDING\r\n});\r\n\r\nexport const fetchUserRegisterSuccessAction = (data: {\r\n  [name: string]: any;\r\n  token: string | null;\r\n}): IFetchUserRegisterSuccessAction => ({\r\n  type: ActionTypes.USER_REGISTER_SUCCESS,\r\n  payload: data\r\n});\r\n\r\nexport const fetchUserRegisterFailAction = (errorMessage: string): IFetchUserRegisterFailAction => ({\r\n  type: ActionTypes.USER_REGISTER_FAIL,\r\n  payload: {errorMessage}\r\n});\r\n\r\nexport const fetchUserRegisterAction: AppThunk = ({\r\n  email,\r\n  password,\r\n  name\r\n}: {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n}) => async (dispatch: AppDispatch) => {\r\n  dispatch(fetchUserRegisterPendingAction());\r\n  try {\r\n    const response = await fetch(`${API_URL}/auth/register`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email,\r\n        password,\r\n        name\r\n      })\r\n    });\r\n    \r\n    if (!response.ok) {      \r\n      throw new Error(String(response.status));\r\n    } else {\r\n      const resp:any = response.json();\r\n      dispatch(fetchUserRegisterSuccessAction({\r\n        ...resp,\r\n        token: resp.accessToken ? resp.accessToken.split('Bearer ')[1] : null\r\n      }));\r\n      return resp;      \r\n    }\r\n  } catch (error) {\r\n    dispatch(fetchUserRegisterFailAction(error));\r\n    return {success: false, errorMessage: 'Пользователь с такими данными уже существует!'};\r\n  }\r\n};\r\n\r\nexport const fetchUserUpdateAction: AppThunk = ({\r\n  email,\r\n  password,\r\n  name\r\n}) => (dispatch: AppDispatch) => {\r\n  dispatch({type: ActionTypes.USER_UPDATE_PENDING});\r\n  fetch(`${API_URL}/auth/user`, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      password,\r\n      name\r\n    })\r\n  })\r\n    .then(res => {\r\n      if (!res.ok) {\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch({type: ActionTypes.USER_UPDATE_SUCCESS, payload: resp.data});\r\n    }).catch(errorMessage => {\r\n      dispatch({type: ActionTypes.USER_UPDATE_FAIL, payload: {errorMessage}});\r\n    });\r\n};\r\n\r\nexport const fetchGetUserAction: AppThunk | any = () => (dispatch: AppDispatch) => {\r\n  dispatch({type: ActionTypes.GET_USER_PENDING});\r\n  fetch(`${API_URL}/auth/user `, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n    }\r\n  })\r\n    .then(async res => {\r\n      if (!res.ok && res.status !== 401) {\r\n        dispatch(fetchUserRefreshTokenAction())\r\n        .then(() => {\r\n          dispatch(fetchGetUserAction());\r\n        });\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch({type: ActionTypes.GET_USER_SUCCESS, payload: {...resp, token: localStorage.getItem('token')}});\r\n    }).catch(errorMessage => {\r\n      dispatch({type: ActionTypes.GET_USER_FAIL, payload: {errorMessage}});\r\n    });\r\n};\r\n\r\nexport const fetchUserRefreshTokenAction: AppThunk | any = () => (dispatch: AppDispatch) => {\r\n  dispatch({type: ActionTypes.USER_REFRESH_TOKEN_PENDING});\r\n  return fetch(`${API_URL}/auth/token`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      token: localStorage.getItem('refreshToken')\r\n    })\r\n  })\r\n    .then(res => {\r\n      if (!res.ok) {\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch({type: ActionTypes.USER_REFRESH_TOKEN_SUCCESS, payload: {\r\n        ...resp,\r\n        token: resp.accessToken ? resp.accessToken.split('Bearer ')[1] : null\r\n      }});\r\n      localStorage.setItem('token', resp.accessToken.split('Bearer ')[1]);        \r\n      localStorage.setItem('refreshToken', resp.refreshToken);\r\n    }).catch(errorMessage => {\r\n      dispatch({type: ActionTypes.USER_REFRESH_TOKEN_FAIL, payload: {errorMessage}});\r\n    });\r\n};\r\n\r\nexport const fetchUserLogoutAction: AppThunk = () => async (dispatch: AppDispatch) => {\r\n  dispatch({type: ActionTypes.USER_LOGOUT_PENDING});\r\n  fetch(`${API_URL}/auth/logout`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'      \r\n    },\r\n    body: JSON.stringify({\r\n      token: `${localStorage.getItem('refreshToken')}`\r\n    })\r\n  })\r\n    .then(res => {\r\n      if (!res.ok) {\r\n        return Promise.reject(res.status);\r\n      } else {\r\n        return res.json();\r\n      }\r\n    })\r\n    .then(resp => {\r\n      dispatch({type: ActionTypes.USER_LOGOUT_SUCCESS, payload: resp.data});\r\n      // setCookie('token', '', {'max-age': 0});\r\n      // setCookie('refreshToken', '', {'max-age': 0});\r\n      localStorage.setItem('token', '');        \r\n      localStorage.setItem('refreshToken', '');\r\n    }).catch(errorMessage => {\r\n      dispatch({type: ActionTypes.USER_LOGOUT_FAIL, payload: {errorMessage}});\r\n    });\r\n};\r\n\r\nexport const fetchUserResetPasswordRequestAction: AppThunk = ({\r\n  email\r\n}) => async (dispatch: AppDispatch) => {\r\n  dispatch({type: ActionTypes.USER_RESET_PASSWOD_REQUEST_PENDING});\r\n  try {\r\n    const response = await fetch(`${API_URL}/password-reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'      \r\n      },\r\n      body: JSON.stringify({\r\n        email\r\n      })\r\n    });\r\n    if (!response.ok) {      \r\n      throw new Error(String(response.status));\r\n    } else {\r\n      const resp: any = response.json();\r\n      dispatch({type: ActionTypes.USER_RESET_PASSWOD_REQUEST_SUCCESS, payload: resp.data});\r\n      return resp;      \r\n    }\r\n  } catch (error) {\r\n    dispatch({type: ActionTypes.USER_RESET_PASSWOD_REQUEST_FAIL, payload: {errorMessage: error}});\r\n  }\r\n};\r\n\r\nexport const fetchUserResetPasswordAction: AppThunk = ({\r\n  password,\r\n  token\r\n}) => async (dispatch: AppDispatch) => {\r\n  dispatch({type: ActionTypes.USER_RESET_PASSWOD_PENDING});\r\n  try {\r\n    const response = await fetch(`${API_URL}/password-reset/reset`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'      \r\n      },\r\n      body: JSON.stringify({\r\n        password,\r\n        token\r\n      })\r\n    });\r\n    if (!response.ok) {      \r\n      throw new Error(String(response.status));\r\n    } else {\r\n      const resp: any = response.json();\r\n      dispatch({type: ActionTypes.USER_RESET_PASSWOD_SUCCESS, payload: resp.data});\r\n      return resp;      \r\n    }\r\n  } catch (error) {\r\n    dispatch({type: ActionTypes.USER_RESET_PASSWOD_FAIL, payload: {errorMessage: error}});\r\n  }\r\n};\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\nimport {\r\n  fetchUserLoginAction,\r\n  fetchUserRegisterAction,\r\n  fetchGetUserAction,\r\n  fetchUserLogoutAction,\r\n  fetchUserUpdateAction,\r\n  fetchUserResetPasswordRequestAction,\r\n  fetchUserResetPasswordAction\r\n} from './action-creators';\r\nimport {TUserReducer} from './reducer';\r\n\r\nexport type TUseAuth = [TUserReducer, any];\r\n\r\nexport const useAuth = (): TUseAuth => (\r\n  [\r\n    useSelector(({userReducer}: RootState) => ({\r\n      user: userReducer.user,\r\n      userActionPending: userReducer.userActionPending,\r\n      accessToken: userReducer.accessToken,\r\n      refreshToken: userReducer.refreshToken,\r\n      isUserLoaded: userReducer.isUserLoaded,\r\n      isUserUpdates: userReducer.isUserUpdates\r\n    })),\r\n    {\r\n      fetchUserLoginAction,\r\n      fetchUserRegisterAction,\r\n      fetchGetUserAction,\r\n      fetchUserLogoutAction,\r\n      fetchUserUpdateAction,\r\n      fetchUserResetPasswordRequestAction,\r\n      fetchUserResetPasswordAction\r\n    }\r\n  ]\r\n);","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\nimport {TWsReducer} from './reducer';\r\n\r\nexport type TOrder = {\r\n  ingredients: string[],\r\n  _id: string,\r\n  status: 'done' | 'pending' | 'created',\r\n  number: number,\r\n  name: string,\r\n  createdAt: string,\r\n  updatedAt: string\r\n};\r\n\r\nconst sortByDate = (a: TOrder, b: TOrder) => {\r\n  return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n}\r\n\r\nconst getTotalForToday = (orders: TOrder[]) => {  \r\n  function isToday(date: Date) {\r\n    const today = new Date();\r\n    return date.getDate() === today.getDate() &&\r\n           date.getMonth() === today.getMonth() &&\r\n           date.getFullYear() === today.getFullYear();\r\n  }  \r\n  return orders.reduce((acc, cur) => {\r\n    return acc + (isToday(new Date(cur.createdAt)) ? 1 : 0);\r\n  }, 0);\r\n}\r\n\r\nexport type TUseWebsocket = [TWsReducer];\r\n\r\nexport const useWebsocket = (): TUseWebsocket => (\r\n  [\r\n    useSelector(({wsReducer} : RootState) => ({\r\n      feedData: {\r\n        ...wsReducer.feedData,\r\n        orders: wsReducer.feedData?.orders.sort(sortByDate) || [],\r\n        totalToday: getTotalForToday(wsReducer.feedData?.orders)\r\n      },\r\n      historyData: {\r\n        ...wsReducer.historyData,\r\n        orders: wsReducer.historyData?.orders.sort(sortByDate) || [],\r\n        totalToday: getTotalForToday(wsReducer.historyData?.orders)\r\n      },\r\n      wsConnected: wsReducer.wsConnected\r\n    }))\r\n  ]\r\n);","import {createBrowserHistory} from 'history';\r\n\r\nconst basename = process.env.PUBLIC_URL || \"\";\r\nconst history = createBrowserHistory({basename});\r\n\r\nexport default history;\r\n","import React, {FC, useEffect} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport {DndProvider} from 'react-dnd';\r\nimport {HTML5Backend} from 'react-dnd-html5-backend';\r\nimport {\r\n  BurgerConstructor,\r\n  BurgerIngredients\r\n} from '../../components';\r\nimport {useIngredeints, useOrder, useConstructor, TIngredient} from '../../services';\r\n\r\nexport type TRemoveIngredient = (index: number) => void;\r\nexport type TAddIngredient = (ingredient: TIngredient) => void;\r\n\r\nconst MainPage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const [{errorMessage},\r\n    {fetchIngredientsAction, increaseCountAction, decreaseCountAction}] = useIngredeints();\r\n  const [, {increaseTotalCostAction, decreaseTotalCostAction}] = useOrder();  \r\n  const [{constructorIngredients},\r\n    {addToConstructorAction, removeFromConstructorAction}] = useConstructor();  \r\n\r\n  const increaseTotalCost = (amount: number) => {\r\n    dispatch(increaseTotalCostAction(amount));\r\n  };\r\n\r\n  const decreaseTotalCost = (amount: number) => {\r\n    dispatch(decreaseTotalCostAction(amount));\r\n  };\r\n\r\n  const increaseCount = (id: string) => {\r\n    dispatch(increaseCountAction(id));\r\n  };\r\n\r\n  const decreaseCount = (id: string) => {\r\n    dispatch(decreaseCountAction(id));\r\n  };\r\n\r\n  const addToConstructor = (index: number, item: TIngredient) => {\r\n    dispatch(addToConstructorAction(index, item));\r\n  };\r\n\r\n  const removeFromConstructor = (index: number) => {\r\n    dispatch(removeFromConstructorAction(index));\r\n  };\r\n  \r\n  useEffect(() => {\r\n    dispatch(fetchIngredientsAction());\r\n    errorMessage && alert(`Во время запроса произошла ошибка: ${errorMessage}`);\r\n  }, [errorMessage, fetchIngredientsAction, dispatch]);\r\n\r\n  const addIngredient: TAddIngredient = (ingredient) => {    \r\n    const length = constructorIngredients.length;\r\n    const index = length === 1 ? length : length - 1;\r\n    if (length === 0 || ingredient.type === \"bun\") {\r\n      if (ingredient.type !== \"bun\") {\r\n        alert(`Данный ингредиент не может лежать в основе бургера.\r\nПожалуйста выберите ингрединт из раздела \"Булки\".`);\r\n        return;\r\n      }\r\n\r\n      if (length === 2) { \r\n        removeIngredient(length-2);     \r\n        removeIngredient(0);\r\n      } else if (length > 2) { \r\n        removeIngredient(length-1);     \r\n        removeIngredient(0);\r\n      }\r\n      addToConstructor(0, ingredient);\r\n      addToConstructor(length, ingredient);\r\n      increaseCount(ingredient[\"_id\"]);\r\n      increaseCount(ingredient[\"_id\"]);\r\n      increaseTotalCost(ingredient.price * 2);\r\n    } else {\r\n      addToConstructor(index, ingredient);\r\n      increaseCount(ingredient[\"_id\"]);\r\n      increaseTotalCost(ingredient.price);\r\n    }\r\n  }\r\n\r\n  const removeIngredient: TRemoveIngredient = (index) => {\r\n    const removedIngredient = constructorIngredients[index];\r\n    decreaseCount(removedIngredient[\"_id\"]);\r\n    decreaseTotalCost(removedIngredient.price);\r\n    removeFromConstructor(index);\r\n  }\r\n\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <BurgerIngredients\r\n        addIngredient={addIngredient}/>\r\n      <BurgerConstructor\r\n        addIngredient={addIngredient}\r\n        removeIngredient={removeIngredient}/>\r\n    </DndProvider>\r\n  )\r\n};\r\n\r\nexport default MainPage;\r\n","import React, {ChangeEvent, FC, FormEvent} from 'react';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {\r\n  EmailInput, \r\n  PasswordInput, \r\n  Button\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport loginStyles from './login.module.css';\r\nimport {\r\n  Link,\r\n  Spinner\r\n} from '../../components';\r\nimport {useLoginForm, useAuth} from \"../../services\";\r\nimport { fetchUserLoginAction } from '../../services/user/action-creators';\r\n\r\nconst Login: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const [\r\n    {email, password},\r\n    {setLoginFormValue},\r\n  ] = useLoginForm();\r\n  const [\r\n    {userActionPending}\r\n  ] = useAuth();\r\n\r\n  const onFormChange = (e: ChangeEvent) => {\r\n    const target = e.target as HTMLInputElement;\r\n    dispatch(setLoginFormValue(target.name, target.value));\r\n  }\r\n  const formSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(fetchUserLoginAction({\r\n      email,\r\n      password\r\n    }));\r\n  };\r\n\r\n  return (\r\n    userActionPending ?\r\n    <Spinner isLoading /> :\r\n    <form onSubmit={formSubmit} className={loginStyles.container}>\r\n      <span className=\"text text_type_main-medium\">Вход</span>\r\n      <div\r\n        className=\"mt-3\">        \r\n        <EmailInput\r\n          name=\"email\"        \r\n          value={email}\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div \r\n        className=\"mt-3\">\r\n        <PasswordInput\r\n          name=\"password\"      \r\n          value={password}\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"mt-3 mb-5\">\r\n        <Button>Войти</Button>\r\n      </div>\r\n      <div className=\"mt-5 text text_type_main-default\">\r\n        <span className={loginStyles.label}>Вы — новый пользователь? </span>\r\n        <Link to=\"/register\">Зарегистрироваться</Link>\r\n      </div>\r\n      <div className=\"mt-1 text text_type_main-default\">\r\n        <span className={loginStyles.label}>Забыли пароль? </span>\r\n        <Link to=\"/forgot-password\">Восстановить пароль</Link>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Login;\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\nimport {setLoginFormValue} from './action-creators';\r\nimport {TLoginFormReducer} from './reducer';\r\n\r\ntype TActions = {\r\n  setLoginFormValue: (field: string, value: string) => void,\r\n};\r\n\r\nexport type TUseLoginForm = [TLoginFormReducer, TActions];\r\n\r\nexport const useLoginForm = (): TUseLoginForm => (\r\n  [\r\n    useSelector(({loginFormReducer}: RootState) => ({\r\n      email: loginFormReducer.email,\r\n      password: loginFormReducer.password\r\n    })),\r\n    {\r\n      setLoginFormValue\r\n    }\r\n  ]\r\n);","import React, {ChangeEvent, FC, FormEvent} from 'react';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {\r\n  Input,\r\n  EmailInput, \r\n  PasswordInput, \r\n  Button\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport registerStyles from './register.module.css';\r\nimport {\r\n  AppSpinner,\r\n  Link\r\n} from '../../components';\r\nimport {useRegisterForm, useAuth, history} from \"../../services\";\r\n\r\nconst Register: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const [\r\n    {name, email, password},\r\n    {setRegisterFormValue},\r\n  ] = useRegisterForm();\r\n  const [\r\n    {userActionPending},\r\n    {fetchUserRegisterAction}\r\n  ] = useAuth();\r\n\r\n  const onFormChange = (e: ChangeEvent) => {\r\n    const target = e.target as HTMLInputElement;\r\n    dispatch(setRegisterFormValue(target.name, target.value));\r\n  }\r\n  const formSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(fetchUserRegisterAction({\r\n      email,\r\n      password,\r\n      name\r\n    })).then(({success, errorMessage}: {success: boolean, errorMessage: string}) => {\r\n      if (success) {\r\n        history.replace({pathname: `/login`});\r\n      } else {\r\n        errorMessage && alert(`Во время запроса произошла ошибка: ${errorMessage}`);\r\n      }\r\n    });\r\n  };\r\n  return (\r\n    !userActionPending ?\r\n    <form onSubmit={formSubmit} className={registerStyles.container}>\r\n      <span className=\"text text_type_main-medium\">Регистрация</span>\r\n      <div\r\n        className=\"mt-3\">        \r\n        <Input\r\n          placeholder=\"Имя\"\r\n          name=\"name\"        \r\n          value={name}\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"mt-3\">        \r\n        <EmailInput\r\n          name=\"email\"        \r\n          value={email}\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div \r\n        className=\"mt-3\">\r\n        <PasswordInput\r\n          name=\"password\"      \r\n          value={password}\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"mt-3 mb-5\">\r\n        <Button>Зарегистрироваться</Button>\r\n      </div>\r\n      <div className=\"mt-5 text text_type_main-default\">\r\n        <span className={registerStyles.label}>Уже зарегистрированы? </span>\r\n        <Link to=\"/login\">Войти</Link>\r\n      </div>\r\n    </form> :\r\n    <AppSpinner />\r\n  )\r\n}\r\n\r\n\r\nexport default Register;\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\nimport {setRegisterFormValue} from './action-creators';\r\nimport {TRegisterFormReducer} from './reducer';\r\n\r\ntype TActions = {\r\n  setRegisterFormValue: (field: string, value: string) => void,\r\n};\r\n\r\nexport type TUseRegisterForm = [TRegisterFormReducer, TActions];\r\n\r\nexport const useRegisterForm = (): TUseRegisterForm => (\r\n  [\r\n    useSelector(({registerFormReducer}: RootState) => ({\r\n      name: registerFormReducer.name,\r\n      email: registerFormReducer.email,\r\n      password: registerFormReducer.password\r\n    })),\r\n    {\r\n      setRegisterFormValue\r\n    }\r\n  ]\r\n);","export const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_USER_START: 'WS_CONNECTION_USER_START' = 'WS_CONNECTION_USER_START';\r\nexport const WS_CONNECTION_END: 'WS_CONNECTION_END' = 'WS_CONNECTION_END';\r\nexport const WS_CONNECTION_USER_END: 'WS_CONNECTION_USER_END' = 'WS_CONNECTION_USER_END';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS';\r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_FEED_ORDERS: 'WS_GET_FEED_ORDERS' = 'WS_GET_FEED_ORDERS';\r\nexport const WS_GET_HISTORY_ORDERS: 'WS_GET_HISTORY_ORDERS' = 'WS_GET_HISTORY_ORDERS';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\nexport const WS_SEND_PONG_MESSAGE: 'WS_SEND_PONG_MESSAGE' = 'WS_SEND_PONG_MESSAGE';\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, {FC, useEffect, useMemo} from 'react';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport {useLocation} from 'react-router-dom';\r\nimport feedStyles from './feed.module.css';\r\nimport {AppSpinner, OrderCard} from '../../components';\r\nimport {history} from '../../services';\r\nimport {TOrder} from '../../services/websocket';\r\nimport {\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_END,\r\n  WS_SEND_PONG_MESSAGE\r\n} from '../../services/websocket/action-types';\r\nimport {useWebsocket, useIngredeints} from '../../services';\r\nconst _ = require('lodash');\r\n\r\nconst Feed: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const formatAmount = new Intl.NumberFormat('ru-RU', {\r\n    minimumFractionDigits: 0      \r\n  }).format;\r\n  const location = useLocation(); \r\n  const [{ingredients},\r\n    {fetchIngredientsAction}] = useIngredeints();\r\n  const [{feedData, wsConnected = false}] = useWebsocket();\r\n  const {orders, total, totalToday} = feedData;\r\n  const ingredientsMap = useMemo(() => _.keyBy(ingredients, '_id'), [ingredients]);\r\n  const completedOrders = useMemo(() => {\r\n    return orders.filter((order: TOrder) => order.status === 'done');\r\n  }, [orders]);\r\n  const inProgressOrders = useMemo(() => {\r\n    return orders.filter((order: TOrder) => order.status === 'pending');\r\n  }, [orders]);\r\n\r\n  useEffect(() => {\r\n    dispatch({type: WS_CONNECTION_START});\r\n    if (ingredients.length === 0) {\r\n      dispatch(fetchIngredientsAction());\r\n    }\r\n    const pingPong = setInterval(() => {\r\n      dispatch({type: WS_SEND_PONG_MESSAGE})\r\n    }, 10000);\r\n    return () => {\r\n      clearInterval(pingPong);\r\n      dispatch({type: WS_CONNECTION_END});\r\n    };\r\n  }, []);\r\n  return (\r\n    wsConnected ? <div className={feedStyles.container}>\r\n      <div className={feedStyles.feedContainer}>\r\n        <div className=\"mb-4 text text_type_main-large\">Лента заказов</div>\r\n        <div className={`${feedStyles.feedList}`}>\r\n          {\r\n            orders.map((order: TOrder) => (\r\n              ingredientsMap && <OrderCard\r\n                changeLocation={({number: id}) => {                \r\n                  history.push({pathname: `/feed/${id}`, state: {background: location}});\r\n                }}\r\n                key={uuidv4()}\r\n                ingredientsMap={ingredientsMap}\r\n                {...order}\r\n              />\r\n            ))\r\n          }\r\n        </div>\r\n      </div>\r\n      <div className={`${feedStyles.stats} ml-5`}>\r\n        <div className={`${feedStyles.table}`}>\r\n          <div className=\"pr-5\">\r\n            <div className=\"text text_type_main-medium mt-3\">Готовы:</div>\r\n            <ul className={`${feedStyles.readyOrders}`}>\r\n              {\r\n                completedOrders\r\n                .map(({number}: TOrder) => (\r\n                  <li key={uuidv4()} className=\"text text_type_digits-default mb-2\">{number}</li>\r\n                ))\r\n              }\r\n            </ul>\r\n          </div>\r\n          <div>\r\n            <div className=\"text text_type_main-medium mt-3\">В работе:</div>\r\n            <ul className={`${feedStyles.currentOrders}`}>\r\n              {\r\n                inProgressOrders\r\n                .map(({number}: TOrder) => (\r\n                  <li key={uuidv4()} className=\"text text_type_digits-default mb-2\">{number}</li>\r\n                ))\r\n              }\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div className={`${feedStyles.tableNum}`}>\r\n          <div className=\"text text_type_main-medium\">Выполнено за все время:</div>\r\n          <div className={`text text_type_digits-large`}>{formatAmount(total)}</div>\r\n        </div>\r\n        <div className={`${feedStyles.tableNum}`}>\r\n          <div className=\"text text_type_main-medium\">Выполнено за сегодня:</div>\r\n          <div className={`text text_type_digits-large`}>{formatAmount(totalToday)}</div>\r\n        </div>\r\n      </div>\r\n    </div> : <AppSpinner />\r\n  )\r\n}\r\n\r\nexport default Feed;\r\n","import React, {ChangeEvent, FormEvent, FC} from 'react';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {useLocation} from 'react-router-dom';\r\nimport {\r\n  EmailInput,\r\n  Button\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport forgotPasswordStyles from './forgot-password.module.css';\r\nimport {Link} from '../../components';\r\nimport {useForgotPasswordForm, useAuth, history} from \"../../services\";\r\n\r\n\r\nconst ForgotPassword: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const {pathname} = useLocation();\r\n  const [\r\n    {email},\r\n    {setForgotPasswordFormValue},\r\n  ] = useForgotPasswordForm();\r\n  const [ , {fetchUserResetPasswordRequestAction}] = useAuth();\r\n  const onFormChange = (e: ChangeEvent) => {\r\n    const target = e.target as HTMLInputElement;\r\n    dispatch(setForgotPasswordFormValue(target.name, target.value));\r\n  }\r\n  const formSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(fetchUserResetPasswordRequestAction({\r\n      email\r\n    })).then(({success}: {success: boolean}) => success &&\r\n    history.replace({\r\n      pathname: `/reset-password`,\r\n      state: {from: pathname}\r\n    }));\r\n  };\r\n  return (\r\n    <form onSubmit={(e) => formSubmit(e)} className={forgotPasswordStyles.container}>\r\n      <span className=\"text text_type_main-medium\">Восстановление пароля</span>\r\n      <div\r\n        className=\"mt-3\">        \r\n        <EmailInput        \r\n          value={email}\r\n          name=\"email\"\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"mt-3 mb-5\">\r\n        <Button>Восстановить</Button>\r\n      </div>\r\n      <div className=\"mt-5 text text_type_main-default\">\r\n        <span className={forgotPasswordStyles.label}>Вспомнили пароль? </span>\r\n        <Link to=\"/login\">Войти</Link>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ForgotPassword;\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\nimport {setForgotPasswordFormValue} from './action-creators';\r\nimport {TForgotPasswordFormReducer} from './reducer';\r\n\r\ntype TActions = {\r\n  setForgotPasswordFormValue: (field: string, value: string) => void,\r\n};\r\n\r\nexport type TUseForgotPasswordForm = [TForgotPasswordFormReducer, TActions];\r\n\r\nexport const useForgotPasswordForm = (): TUseForgotPasswordForm => (\r\n  [\r\n    useSelector(({forgotPasswordFormReducer}: RootState) => ({\r\n      email: forgotPasswordFormReducer.email\r\n    })),\r\n    {\r\n      setForgotPasswordFormValue\r\n    }\r\n  ]\r\n);","import React, {ChangeEvent, FC, FormEvent} from 'react';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {Redirect, useLocation} from 'react-router-dom';\r\nimport {\r\n  Input,\r\n  PasswordInput, \r\n  Button\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport resetPasswordStyles from './reset-password.module.css';\r\nimport {\r\n  Link\r\n} from '../../components';\r\nimport {useResetPasswordForm, useAuth, history} from \"../../services\";\r\n\r\ntype TLocation = {\r\n  state?: {\r\n    from?: string\r\n  }\r\n};\r\n\r\nconst ResetPassword: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const location: TLocation = useLocation();\r\n  const [\r\n    {password, token},\r\n    {setResetPasswordFormValue},\r\n  ] = useResetPasswordForm();\r\n  const [ , {fetchUserResetPasswordAction}] = useAuth();\r\n  const onFormChange = (e: ChangeEvent) => {\r\n    const target = e.target as HTMLInputElement;\r\n    dispatch(setResetPasswordFormValue(target.name, target.value));\r\n  }\r\n  const formSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(fetchUserResetPasswordAction({\r\n      password,\r\n      token\r\n    })).then(({success}: {success: boolean}) => success && history.replace({pathname: `/login`}));\r\n  }; \r\n  if (!(location.state && location.state.from === '/forgot-password')) {\r\n    return <Redirect to=\"/forgot-password\" />\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={formSubmit} className={resetPasswordStyles.container}>\r\n      <span className=\"text text_type_main-medium\">Восстановление пароля</span>\r\n      <div \r\n        className=\"mt-3\">\r\n        <PasswordInput\r\n          name=\"password\"      \r\n          value={password}\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"mt-3\">        \r\n        <Input\r\n          placeholder=\"Введите код из письма\"        \r\n          value={token}\r\n          name=\"token\"\r\n          onChange={onFormChange}\r\n        />\r\n      </div>\r\n      <div\r\n        className=\"mt-3 mb-5\">\r\n        <Button>Сохранить</Button>\r\n      </div>\r\n      <div className=\"mt-5 text text_type_main-default\">\r\n        <span className={resetPasswordStyles.label}>Вспомнили пароль? </span>\r\n        <Link to=\"/login\">Войти</Link>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ResetPassword;\r\n","import {useSelector} from 'react-redux';\r\nimport {RootState} from '../rootReducer';\r\nimport {setResetPasswordFormValue} from './action-creators';\r\nimport {TResetPasswordFormReducer} from './reducer';\r\n\r\ntype TActions = {\r\n  setResetPasswordFormValue: (field: string, value: string) => void,\r\n};\r\n\r\nexport type TUseResetPasswordForm = [TResetPasswordFormReducer, TActions];\r\n\r\nexport const useResetPasswordForm = (): TUseResetPasswordForm => (\r\n  [\r\n    useSelector(({resetPasswordFormReducer}: RootState) => ({\r\n      password: resetPasswordFormReducer.password,\r\n      token: resetPasswordFormReducer.token\r\n    })),\r\n    {\r\n      setResetPasswordFormValue\r\n    }\r\n  ]\r\n);","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, {FC, useEffect, useState} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport {useParams} from 'react-router-dom';\r\nimport ingredientDetailsStyles from './ingredient-details.module.css';\r\nimport {Spinner} from '../../components';\r\nimport {useIngredeints, history, TIngredientDetails} from '../../services';\r\n \r\nconst IngredientDetails: FC = () => {\r\n  const dispatch = useDispatch()\r\n  const {id} = useParams<{id: string}>();  \r\n  const [{ingredients, isIngredientsLoading}, {fetchIngredientsAction}] = useIngredeints();\r\n  const [details, setDetails] = useState<TIngredientDetails | {[name: string]: any}>({});\r\n  useEffect(() => {\r\n    !history.location.state && dispatch(fetchIngredientsAction());\r\n  }, [id])\r\n  useEffect(() => {\r\n    setDetails(ingredients.find(ingredient => ingredient._id === id) || {});\r\n  }, [ingredients])\r\n  return (\r\n    <>      \r\n    { isIngredientsLoading ?\r\n      <Spinner isLoading /> :\r\n      <div className={ingredientDetailsStyles.content}>      \r\n        <img className=\"mb-2\" src={details.image_large} alt={details.name}/>\r\n        <span className=\"text text_type_main-medium mb-4\">{details.name}</span>\r\n        <span className=\"text text_type_main-default mb-5\">{details.description}</span>\r\n        <div className={`mt-5 mb-5 ${ingredientDetailsStyles.energy}`}>\r\n          <div className={ingredientDetailsStyles.energyItem}>\r\n            <span className={`text text_type_main-default\r\n            ${ingredientDetailsStyles.energyItem__caption}`}>Калории, ккал</span>\r\n            <span className={`text text_type_digits-default mt-1\r\n            ${ingredientDetailsStyles.energyItem__value}`}>{details.calories}</span>\r\n          </div>\r\n          <div className={ingredientDetailsStyles.energyItem}>\r\n            <span className={`text text_type_main-default\r\n            ${ingredientDetailsStyles.energyItem__caption}`}>Белки, г</span>\r\n            <span className={`text text_type_digits-default mt-1\r\n            ${ingredientDetailsStyles.energyItem__value}`}>{details.proteins}</span>\r\n          </div>\r\n          <div className={ingredientDetailsStyles.energyItem}>\r\n            <span className={`text text_type_main-default\r\n            ${ingredientDetailsStyles.energyItem__caption}`}>Жиры, г</span>\r\n            <span className={`text text_type_digits-default mt-1\r\n            ${ingredientDetailsStyles.energyItem__value}`}>{details.fat}</span>\r\n          </div>\r\n          <div className={ingredientDetailsStyles.energyItem}>\r\n            <span className={`text text_type_main-default\r\n            ${ingredientDetailsStyles.energyItem__caption}`}>Углеводы, г</span>\r\n            <span className={`text text_type_digits-default mt-1\r\n            ${ingredientDetailsStyles.energyItem__value}`}>{details.carbohydrates}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    }\r\n    </>\r\n  );\r\n}\r\n \r\nexport default IngredientDetails;\r\n","import React, {FC} from 'react';\r\nimport {Modal} from '../../components';\r\nimport IngredientDetails from '../ingredient-details/ingredient-details';\r\n\r\n\r\ninterface IIngredientDetailsModal {\r\n  caption: string,\r\n  onClose: () => void\r\n};\r\n\r\nconst IngredientDetailsModal: FC<IIngredientDetailsModal> = ({caption, onClose}) => {\r\n  \r\n  return (\r\n    <Modal {...{caption, onClose}}>\r\n      <IngredientDetails />\r\n    </Modal>\r\n  );\r\n}\r\n \r\nexport default IngredientDetailsModal;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, {FC, useEffect, useMemo} from 'react';\r\nimport {useDispatch} from 'react-redux'; \r\nimport {v4 as uuidv4} from 'uuid';\r\nimport {formatRelative} from 'date-fns'\r\nimport ruLocale from \"date-fns/locale/ru\";\r\nimport {useParams} from 'react-router-dom';\r\nimport orderStyles from './order.module.css';\r\nimport {\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {IngredientIcon, Spinner} from '../../components';\r\nimport {useOrder, useIngredeints, getStatusName} from '../../services';\r\nconst _ = require('lodash');\r\n\r\nconst Order: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const {id} = useParams<{id: string}>();\r\n  const [{isOrderLoading, order}, {getOrderByIdAction}] = useOrder();\r\n  const [{ingredients},\r\n    {fetchIngredientsAction}] = useIngredeints();\r\n  const ingredientsMap = useMemo(() => _.keyBy(ingredients, '_id'), [ingredients]);\r\n  const totalCost = useMemo(() => {\r\n    return order && order.ingredients.reduce((acc: number, cur: string) => {\r\n      return acc + (ingredientsMap[cur] ? Number(ingredientsMap[cur].price) : 0);\r\n    }, 0);\r\n  }, [order]);\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchIngredientsAction())\r\n    .then(() => {\r\n      dispatch(getOrderByIdAction(id));\r\n    });\r\n  }, []);\r\n  return (\r\n    isOrderLoading || _.isEmpty(ingredientsMap, true) || !order?\r\n    <Spinner isLoading /> :\r\n    <div className={orderStyles.container}>\r\n      <span className={`${orderStyles.orderId} text text_type_digits-default`}>\r\n        #{order.number}\r\n      </span>\r\n      <div className=\"text text_type_main-medium\">\r\n        {order.name}\r\n      </div>\r\n      {\r\n        order.status &&\r\n        <span\r\n        className={\r\n          `mt-2 mb-3 text text_type_main-default\r\n          ${order.status === 'done' ? orderStyles.done : null}`}>\r\n            {getStatusName(order.status)}\r\n        </span>\r\n      }\r\n      <span className={`${orderStyles.orderStatus} text text_type_main-default`}>{order.orderStatus}</span>\r\n      <span className=\"text text_type_main-medium\">Состав:</span>\r\n      <div className={`${orderStyles.contains}`}>\r\n        <ul>\r\n          {\r\n            order.ingredients.map((ingredient: string) => (\r\n              ingredientsMap[ingredient] && <li key={uuidv4()} className=\"pr-3 pt-1 pb-1\">\r\n                <div className={`${orderStyles.ingredientTitle}`}>\r\n                  <IngredientIcon\r\n                    src={ingredientsMap[ingredient].image_mobile}\r\n                    alt={ingredientsMap[ingredient].name}\r\n                  />\r\n                  <span className=\"text text_type_main-default ml-2\">{ingredientsMap[ingredient].name}</span>\r\n                </div>\r\n                <span className={`ml-3 text text_type_digits-default ${orderStyles.cost}`}>\r\n                  {ingredientsMap[ingredient].price}\r\n                  <CurrencyIcon type=\"primary\" />\r\n                </span>\r\n              </li>\r\n            ))\r\n          }\r\n        </ul>\r\n      </div>\r\n      <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>\r\n        <div className={`text text_type_main-default ${orderStyles.inactive}`}>\r\n          {\r\n            formatRelative(new Date(order.createdAt), new Date(), {locale: ruLocale})\r\n          }\r\n        </div>\r\n        <span className={`ml-3 text text_type_digits-default ${orderStyles.cost}`}>\r\n          {totalCost}\r\n          <CurrencyIcon type=\"primary\"/>\r\n        </span>\r\n     </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Order;\r\n","import React, {FC} from 'react';\r\nimport {Modal} from '../../components';\r\nimport Order from '../order/order';\r\nimport orderModalStyles from './order-modal.module.css';\r\n\r\ninterface IOrderModal {\r\n  onClose: () => void\r\n};\r\n\r\nconst OrderModal: FC<IOrderModal> = ({onClose}) => {\r\n  return (\r\n    <Modal onClose={onClose}>\r\n      <div className={orderModalStyles.container}>\r\n        <Order />\r\n      </div>        \r\n    </Modal>\r\n  );\r\n}\r\n \r\nexport default OrderModal;\r\n","import React, {FC, useState, useEffect, useMemo, FormEvent} from 'react';\r\nimport {useDispatch} from 'react-redux';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport {\r\n  Route,\r\n  useRouteMatch\r\n} from 'react-router-dom';\r\nimport {useLocation} from 'react-router-dom';\r\nimport {\r\n  Input,\r\n  EmailInput, \r\n  PasswordInput, \r\n  Button\r\n} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport profileStyles from './profile.module.css';\r\nimport {\r\n  AppSpinner,\r\n  Link,\r\n  OrderCard\r\n} from '../../components';\r\nimport OrderPage from '../order/order';\r\nimport {useAuth, useWebsocket, useIngredeints, history} from '../../services';\r\nimport {\r\n  WS_CONNECTION_USER_START,\r\n  WS_CONNECTION_USER_END,\r\n  WS_SEND_PONG_MESSAGE\r\n} from '../../services/websocket/action-types';\r\nimport {TOrder} from '../../services/websocket';\r\nconst _ = require('lodash');\r\n\r\ninterface IProfile {\r\n  user?: {\r\n    email: string,\r\n    name: string\r\n  },\r\n  fetchUserLogoutAction?: () => void\r\n};\r\n\r\nconst Profile: FC<IProfile> = ({\r\n  user = {\r\n    email: '',\r\n    name: ''\r\n  },\r\n  fetchUserLogoutAction\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [{isUserUpdates}, {fetchUserUpdateAction}] = useAuth();\r\n  const [{historyData, wsConnected}] = useWebsocket();\r\n  const {orders}: {orders: TOrder[]} = historyData;\r\n  const [{ingredients},\r\n    {fetchIngredientsAction}] = useIngredeints();\r\n  const ingredientsMap = useMemo(() => _.keyBy(ingredients, '_id'), [ingredients]);\r\n  const [name, setName] = useState(user.name);\r\n  const [email, setEmail] = useState(user.email);\r\n  const [password, setPassword] = useState('');\r\n  const location = useLocation();\r\n  const {pathname} = location;\r\n  const formSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    dispatch(fetchUserUpdateAction({\r\n      name,\r\n      email,\r\n      password\r\n    }));\r\n    setPassword('');\r\n  };\r\n  const {path} = useRouteMatch();\r\n  const logOut = () => {\r\n    fetchUserLogoutAction && dispatch(fetchUserLogoutAction());\r\n  };\r\n  const getDescriptionByRoute = (route: string) => {\r\n    const descriptions: {[name: string]: string} = {\r\n      '/profile': 'В этом разделе вы можете изменить свои персональные данные',\r\n      '/profile/orders': 'В этом разделе вы можете просмотреть свою историю заказов'\r\n    };\r\n    return descriptions[route] || '';\r\n  };\r\n  useEffect(() => {\r\n    dispatch({type: WS_CONNECTION_USER_START});\r\n    if (ingredients.length === 0) {\r\n      dispatch(fetchIngredientsAction());\r\n    }\r\n    const pingPong = setInterval(() => {\r\n      dispatch({type: WS_SEND_PONG_MESSAGE})\r\n    }, 10000);\r\n    return () => {\r\n      clearInterval(pingPong);\r\n      dispatch({type: WS_CONNECTION_USER_END});\r\n    };\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  return (\r\n    isUserUpdates ?\r\n    <AppSpinner /> :    \r\n    <div className={`${profileStyles.container} ${pathname.indexOf(`${path}/orders/`) >= 0 ?\r\n      profileStyles.noMargin : null}`}>\r\n      <nav className={`${profileStyles.navigation} ${pathname.indexOf(`${path}/orders/`) >= 0 ?\r\n        profileStyles.hide : null}`}>\r\n        <ul>\r\n          <li className=\"text text_type_main-medium\">\r\n            <Link\r\n              isNavLink\r\n              to=\"/profile\"              \r\n              active={pathname === '/profile'}>\r\n                Профиль\r\n            </Link>\r\n          </li>\r\n          <li className=\"text text_type_main-medium\">\r\n            <Link\r\n              isNavLink\r\n              to=\"/profile/orders\"\r\n              active={pathname === '/profile/orders'}>\r\n                История заказов\r\n            </Link>\r\n          </li>\r\n          <li className=\"text text_type_main-medium\">\r\n            <Link\r\n              isNavLink\r\n              to=\"/\"\r\n              onClick={logOut}>\r\n                Выход\r\n            </Link>\r\n          </li>\r\n        </ul>      \r\n        <div className={`${profileStyles.description} text text_type_main-default`}>\r\n          {getDescriptionByRoute(pathname)}\r\n        </div>\r\n      </nav>\r\n      <Route\r\n        exact        \r\n        path={path}\r\n        render={() => (            \r\n        <form onSubmit={formSubmit}>\r\n          <div\r\n            className=\"mb-3\">\r\n            <Input\r\n              placeholder=\"Имя\"        \r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          </div>\r\n          <div\r\n            className=\"mb-3\">        \r\n            <EmailInput\r\n              name=\"email\"        \r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n          </div>\r\n          <div \r\n            className=\"mb-3\">\r\n            <PasswordInput\r\n              name=\"password\"      \r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </div>\r\n          <div\r\n            className=\"mb-5\">\r\n            <Button>Сохранить</Button>\r\n          </div>\r\n        </form>)}\r\n      />\r\n      <Route\r\n        exact        \r\n        path={`${path}/orders`}>\r\n          <div className={`${profileStyles.orderList} pr-1`}>\r\n          {\r\n            wsConnected && orders && orders.map((order: TOrder) => (\r\n              ingredientsMap && <OrderCard\r\n                changeLocation={({number: id}) => {                 \r\n                  history.push({pathname: `${path}/orders/${id}`, state: {background: location}});\r\n                }}\r\n                showStatus\r\n                key={uuidv4()}\r\n                ingredientsMap={ingredientsMap}\r\n                {...order}\r\n              />\r\n            ))\r\n          }\r\n          </div>\r\n      </Route>\r\n      <Route\r\n        exact\r\n        path={`${path}/orders/:id`}>\r\n          <OrderPage />\r\n      </Route>          \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile;\r\n","import React, {FC} from 'react'\r\n\r\nconst NotFound: FC = () => {\r\n  return (\r\n    <div className=\"text text_type_main-large\">\r\n      Ошибка 404! Страница не найдена!\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotFound;\r\n","import React, {useEffect} from 'react';\r\nimport {  \r\n  Switch,\r\n  Route,\r\n  useLocation\r\n} from 'react-router-dom';\r\nimport {\r\n  ProtectedRoute,\r\n  UserProtectedRoute\r\n} from '../components';\r\nimport {history} from '../services';\r\nimport {\r\n  MainPage,\r\n  LoginPage,\r\n  RegisterPage,\r\n  ForgotPasswordPage,\r\n  ResetPasswordPage,\r\n  FeedPage,\r\n  IngredientPage,\r\n  IngredientModalPage,\r\n  OrderPage,\r\n  OrderModalPage,\r\n  ProfilePage,\r\n  NotFoundPage\r\n} from '../pages';\r\n\r\ntype TLocation = {\r\n  state: {\r\n    background: any\r\n  }\r\n};\r\n\r\nexport function MainRouter() {\r\n  const location: TLocation = useLocation();\r\n  const background = location.state && location.state.background;\r\n  useEffect(() => {\r\n    history.replace({...history.location, state: null})\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Switch location={background || location}>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          render={() => (\r\n            <MainPage />\r\n          )}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/ingredients/:id\"\r\n          render={() => (\r\n            <IngredientPage />\r\n          )}\r\n        />\r\n        <UserProtectedRoute\r\n          exact\r\n          path=\"/login\" \r\n        >\r\n          <LoginPage />\r\n        </UserProtectedRoute>\r\n        <UserProtectedRoute\r\n          exact\r\n          path=\"/register\" \r\n        >\r\n          <RegisterPage />\r\n        </UserProtectedRoute>\r\n        <UserProtectedRoute\r\n          exact\r\n          path=\"/forgot-password\" \r\n        >\r\n          <ForgotPasswordPage />\r\n        </UserProtectedRoute>\r\n        <UserProtectedRoute\r\n          exact\r\n          path=\"/reset-password\" \r\n        >\r\n          <ResetPasswordPage />\r\n        </UserProtectedRoute>\r\n        <Route\r\n          exact\r\n          path=\"/feed\"\r\n          render={() => (\r\n            <FeedPage />\r\n          )}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/feed/:id\"\r\n          render={() => (\r\n            <OrderPage />\r\n          )}\r\n        />\r\n        <ProtectedRoute\r\n          path=\"/profile\"                        \r\n        >\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <Route\r\n          path=\"/\"\r\n          render={() => (\r\n            <NotFoundPage />\r\n          )}\r\n        />\r\n      </Switch>\r\n      {\r\n        background &&      \r\n        <Route\r\n          exact\r\n          path=\"/feed/:id\"\r\n          render={() => (\r\n            <OrderModalPage onClose={history.goBack} />\r\n          )}\r\n        />\r\n      }\r\n      {\r\n        background &&\r\n        <Route\r\n          exact\r\n          path=\"/profile/orders/:id\">\r\n            <OrderModalPage onClose={history.goBack} />\r\n        </Route>\r\n      }\r\n      {\r\n        background &&\r\n        <Route\r\n          exact\r\n          path=\"/ingredients/:id\">\r\n            <IngredientModalPage caption=\"Детали ингредиента\" onClose={history.goBack} />\r\n        </Route>\r\n      }  \r\n    </>\r\n  )\r\n}\r\n\r\n","export * from './ingredients';\r\nexport {useOrder} from './order';\r\nexport {useConstructor} from './constructor';\r\nexport {useRegisterForm} from './register-form';\r\nexport {useLoginForm} from './login-form';\r\nexport {useForgotPasswordForm} from './forgot-password-form';\r\nexport {useResetPasswordForm} from './reset-password-form';\r\nexport {useAuth} from './user';\r\nexport {useWebsocket} from './websocket';\r\nexport {default as history} from './history';\r\nexport {MainRouter} from './routes';\r\n\r\nexport function setCookie(name: string, value: string, props: any) {  \r\n  props = {\r\n    // path: '/',\r\n    ...props\r\n  };\r\n  let exp = props.expires;\r\n  if (typeof exp == 'number' && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + '=' + value;\r\n  for (const propName in props) {\r\n    updatedCookie += '; ' + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += '=' + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function getCookie(name: string) {\r\n  const matches = document.cookie.match(\r\n    // eslint-disable-next-line no-useless-escape\r\n    new RegExp('(?:^|; )' + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + '=([^;]*)')\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport const getStatusName = (status: 'done' | 'pending' | 'created') => {\r\n  return {\r\n    done: 'Выполнен',\r\n    pending: 'Готовится',\r\n    created: 'Создан'\r\n  }[status] || status;\r\n}\r\n","import React, {FC} from 'react';\r\nimport appFooterStyles from './app-footer.module.css';\r\nimport {CurrencyIcon, Button} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport {useOrder} from '../../services';\r\n\r\nconst AppFooter: FC = () => {\r\n  const [{totalCost}] = useOrder();\r\n  return ( \r\n    <footer>\r\n      <div className={`text text_type_main-default mb-2 mt-2 ${appFooterStyles.container}`}>\r\n        <div\r\n          className={`${appFooterStyles.footer}`}\r\n          data-testid=\"price\">\r\n          {totalCost}\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>           \r\n        <Button size=\"small\">\r\n          <div className=\"text text_type_main-default\">Смотреть заказ</div>\r\n        </Button>   \r\n      </div>\r\n    </footer>\r\n   );\r\n}\r\n \r\nexport default AppFooter;","import React, {FC} from 'react';\r\nimport navigationItemStyles from './navigation-item.module.css';\r\n\r\ninterface INavigationItem {\r\n  icon: JSX.Element,\r\n  caption: string,\r\n  className?: string\r\n}\r\n\r\nconst NavigationItem: FC<INavigationItem> = ({icon, caption, className}) => {\r\n  return ( \r\n    <div className={`ml-3 mt-2 mr-3 mb-2 ${navigationItemStyles.container} ${className}`}>\r\n      {icon}\r\n      <span className=\"text text_type_main-default ml-1\">{caption}</span>\r\n    </div>\r\n   );\r\n}\r\n \r\nexport default NavigationItem;","import React, {FC} from 'react';\r\nimport {Link as RouterLink} from 'react-router-dom';\r\nimport {HashLink} from 'react-router-hash-link';\r\nimport linkStyles from './link.module.css';\r\n\r\ninterface ILink {\r\n  isHashLink?: boolean,\r\n  to: string,\r\n  active?: boolean,\r\n  isNavLink?: boolean,\r\n  onClick?: (args?: any) => void\r\n};\r\n\r\nconst Link: FC<ILink> = ({\r\n  isHashLink,\r\n  to,\r\n  children,\r\n  active = false,\r\n  isNavLink = false,\r\n  onClick\r\n}) => {\r\n  const className = active ? linkStyles.active : isNavLink ? linkStyles.navLink : linkStyles.link\r\n  return (\r\n    <div onClick={onClick}>\r\n      {\r\n        isHashLink ?\r\n        <HashLink to={to} className={className}>{children}</HashLink> :\r\n        <RouterLink to={to} className={className}>{children}</RouterLink>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default Link;\r\n","import React, {FC} from 'react';\r\nimport {useLocation} from 'react-router-dom';\r\nimport appHeaderStyles from './app-header.module.css';\r\nimport {Logo, BurgerIcon, ListIcon, ProfileIcon, CloseIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport NavigationItem from '../navigation-item/navigation-item';\r\nimport Link from '../link/link';\r\n\r\nconst AppHeader: FC = () => {\r\n  const {pathname} = useLocation();\r\n  return ( \r\n    <header className={`${appHeaderStyles.container}`}>      \r\n      <nav>\r\n        <ul className={appHeaderStyles.navigation}>\r\n          <li>\r\n            <Link\r\n              isNavLink\r\n              to=\"/\"              \r\n              active={pathname === '/' || pathname.indexOf('/ingredients/') >= 0}>\r\n              <NavigationItem\r\n                icon={<BurgerIcon type={pathname === '/'|| pathname.indexOf('/ingredients/') >= 0\r\n                ? 'primary' : 'secondary'}/>}\r\n                caption=\"Конструктор\"/>\r\n            </Link>\r\n          </li>\r\n          <li>\r\n            <Link isNavLink to=\"/feed\" active={pathname.indexOf('/feed') >= 0}>\r\n              <NavigationItem\r\n                icon={<ListIcon type={pathname.indexOf('/feed') >= 0 ? 'primary' : 'secondary'}/>}\r\n                caption=\"Лента заказов\"/>\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </nav>      \r\n      <span className={appHeaderStyles.logo}>\r\n        <Logo />\r\n      </span>\r\n      <Link isNavLink to=\"/profile\" active={pathname.indexOf('/profile') >= 0}>\r\n        <NavigationItem\r\n          className={appHeaderStyles.account}\r\n          icon={<ProfileIcon type={pathname.indexOf('/profile') >= 0 ? 'primary' : 'secondary'}/>}\r\n          caption=\"Личный кабинет\"/> \r\n      </Link>  \r\n      <div className={appHeaderStyles.menuIcon} onClick={function(e) {\r\n        const target = e.target as HTMLDivElement;\r\n        const menu = target.childNodes[0] as HTMLDivElement;\r\n        if (menu.style) {          \r\n          target.style.position = 'relative';\r\n          menu.style.display = 'flex';\r\n        }\r\n      }}>\r\n        <div className={`pt-2 pb-2 pl-1 pr-1 ${appHeaderStyles.menu}`}>\r\n          <div className={`text text_type_main-medium ${appHeaderStyles.menuHeader}`}>\r\n            Меню\r\n            <CloseIcon type=\"primary\" />\r\n          </div>\r\n        </div>  \r\n      </div>\r\n    </header>\r\n   );\r\n}\r\n \r\nexport default AppHeader;","import React, {FC} from 'react';\r\nimport modalOverlayStyles from './modal-overlay.module.css';\r\n\r\ninterface IModalOverlay {\r\n  onClick: () => void\r\n};\r\n\r\nconst ModalOverlay: FC<IModalOverlay> = ({onClick}) => {\r\n  return (\r\n    <div className={modalOverlayStyles.overlay}\r\n      onClick={function(e) {\r\n        e.stopPropagation();\r\n        onClick && onClick();\r\n      }}>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default ModalOverlay;\r\n","import React, {FC} from 'react';\r\nimport spinnerStyles from './spinner.module.css';\r\n\r\ninterface ISpinner {\r\n  isLoading: boolean,\r\n  className?: string\r\n}\r\n\r\nconst Spinner: FC<ISpinner> = ({isLoading = false, className, ...props}) => {\r\n  return (\r\n    isLoading ? <div className={`${className ? className : ''} ${spinnerStyles.loader}`} {...props}>\r\n    </div> : null\r\n  );\r\n}\r\n \r\nexport default Spinner;\r\n","import React, {FC} from 'react';\r\nimport appSpinnerStyles from './app-spinner.module.css';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\nimport Spinner from '../spinner/spinner';\r\n \r\nconst AppSpinner: FC = () => {\r\n  return (\r\n    <div className={appSpinnerStyles.spinner}>\r\n      <Spinner isLoading={true}/>\r\n      <ModalOverlay onClick={function(){}}/>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default AppSpinner;\r\n","import React, {FC, useEffect} from 'react'; \r\nimport ReactDOM from 'react-dom';\r\nimport modalStyles from './modal.module.css';\r\nimport {CloseIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport ModalOverlay from '../modal-overlay/modal-overlay';\r\n\r\ninterface IModal {\r\n  caption?: string,\r\n  onClose: () => void\r\n};\r\n\r\nconst modalRoot = document.getElementById(\"modals\") as HTMLDivElement;\r\n\r\nconst Modal: FC<IModal> = ({caption, children, onClose}) => {\r\n  useEffect(() => {\r\n    const close = (e: KeyboardEvent) => {\r\n      if(e.key === 'Escape'){\r\n        onClose();\r\n      }\r\n    }\r\n    window.addEventListener('keydown', close)\r\n  return () => window.removeEventListener('keydown', close)\r\n  },[onClose])\r\n\r\n  return ReactDOM.createPortal(\r\n    (\r\n      <>\r\n        <div\r\n          onClick={function(e) {\r\n            e.stopPropagation();\r\n          }}\r\n          className={modalStyles.container}>\r\n          <div className={`pl-10 pt-10 pr-10 pb-10 ${modalStyles.modal}`}>\r\n            <div className={modalStyles.modalHeader}>\r\n              <span className=\"text text_type_main-large\">{caption}</span>\r\n              <button className={modalStyles.closeButton} onClick={function(e) {\r\n                e.stopPropagation();\r\n                onClose && onClose();\r\n              }}>\r\n                <CloseIcon type=\"primary\"/>\r\n              </button>          \r\n            </div>\r\n            <div className={modalStyles.modalContent}>\r\n              {children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <ModalOverlay onClick={onClose}/>\r\n      </>\r\n    ), modalRoot\r\n  );\r\n}\r\n \r\nexport default Modal;\r\n","export default __webpack_public_path__ + \"static/media/done.05f77629.svg\";","import React, {FC} from 'react';\r\nimport orderDetailsStyles from './order-details.module.css';\r\nimport Modal from '../modal/modal';\r\nimport done from '../../images/done.svg';\r\n\r\ninterface IOrderDetails {\r\n  onClose: () => void,\r\n  orderId: number | null\r\n};\r\n \r\nconst OrderDetails: FC<IOrderDetails> = ({onClose, orderId}) => {\r\n  return (\r\n    <Modal onClose={onClose}>\r\n      <div className={orderDetailsStyles.content}>\r\n        <span className={`text text_type_digits-large mb-4 ${orderDetailsStyles.orderId}`}>{orderId}</span>\r\n        <span className=\"text text_type_main-medium mb-5\">идентификатор заказа</span>\r\n        <img className=\"mt-5 mb-5\" src={done} alt=\"done\"/>\r\n        <span className=\"mt-5 mb-1 text text_type_main-default\">Ваш заказ начали готовить</span>\r\n        <span className={`text text_type_main-default ${orderDetailsStyles.waiting}`}>Дождитесь готовности на орбитальной станции</span>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n \r\nexport default OrderDetails;\r\n","import React, {FC} from 'react';\r\nimport {useDrag, useDrop} from \"react-dnd\";\r\nimport {useDispatch} from 'react-redux';\r\nimport burgerConstructorStyles from './burger-constructor-element.module.css';\r\nimport {ConstructorElement, DragIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport {useConstructor} from '../../services';\r\n\r\ninterface IBurgerConstructorElement {\r\n  handleClose?: () => void,\r\n  price: number,\r\n  text: string,\r\n  thumbnail: string,\r\n  isFirst?: boolean,\r\n  isLast?: boolean,\r\n  draggable?: boolean,\r\n  id: string,\r\n  index?: number,\r\n  className: string\r\n};\r\n\r\nconst BurgerConstructorElement: FC<IBurgerConstructorElement> = ({\r\n  handleClose,\r\n  price,\r\n  text,\r\n  thumbnail,\r\n  isFirst = false,\r\n  isLast = false,\r\n  draggable = false,\r\n  id,\r\n  index,\r\n  className\r\n}) => {\r\n  const dispatch = useDispatch();  \r\n  const [, {dropConstructorItemAction}] = useConstructor();\r\n  const onDropHandler = ({dragIndex, replaceToIndex}: {dragIndex: number, replaceToIndex: number | undefined}) => {\r\n    dispatch(dropConstructorItemAction({dragIndex, replaceToIndex}));\r\n  }\r\n\r\n  const [{isDrag}, dragRef] = useDrag({\r\n    type: \"constructor-element\",\r\n    item: {dragId: id, dragIndex: index},\r\n    collect: monitor => ({\r\n        isDrag: monitor.isDragging()\r\n    })\r\n  });\r\n\r\n  const [{isHover}, dropTarget] = useDrop({\r\n    accept: \"constructor-element\",\r\n    drop(item: {dragIndex: number}) {\r\n      onDropHandler({dragIndex: item.dragIndex, replaceToIndex: index});        \r\n    },\r\n    collect: monitor => ({\r\n        isHover: monitor.isOver(),\r\n    })\r\n  });\r\n  \r\n  return (       \r\n    <div ref={draggable ? dropTarget : null}\r\n      data-test-id=\"constructor-element\">\r\n      <div    \r\n        ref={draggable ? dragRef : null}\r\n        data-testid={`constructor-element-${id}`}\r\n        data-ishover={String(isHover)}\r\n        data-isdrag={String(isDrag)}\r\n        data-isdraggable={String(draggable)}\r\n        className={`text text_type_main-default ${burgerConstructorStyles.ingredientWrapper} ${className}`}>\r\n        <div\r\n          data-edge={String(!draggable)}\r\n          className={`mr-2 ${burgerConstructorStyles.dragHandle}`}>\r\n          <DragIcon type=\"primary\" />\r\n        </div>\r\n        <ConstructorElement\r\n          type={isFirst ? 'top' : isLast ? 'bottom' : undefined}\r\n          isLocked={isFirst || isLast}\r\n          handleClose={handleClose}\r\n          price={price}\r\n          text={text}\r\n          thumbnail={thumbnail}/>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default BurgerConstructorElement;","import React, {FC, useRef, useCallback, useEffect} from \"react\";\r\nimport {useDrop} from \"react-dnd\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport burgerConstructorStyles from \"./burger-constructor.module.css\";\r\nimport {\r\n  Button,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport OrderDetails from \"../order-details/order-details\";\r\nimport BurgerConstructorElement from \"../burger-constructor-element/burger-constructor-element\";\r\nimport {useOrder, useConstructor, useIngredeints, useAuth, history, TIngredient} from \"../../services\";\r\nimport {TRemoveIngredient, TAddIngredient} from \"../../pages/main/main\";\r\n\r\ninterface IBurgerConstructor {\r\n  removeIngredient: TRemoveIngredient,\r\n  addIngredient: TAddIngredient\r\n}\r\n\r\nconst BurgerConstructor: FC<IBurgerConstructor> = ({ removeIngredient, addIngredient }) => {\r\n  const dispatch = useDispatch();\r\n  const myRef = useRef(null);\r\n\r\n  const [\r\n    { totalCost, orderId, isShowOrderDetails, errorMessage },\r\n    { fetchDataOrderAction, closeOrderDetailsAction, resetTotalCostAction },\r\n  ] = useOrder();\r\n  const [\r\n    { constructorIngredients, showDropLocation },\r\n    { resetConstructorAction },\r\n  ] = useConstructor();\r\n  const [, { fetchIngredientsAction }] = useIngredeints();\r\n  const [\r\n    {user}\r\n  ] = useAuth();\r\n\r\n  const [{ isHover }, dropTarget] = useDrop({\r\n    accept: \"ingredient-constructor\",\r\n    drop(item: {ingredient: TIngredient}) {\r\n      addIngredient(item.ingredient);\r\n    },\r\n    collect: (monitor) => ({\r\n      isHover: monitor.isOver(),\r\n    }),\r\n  });\r\n\r\n  const bun = constructorIngredients.find(item => item.type === 'bun');\r\n\r\n  const closeOrderDetails = useCallback(() => {\r\n    dispatch(resetConstructorAction());\r\n    dispatch(resetTotalCostAction());\r\n    dispatch(closeOrderDetailsAction());\r\n    dispatch(fetchIngredientsAction());\r\n  }, [\r\n    closeOrderDetailsAction,\r\n    resetConstructorAction,\r\n    fetchIngredientsAction,\r\n    resetTotalCostAction,\r\n    dispatch,\r\n  ]);\r\n\r\n  const sendOrder = () => {\r\n    if (!user) {\r\n      history.push({pathname: '/login'});\r\n      return;\r\n    }\r\n    dispatch(\r\n      fetchDataOrderAction(constructorIngredients.map((item) => item._id))\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    errorMessage && alert(`Во время запроса произошла ошибка: ${errorMessage}`);\r\n  }, [errorMessage]);\r\n\r\n  return (\r\n    <>\r\n      <section\r\n        data-testid=\"constructor-drop-location\"\r\n        data-ishover={String(isHover || showDropLocation)}\r\n        className={`pl-4 text text_type_main-medium text_color_inactive ${burgerConstructorStyles.container}`}\r\n        ref={dropTarget}\r\n      >\r\n        <div className={`mb-3 pr-1`}>\r\n          {bun && (\r\n            <BurgerConstructorElement\r\n              className=\"mb-2\"\r\n              isFirst\r\n              id={bun._id}\r\n              price={bun.price}\r\n              text={`${bun.name} (верх)`}\r\n              thumbnail={bun[\"image_mobile\"]}\r\n            />\r\n          )}\r\n          <div\r\n            className={`${burgerConstructorStyles.tableWrapper}`}\r\n            ref={myRef}\r\n          >\r\n            {constructorIngredients\r\n              .filter((item) => item.type !== 'bun')\r\n              .map((addedIngredient, index, arr) => {\r\n                return (\r\n                  <BurgerConstructorElement\r\n                    draggable\r\n                    index={index}\r\n                    id={addedIngredient._id}\r\n                    key={`${addedIngredient.constructorId}`}\r\n                    className={arr.length - 1 !== index ? \"mb-2\" : ''}\r\n                    handleClose={() => removeIngredient(index + 1)}\r\n                    price={addedIngredient.price}\r\n                    text={`${addedIngredient.name}`}\r\n                    thumbnail={addedIngredient[\"image_mobile\"]}\r\n                  />\r\n                );\r\n              })}\r\n          </div>\r\n          {bun && (\r\n            <BurgerConstructorElement\r\n              className=\"mt-2\"\r\n              id={bun._id}\r\n              isLast\r\n              price={bun.price}\r\n              text={`${bun.name} (низ)`}\r\n              thumbnail={bun[\"image_mobile\"]}\r\n            />\r\n          )}\r\n        </div>\r\n        {constructorIngredients.length > 0 && (\r\n          <div>\r\n            <div className={`mt-1 ${burgerConstructorStyles.footer}`}>\r\n              {totalCost}\r\n              <CurrencyIcon type=\"primary\" />\r\n              <div onClick={sendOrder}>\r\n                <Button>Оформить заказ</Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </section>\r\n      {isShowOrderDetails && (\r\n        <OrderDetails onClose={closeOrderDetails} orderId={orderId} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import React, {FC, useEffect} from 'react';\r\nimport {useLocation} from 'react-router-dom';\r\nimport {useDrag} from \"react-dnd\";\r\nimport {useDispatch} from 'react-redux';\r\nimport burgerIngredientsStyles from './burger-ingredient.module.css';\r\nimport {Counter, CurrencyIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport {useConstructor, history, TIngredient} from '../../services';\r\n\r\nexport type TBurgerIngredient = TIngredient & {\r\n  addToConstructor?: () => void\r\n};\r\n\r\nconst BurgerIngredient: FC<TBurgerIngredient> = ({\r\n  _id,\r\n  image,\r\n  price,\r\n  name,\r\n  count=0,\r\n  addToConstructor,\r\n  ...details\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const [,{toggleDropLoactionAction}] = useConstructor();\r\n\r\n  const [{isDrag, didDrop}, dragRef] = useDrag({\r\n    type: \"ingredient-constructor\",\r\n    item: {ingredient: {\r\n      _id, image, price, name, count,\r\n      ...details\r\n    }},    \r\n    collect: monitor => ({\r\n        isDrag: monitor.isDragging(),\r\n        didDrop: monitor.didDrop()\r\n    })\r\n  });\r\n\r\n  useEffect(() => {\r\n    (isDrag || (!didDrop && !isDrag)) && dispatch(toggleDropLoactionAction(isDrag));\r\n  }, [toggleDropLoactionAction, isDrag, didDrop, dispatch]);\r\n  \r\n\r\n  return ( \r\n    <>\r\n      <div\r\n        data-testid={`ingredient-${_id}`}\r\n        ref={dragRef}\r\n        onClick={function(e) {\r\n          const target = e.target as HTMLDivElement;\r\n          if (target.tagName !== 'P' &&\r\n          (target.children[0] ? target.children[0].tagName !== 'P' : true)) {\r\n            history.push({pathname: `/ingredients/${_id}`, state: {background: location}});\r\n          }\r\n        }}\r\n        className={`mb-4 ${burgerIngredientsStyles.ingredient}`}>\r\n        {count >= 0 && <span\r\n          data-testid=\"counter\"\r\n          className={burgerIngredientsStyles.counter}\r\n          onClick={() => addToConstructor && addToConstructor()}>\r\n            <Counter count={count}/>\r\n        </span>}\r\n        <img\r\n          className=\"pl-2 pr-2 mb-1\"\r\n          src={image} alt={image}/>\r\n        <div\r\n          className={`mb-1 ${burgerIngredientsStyles.cost}`}>\r\n            {price}\r\n            <CurrencyIcon type=\"primary\"/>\r\n        </div>\r\n        <div className=\"text text_type_main-default pb-3\">\r\n          {name}\r\n        </div>\r\n      </div>\r\n    </>\r\n    );\r\n}\r\n \r\nexport default BurgerIngredient;","import React, {FC, useState, useEffect} from 'react';\r\nimport burgerIngredientsStyles from './burger-ingredients.module.css';\r\nimport {Tab} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport Spinner from '../spinner/spinner';\r\nimport BurgerIngredient, { TBurgerIngredient } from '../burger-ingredient/burger-ingredient';\r\nimport Link from '../link/link';\r\n\r\nimport {useIngredeints} from '../../services';\r\nimport {TAddIngredient} from '../../pages/main/main';\r\n\r\ninterface IBurgerIngredients {\r\n  addIngredient: TAddIngredient\r\n};\r\n\r\ntype TIngredientTypes = \"bun\" | \"sauce\" | \"main\";\r\n\r\ntype TIngredientTab = {\r\n  key: TIngredientTypes,\r\n  data: TBurgerIngredient[]\r\n};\r\n \r\nconst BurgerIngredients: FC<IBurgerIngredients> = ({addIngredient}) => {\r\n  const [currentTab, setCurrentTab] = useState(\"\");\r\n  const [ingredientsOnTab, setIngredientsOnTab] = useState<Array<TIngredientTab>>([]);\r\n  const [{ingredients, isIngredientsLoading}] = useIngredeints();  \r\n\r\n  useEffect(() => {\r\n    const getIngredientsByType = (tabName: string) => {\r\n      return [...ingredients.filter(ingredient => ingredient.type === tabName)];\r\n    };\r\n    \r\n    setIngredientsOnTab([\r\n      {key: \"bun\", data: getIngredientsByType(\"bun\")},\r\n      {key: \"sauce\", data: getIngredientsByType(\"sauce\")},\r\n      {key: \"main\", data: getIngredientsByType(\"main\")}\r\n    ]);\r\n    \r\n  }, [ingredients]);\r\n  \r\n  const getHeader = (currentTabName: TIngredientTypes) => {\r\n    const names = {\r\n      'bun': 'Булки',\r\n      'sauce': 'Соусы',\r\n      'main': 'Начинки'\r\n    };\r\n    return names[currentTabName];\r\n  }\r\n\r\n  const addToConstructor = (ingredient: TBurgerIngredient) => {                \r\n    addIngredient(ingredient);\r\n  }\r\n\r\n  return ( \r\n    <section className={burgerIngredientsStyles.container}>\r\n      <div className=\"mb-1 text text_type_main-large\">\r\n        Соберите бургер\r\n      </div>\r\n      <ul className={`mb-3 ${burgerIngredientsStyles.tabs}`}>\r\n        <li>\r\n          <Link isHashLink to=\"#bun\">\r\n            <Tab\r\n              value=\"bun\"              \r\n              active={currentTab === \"bun\"}              \r\n              onClick={() => setCurrentTab(\"bun\")}>\r\n                Булки\r\n            </Tab>\r\n          </Link>\r\n        </li>              \r\n        <li>\r\n          <Link isHashLink to=\"#sauce\">\r\n            <Tab\r\n              value=\"sauce\"\r\n              active={currentTab === \"sauce\"}\r\n              onClick={() => setCurrentTab(\"sauce\")}>\r\n                Соусы                \r\n            </Tab>\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link isHashLink to=\"#main\">\r\n            <Tab\r\n              value=\"main\"\r\n              active={currentTab === \"main\"}\r\n              onClick={() => setCurrentTab(\"main\")}>                \r\n                Начинки\r\n            </Tab>\r\n          </Link>\r\n          </li>\r\n      </ul>\r\n      <Spinner isLoading={isIngredientsLoading} />\r\n      <div className={`pr-1 ${burgerIngredientsStyles.tableWrapper}`}\r\n        onScroll={(e) => {\r\n          const target = e.target as HTMLDivElement;\r\n          const targetTop = target.getBoundingClientRect().y;\r\n          if (\r\n            document.getElementById('bun') ||\r\n            document.getElementById('sauce') ||\r\n            document.getElementById('main')\r\n            ) {            \r\n            const bunElTop = document.getElementById('bun')!.getBoundingClientRect().y-targetTop;\r\n            const sauceTop = document.getElementById('sauce')!.getBoundingClientRect().y-targetTop;\r\n            const mainElTop = document.getElementById('main')!.getBoundingClientRect().y-targetTop;\r\n            const activeTab = mainElTop <= 24 ? 'main':\r\n            sauceTop <= 24 ? 'sauce' : bunElTop <=24 ? 'bun' : '';          \r\n            setCurrentTab(activeTab);\r\n          }\r\n        }}>\r\n          {ingredients.length > 0 && ingredientsOnTab.map(\r\n            (typedSet, i) => {\r\n              return (\r\n                <React.Fragment key={i}>\r\n                  <div id={typedSet.key} className=\"text text_type_main-medium mb-3\">\r\n                    {getHeader(typedSet.key)}\r\n                  </div>        \r\n                  <div className={burgerIngredientsStyles.table}>\r\n                    {\r\n                      typedSet.data.map(ingredient => {\r\n                        const {_id} = ingredient;\r\n                        return (\r\n                          <div        \r\n                            key={_id}>\r\n                            <div>\r\n                              <BurgerIngredient\r\n                                {...ingredient}\r\n                                addToConstructor={() => addToConstructor(ingredient)}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })\r\n                    }\r\n                  </div>  \r\n                </React.Fragment>\r\n              );\r\n            })\r\n          }\r\n        </div>\r\n    </section>\r\n    );\r\n}\r\n \r\nexport default BurgerIngredients;","import React, {FC} from 'react';\r\nimport orderCardStyles from './ingredient-icon.module.css';\r\n\r\ninterface IIngredientIcon {\r\n  src: string,\r\n  alt: string,\r\n  count?: string\r\n}\r\n\r\nconst IngredientIcon: FC<IIngredientIcon> = ({\r\n  src,\r\n  alt,\r\n  count\r\n}) => {\r\n  \r\n  return (\r\n    <div\r\n      data-count={count}\r\n      className={`text text_type_digits-default ${orderCardStyles.ingredientIconBorder}`}>\r\n        <img className={orderCardStyles.ingredientIcon} src={src} alt={alt} />        \r\n    </div>\r\n  );\r\n}\r\n \r\nexport default IngredientIcon;\r\n","import React, {FC, useCallback, useMemo} from 'react';\r\nimport {v4 as uuidv4} from 'uuid';\r\nimport {formatRelative} from 'date-fns'\r\nimport ruLocale from \"date-fns/locale/ru\";\r\nimport orderCardStyles from './order-card.module.css';\r\nimport {\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport IngredientIcon from '../ingredient-icon/ingredient-icon';\r\nimport {getStatusName, TIngredient} from '../../services';\r\n\r\ninterface IOrderCard {\r\n  createdAt: string,\r\n  name: string,\r\n  status: 'done' | 'pending' | 'created',\r\n  showStatus?: boolean,  \r\n  ingredients: string[],\r\n  changeLocation: (item: {number: number}) => void,\r\n  ingredientsMap: {\r\n    [name: string]: TIngredient\r\n  },\r\n  number: number\r\n};\r\n\r\nconst OrderCard: FC<IOrderCard> = ({\r\n  createdAt,\r\n  name,\r\n  status,\r\n  showStatus = true,  \r\n  ingredients,\r\n  changeLocation,\r\n  ingredientsMap = {},\r\n  number\r\n}) => {\r\n  const goToOrder = useCallback(\r\n    () => {\r\n      changeLocation({number});\r\n    },\r\n    [changeLocation, number]\r\n  );\r\n  const totalCost = useMemo(() => {\r\n    return ingredients.reduce((acc, cur: string) => {\r\n      return acc + (ingredientsMap[cur] ? Number(ingredientsMap[cur].price) : 0);\r\n    }, 0);\r\n  }, [ingredientsMap, ingredients]);\r\n\r\n  return (\r\n    <div className={`mb-4 p-6 ${orderCardStyles.wrapper}`} onClick={goToOrder}>\r\n      <div className={`${orderCardStyles.orderTitle}`}>        \r\n        <span className={`text text_type_digits-default`}>{`#${number}`}</span>\r\n        <span className={`text text_type_main-default ${orderCardStyles.inactive}`}>\r\n          {\r\n            formatRelative(new Date(createdAt), new Date(), {locale: ruLocale})\r\n          }\r\n        </span>\r\n      </div>\r\n      <span className={`mt-3 text text_type_main-medium`}>{name}</span>\r\n      {\r\n        showStatus && status &&\r\n        <span\r\n        className={\r\n          `mt-2 mb-3 text text_type_main-default\r\n          ${status === 'done' ? orderCardStyles.done : null}`}>\r\n            {getStatusName(status)}\r\n        </span>\r\n      }\r\n      <div className={`mt-3 ${orderCardStyles.ingredients}`}>\r\n        <div>\r\n          {ingredients.map((ingredient, i) => (\r\n            i <= 5 ? <IngredientIcon\r\n              key={uuidv4()}\r\n              count={i === 5 ? `+${ingredients.length - 5}` : undefined}\r\n              src={ingredientsMap[ingredient] && ingredientsMap[ingredient].image_mobile} alt={ingredient}\r\n            /> : null\r\n          ))}\r\n        </div>\r\n        <span className={`ml-3 text text_type_digits-default ${orderCardStyles.cost}`}>\r\n          {totalCost}\r\n          <CurrencyIcon type=\"primary\"/>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nexport default OrderCard;\r\n","import React, {FC, useEffect} from 'react';\r\nimport {useAuth} from '../../services';\r\nimport {useDispatch} from 'react-redux';\r\nimport {Redirect, Route, useLocation} from 'react-router-dom';\r\nimport Spinner from '../spinner/spinner';\r\n\r\ninterface IProtectedRoute {\r\n  [name: string]: any,\r\n  children: JSX.Element\r\n};\r\n\r\nconst ProtectedRoute: FC<IProtectedRoute> = ({ children, ...rest }) => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const [\r\n    {user, isUserLoaded},\r\n    {fetchGetUserAction, fetchUserLogoutAction}\r\n  ] = useAuth();\r\n\r\n  const init = () => {\r\n    dispatch(fetchGetUserAction());\r\n  };\r\n  useEffect(() => {        \r\n    init();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (!isUserLoaded) {\r\n    return <Spinner isLoading />;\r\n  }\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() =>                \r\n        user ? (\r\n          React.cloneElement(children, {user, fetchUserLogoutAction})\r\n        ) : <Redirect to={{\r\n          pathname: '/login',\r\n          state: {\r\n            from: location\r\n          }\r\n        }} />\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React, {FC, useEffect} from 'react';\r\nimport {useAuth} from '../../services';\r\nimport {useDispatch} from 'react-redux';\r\nimport {Redirect, Route, useLocation} from 'react-router-dom';\r\nimport Spinner from '../spinner/spinner';\r\n\r\ninterface IUserProtectedRoute {\r\n  [name: string]: any,\r\n  children: JSX.Element\r\n};\r\n\r\ntype TLocation = {\r\n  state?: {\r\n    from?: {\r\n      pathname: string\r\n    }\r\n  }\r\n};\r\n\r\nconst UserProtectedRoute: FC<IUserProtectedRoute> = ({ children, ...rest }) => {\r\n  const dispatch = useDispatch();\r\n  const location: TLocation = useLocation();\r\n  const [\r\n    {user, isUserLoaded},\r\n    {fetchGetUserAction}\r\n  ] = useAuth();\r\n\r\n  const init = () => {\r\n    dispatch(fetchGetUserAction());\r\n  };\r\n\r\n  useEffect(() => {        \r\n    init();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n  if (!isUserLoaded) {\r\n    return <Spinner isLoading />;\r\n  }\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={() =>                \r\n        !user ? (\r\n          children\r\n        ) : <Redirect to={{\r\n          pathname: location.state?.from?.pathname ?\r\n            location.state?.from?.pathname :\r\n            '/'\r\n        }}/>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default UserProtectedRoute;\r\n","import React, {FC} from 'react';\r\nimport {ConnectedRouter} from 'connected-react-router';\r\nimport appStyles from './app.module.css';\r\nimport {\r\n  AppHeader,\r\n  AppFooter,\r\n  AppSpinner\r\n} from '../components';\r\nimport {useOrder, history, MainRouter} from '../services';\r\n\r\nconst App: FC = () => {\r\n  const [{isSendingDataOrder}] = useOrder();\r\n  return (\r\n    <>          \r\n      <ConnectedRouter history={history}>\r\n        <AppHeader />\r\n          <main\r\n            className={`pb-5 ${appStyles.mainContainer}`}>\r\n              <MainRouter/>\r\n          </main>\r\n        <AppFooter />\r\n        {isSendingDataOrder && <AppSpinner />}\r\n      </ConnectedRouter>\r\n    </>\r\n  );\r\n}\r\n \r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {TIngredient} from '../ingredients';\r\nimport {\r\n  FETCH_INGREDIENTS_PENDING,\r\n  FETCH_INGREDIENTS_SUCCESS,\r\n  FETCH_INGREDIENTS_FAIL,\r\n  CHANGE_INGREDIENTS,\r\n  INCREASE_INGREDIENT_COUNT,\r\n  DECREASE_INGREDIENT_COUNT,\r\n  OPEN_INGREDIENT_DETAILS,\r\n  CLOSE_INGREDIENT_DETAILS\r\n} from './action-types';\r\nimport {TIngredientsAction} from './types';\r\n\r\nexport type TIngredientsInitialState = {\r\n  ingredients: Array<TIngredient>;\r\n  isIngredientsLoading: boolean;\r\n  errorMessage: string | null;\r\n  showIngredientDetails: boolean;\r\n  ingredientDetails: TIngredient | object\r\n};\r\n\r\nconst ingredientsInitialState: TIngredientsInitialState = {\r\n  ingredients: [],\r\n  isIngredientsLoading: false,\r\n  errorMessage: null,\r\n  showIngredientDetails: false,\r\n  ingredientDetails: {}\r\n};\r\n\r\nexport type TIngredientsReducer = TIngredientsInitialState;\r\n\r\nexport const ingredientsReducer = (\r\n  state = ingredientsInitialState,\r\n  action: TIngredientsAction\r\n): TIngredientsReducer => {\r\n  switch (action.type) {\r\n    case FETCH_INGREDIENTS_PENDING:\r\n      return {\r\n        ...state,\r\n        isIngredientsLoading: true,\r\n        ingredients: [],\r\n        errorMessage: null\r\n      };  \r\n    case FETCH_INGREDIENTS_SUCCESS:\r\n    case CHANGE_INGREDIENTS:\r\n      return {\r\n        ...state,\r\n        ingredients: action.payload.ingredients || [],\r\n        isIngredientsLoading: false\r\n      };        \r\n    case FETCH_INGREDIENTS_FAIL:\r\n      return {\r\n        ...state,\r\n        isIngredientsLoading: false,\r\n        errorMessage: action.payload.errorMessage,\r\n        ingredients: []\r\n      };        \r\n    case INCREASE_INGREDIENT_COUNT:\r\n      return {\r\n        ...state,        \r\n        ingredients: [...state.ingredients.map(\r\n          ingredient => {\r\n            if (ingredient._id === action.payload.id) {\r\n              ingredient.count = Number(ingredient.count || 0) + 1\r\n            }\r\n            return ingredient;\r\n          }\r\n        )]\r\n      };        \r\n    case DECREASE_INGREDIENT_COUNT:\r\n      return {\r\n        ...state,        \r\n        ingredients: [...state.ingredients.map(\r\n          ingredient => {\r\n            if (ingredient._id === action.payload.id) {\r\n              ingredient.count = Number(ingredient.count || 0) - 1\r\n            }\r\n            return ingredient;\r\n          }\r\n        )]\r\n      };        \r\n    case OPEN_INGREDIENT_DETAILS:\r\n      return {\r\n        ...state,\r\n        showIngredientDetails: true,\r\n        ingredientDetails: action.payload.details\r\n      };        \r\n    case CLOSE_INGREDIENT_DETAILS:\r\n      return {\r\n        ...state,        \r\n        showIngredientDetails: false,\r\n        ingredientDetails: {}\r\n      };\r\n    default:\r\n      return {...state};\r\n  }\r\n}\r\n","import {\r\n  INCREASE_TOTALCOST,\r\n  DECREASE_TOTALCOST,\r\n  RESET_TOTALCOST,\r\n  FETCH_DATA_ORDER_FAIL,\r\n  FETCH_DATA_ORDER_PENDING,\r\n  FETCH_DATA_ORDER_SUCCESS,\r\n  SHOW_ORDER_DETAILS,\r\n  CLOSE_ORDER_DETAILS,\r\n  GET_ORDER_BY_ID_PENDING,\r\n  GET_ORDER_BY_ID_SUCCESS,\r\n  GET_ORDER_BY_ID_FAIL\r\n} from './action-types';\r\nimport {TOrderAction} from './types';\r\n\r\ntype TOrderInitialState = {\r\n  totalCost: number;\r\n  isSendingDataOrder: boolean;\r\n  orderId: number | null;\r\n  isShowOrderDetails: boolean;\r\n  errorMessage: string | null;\r\n  order: any;\r\n  isOrderLoading: boolean;\r\n};\r\n\r\nconst orderInitialState: TOrderInitialState | any = {\r\n  totalCost: 0,\r\n  isSendingDataOrder: false,\r\n  orderId: null,\r\n  isShowOrderDetails: false,\r\n  errorMessage: null,\r\n  order: null,\r\n  isOrderLoading: true\r\n};\r\n\r\nexport type TOrderReducer = TOrderInitialState;\r\n\r\nexport const orderReducer = (\r\n  state = orderInitialState,\r\n  action: TOrderAction\r\n): TOrderReducer => {\r\n  switch (action.type) {    \r\n    case INCREASE_TOTALCOST:\r\n      return {\r\n        ...state,\r\n        totalCost: state.totalCost + action.payload.amount\r\n      };            \r\n    case DECREASE_TOTALCOST:\r\n      return {\r\n        ...state,\r\n        totalCost: state.totalCost - action.payload.amount\r\n      };          \r\n    case RESET_TOTALCOST:\r\n      return {\r\n        ...state,\r\n        totalCost: 0\r\n      };          \r\n    case FETCH_DATA_ORDER_PENDING:\r\n      return {\r\n        ...state,\r\n        isSendingDataOrder: true,\r\n        errorMessage: null\r\n      };          \r\n    case FETCH_DATA_ORDER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isSendingDataOrder: false,\r\n        orderId: action.payload.orderId\r\n      };          \r\n    case FETCH_DATA_ORDER_FAIL:\r\n      return {\r\n        ...state,\r\n        isSendingDataOrder: false,\r\n        errorMessage: action.payload.errorMessage,\r\n        orderId: null\r\n      };          \r\n    case SHOW_ORDER_DETAILS:\r\n      return {\r\n        ...state,\r\n        isShowOrderDetails: true\r\n      };          \r\n    case CLOSE_ORDER_DETAILS:\r\n      return {\r\n        ...state,\r\n        isShowOrderDetails: false\r\n      };          \r\n    case GET_ORDER_BY_ID_PENDING:\r\n      return {\r\n        ...state,        \r\n        isOrderLoading: true\r\n      };          \r\n    case GET_ORDER_BY_ID_SUCCESS:\r\n      return {\r\n        ...state,\r\n        order: action.payload,\r\n        isOrderLoading: false\r\n      };          \r\n    case GET_ORDER_BY_ID_FAIL:\r\n      return {\r\n        ...state,\r\n        order: null,\r\n        isOrderLoading: false\r\n      };\r\n    default:\r\n      return {...state};\r\n  }\r\n}\r\n","import {\r\n  ADD_TO_CONSTRUCTOR,\r\n  REMOVE_FROM_CONSTRUCTOR,\r\n  DROP_CONSTRUCTOR_ITEM,\r\n  RESET_CONSTRUCTOR,\r\n  HIDE_DROP_LOCATION,\r\n  SHOW_DROP_LOCATION\r\n} from './action-types';\r\nimport {TIngredient} from '../ingredients';\r\nimport { TConstructorActions } from './types';\r\n\r\nexport type TConstructorState = {\r\n  constructorIngredients: Array<TIngredient>;\r\n  showDropLocation: boolean;\r\n} \r\n\r\nconst constructorInitialState: TConstructorState = {\r\n  constructorIngredients: [],\r\n  showDropLocation: false\r\n};\r\n\r\nexport const array_move = function(arr: any[], old_index: number, new_index: number) {\r\n  if (new_index >= arr.length) {\r\n      let k = new_index - arr.length + 1;\r\n      while (k--) {\r\n          arr.push(undefined);\r\n      }\r\n  }\r\n  arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\r\n  return arr;\r\n};\r\n\r\nexport type TConstructorReducer = TConstructorState;\r\n\r\nexport const constructorReducer = (\r\n  state = constructorInitialState,\r\n  action: TConstructorActions\r\n): TConstructorReducer => {\r\n  const constructorIngredients = [...state.constructorIngredients];\r\n  switch (action.type) {    \r\n    case ADD_TO_CONSTRUCTOR:\r\n      constructorIngredients.splice(action.payload.index, 0, action.payload.item);\r\n      return {\r\n        ...state,\r\n        constructorIngredients\r\n      };            \r\n    case REMOVE_FROM_CONSTRUCTOR:\r\n      constructorIngredients.splice(action.payload.index, 1);\r\n      return {\r\n        ...state,\r\n        constructorIngredients\r\n      };        \r\n    case DROP_CONSTRUCTOR_ITEM:\r\n      const {dragIndex, replaceToIndex} = action.payload;  \r\n      if (dragIndex === replaceToIndex) {\r\n        return {\r\n          ...state\r\n        };\r\n      }    \r\n      return {\r\n        ...state,\r\n        constructorIngredients: array_move(\r\n          [...state.constructorIngredients],\r\n          dragIndex + 1,\r\n          replaceToIndex + 1\r\n        )\r\n      };         \r\n    case RESET_CONSTRUCTOR:\r\n      return {\r\n        ...state ,\r\n        constructorIngredients: constructorInitialState.constructorIngredients       \r\n      };         \r\n    case SHOW_DROP_LOCATION:\r\n      return {\r\n        ...state ,\r\n        showDropLocation: true       \r\n      };         \r\n    case HIDE_DROP_LOCATION:\r\n      return {\r\n        ...state ,\r\n        showDropLocation: false  \r\n      };\r\n    default:\r\n      return {...state};\r\n  }\r\n}\r\n","import * as ActionTypes from './action-types';\r\nimport {TRegisterFormActions} from './types';\r\n\r\nexport type TRegisterFormInitialState = {\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n};\r\n\r\nconst registerFormInitialState: TRegisterFormInitialState = {\r\n  name: '',\r\n  email: '',\r\n  password: ''\r\n};\r\n\r\nexport type TRegisterFormReducer = TRegisterFormInitialState;\r\n\r\nexport const registerFormReducer = (\r\n  state = registerFormInitialState,\r\n  action: TRegisterFormActions\r\n): TRegisterFormReducer => {\r\n  switch(action.type) {\r\n    case ActionTypes.REGISTER_FORM_SET_VALUE: {\r\n        return {\r\n            ...state,\r\n            [action.field]: action.value\r\n        }\r\n    }\r\n    default: {\r\n        return state;\r\n    }\r\n}\r\n}\r\n","import * as ActionTypes from './action-types';\r\nimport {TLoginFormActions} from './types';\r\n\r\nexport type TLoginFormInitialState = {\r\n  email: string;\r\n  password: string\r\n}\r\n\r\nconst loginFormInitialState: TLoginFormInitialState = {\r\n  email: '',\r\n  password: ''\r\n};\r\n\r\nexport type TLoginFormReducer = TLoginFormInitialState;\r\n\r\nexport const loginFormReducer = (\r\n  state = loginFormInitialState,\r\n  action: TLoginFormActions\r\n):TLoginFormReducer => {\r\n  switch(action.type) {\r\n    case ActionTypes.LOGIN_FORM_SET_VALUE: {\r\n        return {\r\n            ...state,\r\n            [action.field]: action.value\r\n        }\r\n    }\r\n    default: {\r\n        return state;\r\n    }\r\n}\r\n}\r\n","import * as ActionTypes from './action-types';\r\nimport {TForgotPasswordActions} from './types';\r\n\r\nexport type TForgotPasswordFormState = {\r\n  email: string;\r\n};\r\n\r\nconst forgotPasswordFormInitialState: TForgotPasswordFormState = {\r\n  email: ''\r\n};\r\n\r\nexport type TForgotPasswordFormReducer = TForgotPasswordFormState;\r\n\r\nexport const forgotPasswordFormReducer = (\r\n  state = forgotPasswordFormInitialState,\r\n  action: TForgotPasswordActions\r\n): TForgotPasswordFormReducer => {\r\n  switch(action.type) {\r\n    case ActionTypes.FORGOT_PASSWORD_FORM_SET_VALUE: {\r\n        return {\r\n            ...state,\r\n            [action.field]: action.value\r\n        }\r\n    }\r\n    default: {\r\n        return state;\r\n    }\r\n}\r\n}\r\n","import * as ActionTypes from './action-types';\r\nimport {TResetPasswordActions} from './types';\r\n\r\nexport type TResetPasswordFormInitialState = {\r\n  password: string;\r\n  token: string;\r\n};\r\n\r\nconst resetPasswordFormInitialState: TResetPasswordFormInitialState = {\r\n  password: '',\r\n  token: ''\r\n};\r\n\r\nexport type TResetPasswordFormReducer = TResetPasswordFormInitialState;\r\n\r\nexport const resetPasswordFormReducer = (\r\n  state = resetPasswordFormInitialState,\r\n  action: TResetPasswordActions\r\n): TResetPasswordFormReducer => {\r\n  switch(action.type) {\r\n    case ActionTypes.RESET_PASSWORD_FORM_SET_VALUE: {\r\n        return {\r\n            ...state,\r\n            [action.field]: action.value\r\n        }\r\n    }\r\n    default: {\r\n        return state;\r\n    }\r\n}\r\n}\r\n","import * as ActionTypes from './action-types';\r\nimport {TUserActions} from './types';\r\n\r\nexport type TUserInitialState = {\r\n  accessToken: string | null;\r\n  refreshToken: string | null;\r\n  user: {\r\n    email: string;\r\n    name: string;\r\n  } | null;\r\n  userActionPending: boolean;\r\n  isUserLoaded: boolean;\r\n  isUserUpdates: boolean;\r\n} | any;\r\n\r\nconst userInitialState: TUserInitialState = {\r\n  accessToken: null,\r\n  refreshToken: null,\r\n  user: null,\r\n  userActionPending: false,\r\n  isUserLoaded: false,\r\n  isUserUpdates: false\r\n};\r\n\r\nexport type TUserReducer = TUserInitialState;\r\n\r\nexport const userReducer = (\r\n  state = userInitialState,\r\n  action: TUserActions\r\n): TUserReducer => {\r\n  switch (action.type) {    \r\n    case ActionTypes.USER_LOGIN_PENDING:\r\n    case ActionTypes.USER_REGISTER_PENDING:\r\n      return {\r\n        ...state,\r\n        userActionPending: true\r\n      };\r\n    case ActionTypes.USER_LOGIN_SUCCESS:\r\n    case ActionTypes.USER_REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        userActionPending: false,\r\n        accessToken: action.payload.accessToken,\r\n        refreshToken: action.payload.refreshToken,  \r\n        token: action.payload.token,\r\n        user: action.payload.user\r\n      }\r\n    case ActionTypes.USER_REFRESH_TOKEN_SUCCESS:\r\n      return {\r\n        ...state,       \r\n        accessToken: action.payload.accessToken,\r\n        refreshToken: action.payload.refreshToken,  \r\n        token: action.payload.token\r\n      }\r\n    case ActionTypes.USER_LOGOUT_SUCCESS:\r\n      return {\r\n        ...state,       \r\n        accessToken: null,\r\n        refreshToken: null,\r\n        user: null\r\n      }\r\n    case ActionTypes.USER_LOGIN_FAIL:\r\n    case ActionTypes.USER_REGISTER_FAIL:\r\n    case ActionTypes.USER_REFRESH_TOKEN_FAIL:\r\n      return {\r\n        ...state,\r\n        userActionPending: false,\r\n        errorMessage: action.payload.errorMessage\r\n      }\r\n    case ActionTypes.USER_UPDATE_PENDING:\r\n      return {\r\n        ...state,\r\n        isUserUpdates: true\r\n      }\r\n    case ActionTypes.USER_UPDATE_FAIL:\r\n      return {\r\n        ...state,\r\n        isUserUpdates: false\r\n      }\r\n    case ActionTypes.USER_UPDATE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        isUserUpdates: false\r\n      }\r\n    case ActionTypes.GET_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload.user,\r\n        token: action.payload.token,\r\n        isUserLoaded: true\r\n      }\r\n    case ActionTypes.GET_USER_FAIL:\r\n      return {\r\n        ...state,        \r\n        isUserLoaded: true\r\n      }  \r\n    default:\r\n      return {...state};\r\n  }\r\n}\r\n","import {TOrder} from './index';\r\nimport {\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_FEED_ORDERS,\r\n  WS_GET_HISTORY_ORDERS\r\n} from './action-types';\r\nimport {TWebsocketActions} from './types';\r\n\r\nexport type TWsInitialState = {\r\n  wsConnected: boolean;\r\n  feedData: {\r\n    orders: TOrder[];\r\n    total: number;\r\n    totalToday: number;\r\n  },\r\n  historyData: {\r\n    orders: TOrder[];\r\n    total: number;\r\n    totalToday: number;\r\n  }  \r\n} | any;\r\n\r\nconst initialState: TWsInitialState = {\r\n  wsConnected: false,\r\n  feedData: {\r\n    orders: [],\r\n    total: 0,\r\n    totalToday: 0\r\n  },\r\n  historyData: {\r\n    orders: [],\r\n    total: 0,\r\n    totalToday: 0\r\n  } \r\n};\r\n\r\nexport type TWsReducer = TWsInitialState;\r\n\r\nexport const wsReducer = (\r\n  state = initialState,\r\n  action: TWebsocketActions\r\n): TWsReducer => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsConnected: true\r\n      };\r\n    case WS_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsConnected: false\r\n      };\r\n    case WS_GET_FEED_ORDERS:\r\n      return {\r\n        ...state,\r\n        feedData: action.payload\r\n      };\r\n    case WS_GET_HISTORY_ORDERS:\r\n      return {\r\n        ...state,\r\n        historyData: action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport {connectRouter} from 'connected-react-router';\r\nimport {ingredientsReducer} from './ingredients/reducer';\r\nimport {orderReducer} from './order/reducer';\r\nimport {constructorReducer} from './constructor/reducer';\r\nimport {registerFormReducer} from './register-form/reducer';\r\nimport {loginFormReducer} from './login-form/reducer';\r\nimport {forgotPasswordFormReducer} from './forgot-password-form/reducer';\r\nimport {resetPasswordFormReducer} from './reset-password-form/reducer';\r\nimport {userReducer} from './user/reducer';\r\nimport {wsReducer} from './websocket/reducer';\r\nimport history from './history';\r\n\r\nexport const rootReducer = combineReducers({\r\n  router: connectRouter(history),\r\n  ingredientsReducer,\r\n  orderReducer,\r\n  constructorReducer,\r\n  registerFormReducer,\r\n  loginFormReducer,\r\n  forgotPasswordFormReducer,\r\n  resetPasswordFormReducer,\r\n  userReducer,\r\n  wsReducer\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n","import {Store} from \"redux\";\r\n\r\ntype TAction = {type: string, payload?: any};\r\ntype TDispatchAction = (action: TAction) => void;\r\n\r\nexport const socketMiddleware = (\r\n  wsUrl: string, \r\n  wsActions: {\r\n    [name: string]: string\r\n  },\r\n  withAuth?: boolean\r\n) => {\r\n  return (store: Store) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: TDispatchAction) => (action: TAction) => {\r\n      const { dispatch, getState } = store;\r\n      const { type, payload } = action;\r\n      const { wsInit, wsInitUser, wsSendMessage, onOpen, onClose,\r\n        onError, onGetFeedOrders, onGetHistoryOrders, wsEnd, wsEndUser, wsPing } = wsActions;\r\n      const { token } = getState().userReducer;\r\n      if (type === wsInit && !withAuth) {\r\n        socket = new WebSocket(`${wsUrl}`);\r\n      }\r\n      if (type === wsInitUser && token && withAuth) {\r\n        socket = new WebSocket(`${wsUrl}?token=${token}`);\r\n      }\r\n      if (socket) {\r\n        socket.onopen = event => {\r\n          dispatch({ type: onOpen, payload: event });\r\n        };\r\n\r\n        socket.onerror = event => {\r\n          dispatch({ type: onError, payload: event });\r\n        };\r\n        socket.onmessage = event => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n\r\n          if (withAuth) {\r\n            dispatch({ type: onGetHistoryOrders, payload: restParsedData });\r\n          } else {\r\n            dispatch({ type: onGetFeedOrders, payload: restParsedData });\r\n          }\r\n        };\r\n\r\n        socket.onclose = event => {\r\n          dispatch({ type: onClose, payload: event });\r\n        };\r\n\r\n        if (type === wsSendMessage && token) {\r\n          const message = { ...payload, token: token };\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n        if (type === wsPing) {          \r\n          socket.send('pong');\r\n        }\r\n        if (type === wsEnd || type === wsEndUser) {\r\n          socket.close();\r\n          socket = null;\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {compose, createStore, applyMiddleware, Action, ActionCreator} from 'redux';\r\nimport {routerMiddleware} from 'connected-react-router';\r\nimport thunk from 'redux-thunk';\r\nimport {rootReducer} from './rootReducer';\r\nimport history from './history';\r\nimport {\r\n  WS_CONNECTION_CLOSED,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_USER_START,\r\n  WS_CONNECTION_END,\r\n  WS_CONNECTION_USER_END,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_GET_FEED_ORDERS,\r\n  WS_GET_HISTORY_ORDERS,\r\n  WS_SEND_MESSAGE,\r\n  WS_SEND_PONG_MESSAGE\r\n} from './websocket/action-types';\r\nimport {socketMiddleware} from './websocket/socketMiddleWare';\r\nimport {composeWithDevTools} from 'redux-devtools-extension';\r\nimport {TConstructorActions} from './constructor/types';\r\nimport {TForgotPasswordActions} from './forgot-password-form/types';\r\nimport {TIngredientsAction} from './ingredients/types';\r\nimport {TLoginFormActions} from './login-form/types';\r\nimport {TRegisterFormActions} from './register-form/types';\r\nimport {TResetPasswordActions} from './reset-password-form/types';\r\nimport {TOrderAction} from './order/types';\r\nimport {TUserActions} from './user/types';\r\nimport {TWebsocketActions} from './websocket/types';\r\n\r\nconst createLogger = require('redux-logger').createLogger;\r\n\r\nconst isDev = process.env.NODE_ENV === 'development';\r\n\r\nconst wsUrl = 'wss://norma.nomoreparties.space/orders/all';\r\nconst wsUrlHistory = 'wss://norma.nomoreparties.space/orders';\r\n\r\nconst wsActions = {\r\n  wsInit: WS_CONNECTION_START,\r\n  wsInitUser: WS_CONNECTION_USER_START,\r\n  wsEnd: WS_CONNECTION_END,\r\n  wsEndUser: WS_CONNECTION_USER_END,\r\n  wsSendMessage: WS_SEND_MESSAGE,\r\n  onOpen: WS_CONNECTION_SUCCESS,\r\n  onClose: WS_CONNECTION_CLOSED,\r\n  onError: WS_CONNECTION_ERROR,\r\n  onGetFeedOrders: WS_GET_FEED_ORDERS,\r\n  onGetHistoryOrders: WS_GET_HISTORY_ORDERS,\r\n  wsPing: WS_SEND_PONG_MESSAGE\r\n};\r\n\r\nconst socketAllOrdersMiddlware = socketMiddleware(wsUrl, wsActions);\r\nconst socketHistoryOrdersMiddlware = socketMiddleware(wsUrlHistory, wsActions, true);\r\nconst routerMiddle = routerMiddleware(history);\r\nconst logger = createLogger({collapsed: true});\r\n\r\nconst getMiddleWares = () => {\r\n  return isDev ?\r\n  [routerMiddle, thunk, logger, socketAllOrdersMiddlware, socketHistoryOrdersMiddlware] :\r\n  [routerMiddle, thunk, socketAllOrdersMiddlware, socketHistoryOrdersMiddlware];\r\n};\r\n\r\nconst enhancer = isDev ?\r\n  composeWithDevTools(applyMiddleware(...getMiddleWares())) :\r\n  compose(applyMiddleware(...getMiddleWares()))\r\n;\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  enhancer\r\n);\r\n\r\nexport default store;\r\n\r\ntype TApplicationActions =\r\n  TConstructorActions |\r\n  TForgotPasswordActions |\r\n  TIngredientsAction |\r\n  TLoginFormActions |\r\n  TRegisterFormActions |\r\n  TResetPasswordActions |\r\n  TOrderAction |\r\n  TUserActions |\r\n  TWebsocketActions\r\n;\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type AppThunk<ReturnType = void> = ActionCreator<\r\n  ThunkAction<ReturnType, Action, RootState, TApplicationActions>\r\n>;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './app';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nimport {Provider} from 'react-redux';\r\nimport store from './services/store';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"feed_container__3aLtn\",\"feedContainer\":\"feed_feedContainer__trarY\",\"feedList\":\"feed_feedList__1_fBk\",\"stats\":\"feed_stats__1nEi_\",\"table\":\"feed_table__2jrth\",\"readyOrders\":\"feed_readyOrders__2MaR-\",\"currentOrders\":\"feed_currentOrders__2Mt1Q\",\"tableNum\":\"feed_tableNum__2_wNc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order_container__1TkAw\",\"orderId\":\"order_orderId__2T2jy\",\"orderStatus\":\"order_orderStatus__3cUPn\",\"contains\":\"order_contains__3jZDC\",\"ingredientTitle\":\"order_ingredientTitle__1ShGc\",\"cost\":\"order_cost__28uyP\",\"inactive\":\"order_inactive__2hEJ2\",\"done\":\"order_done__2-AA0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app-header_container__2O0Ib\",\"navigation\":\"app-header_navigation__2bkYt\",\"logo\":\"app-header_logo__eYd9h\",\"menuIcon\":\"app-header_menuIcon__2b-Rz\",\"menu\":\"app-header_menu__D5bpw\",\"menuHeader\":\"app-header_menuHeader__2lHf2\",\"account\":\"app-header_account__3u-Dl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile_container__UlN7x\",\"noMargin\":\"profile_noMargin__3kW2r\",\"orderList\":\"profile_orderList__wADNK\",\"label\":\"profile_label__2_ccL\",\"navigation\":\"profile_navigation__9u9Oc\",\"hide\":\"profile_hide__2ScJr\",\"description\":\"profile_description__3Qjc3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-card_wrapper__12dq4\",\"orderTitle\":\"order-card_orderTitle__2WjJK\",\"inactive\":\"order-card_inactive__ZLpVK\",\"ingredients\":\"order-card_ingredients__3qvib\",\"cost\":\"order-card_cost__vDnfX\",\"done\":\"order-card_done__3g8ON\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"modal_container__1mvwT\",\"modal\":\"modal_modal__2zJQ9\",\"modalHeader\":\"modal_modalHeader__-5uTM\",\"closeButton\":\"modal_closeButton__2oPdr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__5kX03\",\"table\":\"burger-ingredients_table__1a0p2\",\"tableWrapper\":\"burger-ingredients_tableWrapper__1lla6\",\"tabs\":\"burger-ingredients_tabs__3m0Zq\",\"ingredient\":\"burger-ingredients_ingredient__1SPgJ\",\"counter\":\"burger-ingredients_counter__6dwXt\",\"cost\":\"burger-ingredients_cost__3EigX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__lZ8eo\",\"label\":\"login_label__2G29w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"link_link__3Rsg-\",\"active\":\"link_active__2SH0e\",\"navLink\":\"link_navLink__4RX6X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__1A3pt\",\"tableWrapper\":\"burger-constructor_tableWrapper__jgqER\",\"ingredientWrapper\":\"burger-constructor_ingredientWrapper__7QaOm\",\"dragHandle\":\"burger-constructor_dragHandle__ho_58\",\"footer\":\"burger-constructor_footer__J7ewR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"order-details_content__fwFN_\",\"orderId\":\"order-details_orderId__3HZgD\",\"waiting\":\"order-details_waiting__vUWNM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredient_container__3WAJV\",\"table\":\"burger-ingredient_table__1L4hG\",\"tableWrapper\":\"burger-ingredient_tableWrapper__2USyI\",\"tabs\":\"burger-ingredient_tabs__1aKTu\",\"ingredient\":\"burger-ingredient_ingredient__35H6G\",\"counter\":\"burger-ingredient_counter__3A-U6\",\"cost\":\"burger-ingredient_cost__1PuYA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"app-footer_container__1217Z\",\"footer\":\"app-footer_footer__sq7RA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"register_container__3H2Nw\",\"label\":\"register_label__2EDb-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forgot-password_container__314Fz\",\"label\":\"forgot-password_label__1PA3F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"reset-password_container__X5KIR\",\"label\":\"reset-password_label__2Jogu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor-element_container__2NBdA\",\"tableWrapper\":\"burger-constructor-element_tableWrapper__3nkxl\",\"ingredientWrapper\":\"burger-constructor-element_ingredientWrapper__ZjyzH\",\"dragHandle\":\"burger-constructor-element_dragHandle__33_S7\",\"footer\":\"burger-constructor-element_footer__1TLaa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredientIcon\":\"ingredient-icon_ingredientIcon__27cXW\",\"ingredientIconBorder\":\"ingredient-icon_ingredientIconBorder__1N88n\"};"],"sourceRoot":""}